<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cash Flow Forecasting Dashboard</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --az-mulberry: #830051;
            --az-lime: #C4D600;
            --az-navy: #003865;
            --az-graphite: #3F4444;
            --az-light-blue: #68D2DF;
            --az-magenta: #D0006F;
            --az-purple: #3C1053;
            --az-gold: #F0AB00;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            color: var(--az-graphite);
            line-height: 1.6;
        }

        .dashboard-header {
            background: linear-gradient(135deg, var(--az-mulberry) 0%, var(--az-purple) 100%);
            color: white;
            padding: 2rem 3rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }

        .header-content {
            max-width: 1600px;
            margin: 0 auto;
        }

        .dashboard-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .dashboard-subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            font-weight: 300;
        }

        .nav-bar {
            background: white;
            padding: 1rem 3rem;
            border-bottom: 3px solid var(--az-mulberry);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .nav-content {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .nav-label {
            font-weight: 600;
            color: var(--az-mulberry);
            margin-right: 1rem;
        }

        .nav-link {
            padding: 0.5rem 1.2rem;
            background: #f1f3f4;
            border-radius: 25px;
            text-decoration: none;
            color: var(--az-graphite);
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            background: var(--az-mulberry);
            color: white;
            transform: translateY(-2px);
        }

        .main-content {
            max-width: 1600px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Executive Summary */
        .executive-summary {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .summary-title {
            font-size: 2rem;
            color: var(--az-mulberry);
            margin-bottom: 1rem;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }

        .summary-card {
            text-align: center;
            padding: 1.5rem;
            border-radius: 12px;
            background: linear-gradient(145deg, #f8f9fa, #ffffff);
            border: 1px solid #e9ecef;
        }

        .summary-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .summary-label {
            font-size: 0.9rem;
            color: #6c757d;
            font-weight: 500;
        }

        /* Methodology Section */
        .methodology {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .methodology h2 {
            color: var(--az-mulberry);
            margin-bottom: 1rem;
        }

        .methodology-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .method-card {
            padding: 1.5rem;
            border-radius: 12px;
            border-left: 4px solid var(--az-mulberry);
            background: #f8f9fa;
        }

        .method-card h4 {
            color: var(--az-navy);
            margin-bottom: 0.5rem;
        }

        .method-card p {
            font-size: 0.95rem;
            color: #555;
        }

        /* Entity Section */
        .entity-section {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .entity-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .entity-header h2 {
            font-size: 1.75rem;
            color: var(--az-graphite);
        }

        .entity-badge {
            background: var(--az-mulberry);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 8px;
            font-size: 1.2rem;
        }

        .model-badge {
            background: var(--az-light-blue);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        /* KPI Cards */
        .kpi-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .kpi-card {
            background: linear-gradient(145deg, #ffffff, #f8f9fa);
            border-radius: 12px;
            padding: 1.25rem;
            text-align: center;
            border: 1px solid #e9ecef;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .kpi-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .kpi-icon {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .kpi-value {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .kpi-label {
            font-size: 0.85rem;
            color: #6c757d;
            margin-top: 0.25rem;
        }

        /* Charts */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .chart-container {
            background: #fafbfc;
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid #e9ecef;
        }

        .chart-container.full-width {
            grid-column: 1 / -1;
        }

        .chart-container h3 {
            font-size: 1.1rem;
            color: var(--az-navy);
            margin-bottom: 0.5rem;
        }

        .chart-description {
            font-size: 0.9rem;
            color: #6c757d;
            margin-bottom: 1rem;
        }

        .chart {
            width: 100%;
            min-height: 300px;
        }

        .metrics-row {
            display: flex;
            gap: 1.5rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #e9ecef;
            flex-wrap: wrap;
        }

        .metric {
            display: flex;
            flex-direction: column;
        }

        .metric-label {
            font-size: 0.8rem;
            color: #6c757d;
            text-transform: uppercase;
        }

        .metric-value {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--az-navy);
        }

        /* Insight Box */
        .insight-box {
            background: #f8f9fa;
            border-left: 4px solid var(--az-mulberry);
            padding: 1rem;
            border-radius: 0 8px 8px 0;
            margin-top: 1rem;
        }

        .insight-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.5rem;
        }

        .status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.8rem;
            color: white;
            font-weight: 600;
        }

        /* Category Analysis */
        .category-analysis {
            margin-bottom: 2rem;
        }

        .category-analysis h3 {
            color: var(--az-navy);
            margin-bottom: 1rem;
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .category-box {
            padding: 1.5rem;
            border-radius: 12px;
            border: 1px solid #e9ecef;
        }

        .category-box.inflow {
            background: linear-gradient(145deg, rgba(196, 214, 0, 0.1), rgba(196, 214, 0, 0.05));
            border-left: 4px solid var(--az-lime);
        }

        .category-box.outflow {
            background: linear-gradient(145deg, rgba(208, 0, 111, 0.1), rgba(208, 0, 111, 0.05));
            border-left: 4px solid var(--az-magenta);
        }

        .category-box h4 {
            margin-bottom: 1rem;
            color: var(--az-graphite);
        }

        .category-box ul {
            list-style: none;
        }

        .category-box li {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px dashed #e9ecef;
        }

        .cat-name {
            font-weight: 500;
        }

        .cat-value {
            font-weight: 600;
        }

        /* Monthly Breakdown */
        .monthly-breakdown {
            background: #fafbfc;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border: 1px solid #e9ecef;
        }

        .monthly-breakdown h3 {
            color: var(--az-navy);
            margin-bottom: 0.5rem;
        }

        .monthly-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .monthly-card {
            background: white;
            border-radius: 10px;
            padding: 1rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .monthly-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
        }

        .monthly-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .month-badge {
            padding: 0.25rem 0.6rem;
            border-radius: 12px;
            font-size: 0.75rem;
            color: white;
            font-weight: 600;
        }

        .month-dates {
            font-size: 0.7rem;
            color: #6c757d;
        }

        .monthly-stats {
            display: flex;
            justify-content: space-between;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }

        .monthly-stat {
            text-align: center;
            flex: 1;
        }

        .stat-value {
            display: block;
            font-size: 1rem;
            font-weight: 700;
            color: var(--az-navy);
        }

        .stat-label {
            font-size: 0.65rem;
            color: #6c757d;
            text-transform: uppercase;
        }

        .weekly-detail {
            display: flex;
            gap: 0.25rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .week-val {
            font-size: 0.65rem;
            padding: 0.15rem 0.4rem;
            background: #f1f3f4;
            border-radius: 4px;
            font-weight: 500;
        }

        /* Model Table */
        .model-comparison {
            margin-bottom: 1rem;
        }

        .model-comparison h3 {
            color: var(--az-navy);
            margin-bottom: 1rem;
        }

        .model-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95rem;
        }

        .model-table th {
            background: var(--az-navy);
            color: white;
            padding: 0.75rem;
            text-align: left;
        }

        .model-table td {
            padding: 0.75rem;
            border-bottom: 1px solid #e9ecef;
        }

        .model-table tr:hover {
            background: #f8f9fa;
        }

        .model-table .best-model {
            background: rgba(196, 214, 0, 0.2);
            font-weight: 600;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
            .dashboard-header {
                padding: 1.5rem;
            }
            .dashboard-title {
                font-size: 1.75rem;
            }
        }

        /* Print styles */
        @media print {
            .nav-bar { display: none; }
            .entity-section { break-inside: avoid; }
        }
    </style>
</head>
<body>
    <header class="dashboard-header">
        <div class="header-content">
            <h1 class="dashboard-title">üí∞ Cash Flow Forecasting Dashboard</h1>
            <p class="dashboard-subtitle">Time-Series Analysis & ML-Based Predictions | Generated: 2025-12-20 21:54</p>
        </div>
    </header>

    <nav class="nav-bar">
        <div class="nav-content">
            <span class="nav-label">Quick Links:</span>
            <a href="#market-insights" class="nav-link" style="background: linear-gradient(135deg, #830051 0%, #3C1053 100%); color: white;">üåê Market Insights</a>
            <span class="nav-label" style="margin-left: 1rem;">Entities:</span>
            <a href="#TW10" class="nav-link">TW10</a><a href="#PH10" class="nav-link">PH10</a><a href="#TH10" class="nav-link">TH10</a><a href="#ID10" class="nav-link">ID10</a><a href="#SS10" class="nav-link">SS10</a><a href="#MY10" class="nav-link">MY10</a><a href="#VN20" class="nav-link">VN20</a><a href="#KR10" class="nav-link">KR10</a>
        </div>
    </nav>

    <main class="main-content">
        <!-- Executive Summary -->
        <section class="executive-summary">
            <h2 class="summary-title">üìä Executive Summary</h2>
            <div class="summary-grid">
                <div class="summary-card">
                    <div class="summary-value" style="color: var(--az-navy)">8</div>
                    <div class="summary-label">Entities Analyzed</div>
                </div>
                <div class="summary-card">
                    <div class="summary-value" style="color: var(--az-lime)">$127.27M</div>
                    <div class="summary-label">Total Inflows</div>
                </div>
                <div class="summary-card">
                    <div class="summary-value" style="color: var(--az-magenta)">$131.18M</div>
                    <div class="summary-label">Total Outflows</div>
                </div>
                <div class="summary-card">
                    <div class="summary-value" style="color: var(--az-mulberry)">$-3.92M</div>
                    <div class="summary-label">Net Position</div>
                </div>
            </div>
        </section>

        <!-- Methodology Section -->
        <section class="methodology">
            <h2>üìö Forecasting Methodology</h2>
            <div class="methodology-grid">
                <div class="method-card">
                    <h4>üéØ Model Selection</h4>
                    <p>We employ an ensemble of ML models including <strong>XGBoost</strong>, <strong>LightGBM</strong>, <strong>Random Forest</strong>, <strong>Gradient Boosting</strong>, and <strong>Ridge Regression</strong>. The best model is selected based on lowest RMSE during backtesting.</p>
                </div>
                <div class="method-card">
                    <h4>üìà Key Features</h4>
                    <p>Models use <strong>lag features</strong> (1, 2, 4 weeks), <strong>rolling statistics</strong> (4-week mean/std), <strong>temporal patterns</strong> (week of month, quarter), and <strong>transaction counts</strong> to capture cash flow dynamics.</p>
                </div>
                <div class="method-card">
                    <h4>üîç Backtest Validation</h4>
                    <p>The last <strong>4 weeks</strong> are held out for backtesting. We measure accuracy using MAE, RMSE, MAPE, and direction accuracy to ensure reliable forecasts.</p>
                </div>
                <div class="method-card">
                    <h4>‚ö†Ô∏è Limitations</h4>
                    <p>Forecasts assume historical patterns continue. External shocks, policy changes, or market disruptions may cause deviations. Longer horizons have higher uncertainty.</p>
                </div>
            </div>
        </section>

        <!-- Entity Sections -->

        
        <!-- Market Insights & Recommendations Section -->
        <section class="executive-summary" id="market-insights" style="margin-bottom: 2rem;">
            <h2 class="summary-title" style="display: flex; align-items: center; gap: 0.5rem;">
                üåê Market Insights & Strategic Recommendations
                <span style="font-size: 0.8rem; font-weight: normal; color: #888; margin-left: auto;">
                    Based on Forecast Analysis | Updated: 2025-12-20 21:54
                </span>
            </h2>
            
            <!-- Overall Outlook Banner -->
            <div style="background: linear-gradient(135deg, #ebf5fb 0%, #d4e6f1 100%); border-radius: 12px; padding: 1.5rem 2rem; margin-bottom: 1.5rem; border: 1px solid #3498db30;">
                <div style="display: flex; align-items: center; gap: 1rem;">
                    <span style="font-size: 3rem;">üìä</span>
                    <div>
                        <h3 style="color: #3498db; font-size: 1.5rem; margin: 0;">
                            Overall Outlook: MONITOR
                        </h3>
                        <p style="color: #555; margin: 0.5rem 0 0 0; font-size: 1rem;">
                            Risk Assessment: <strong>MODERATE</strong> | 
                            Based on cash flow forecast analysis
                        </p>
                    </div>
                    <div style="margin-left: auto; text-align: center;">
                        <div style="font-size: 0.85rem; color: #666; margin-bottom: 0.3rem;">Entities Analyzed</div>
                        <div style="font-size: 2rem; font-weight: 700; color: #3498db;">
                            8
                        </div>
                    </div>
                </div>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 1.5rem;">
                
                <!-- Article Details Panel (Left Side) -->
                <div id="article-details-panel" style="background: white; border-radius: 12px; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.05); border: 1px solid #e9ecef;">
                    <h4 style="color: var(--az-mulberry); margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem; flex-wrap: wrap;">
                        üì∞ News Articles for <span id="selected-entity-name" style="color: #3498db;">Select an entity ‚Üí</span>
                        <span id="selected-sentiment-badge" style="font-size: 0.85rem; padding: 0.2rem 0.6rem; border-radius: 12px; font-weight: 500; margin-left: 0.5rem;"></span>
                    </h4>
                    <div id="articles-container" style="max-height: 350px; overflow-y: auto;">
                        <p style="color: #888; text-align: center; padding: 2rem;">üëà Click on an entity card to view its news articles</p>
                    </div>
                </div>
                
                <!-- Entity Priority Matrix -->
                <div style="background: white; border-radius: 12px; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.05); border: 1px solid #e9ecef;">
                    <h4 style="color: var(--az-mulberry); margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                        üéØ Entity Priority Matrix
                    </h4>
                    <div style="max-height: 350px; overflow-y: auto;">
                        
            <div class="entity-card active" data-entity="TH10" 
                 onclick="selectEntity('TH10')"
                 style="background: #fef9f9; border-left: 4px solid #e74c3c; padding: 1rem 1.2rem; border-radius: 8px; margin-bottom: 0.8rem; cursor: pointer; transition: all 0.2s;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                    <strong style="font-size: 1.1rem;">TH10</strong>
                    <span style="font-size: 0.85rem; padding: 0.2rem 0.6rem; background: #e74c3c20; color: #e74c3c; border-radius: 12px; font-weight: 500;">HIGH Priority</span>
                </div>
                <div style="color: #555; font-size: 0.95rem; margin-bottom: 0.5rem;">‚ö†Ô∏è ATTENTION REQUIRED</div>
                <div style="font-size: 0.85rem; color: #666;">
                    <span style="margin-right: 1rem;">üìç Thailand</span>
                    <span style="margin-right: 1rem; color: #e74c3c; font-weight: 500;">
                        Score: -0.39
                    </span>
                    <span>üì∞ 5 articles</span>
                </div>
            </div>
            
            <div class="entity-card " data-entity="PH10" 
                 onclick="selectEntity('PH10')"
                 style="background: #fffbf5; border-left: 4px solid #f39c12; padding: 1rem 1.2rem; border-radius: 8px; margin-bottom: 0.8rem; cursor: pointer; transition: all 0.2s;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                    <strong style="font-size: 1.1rem;">PH10</strong>
                    <span style="font-size: 0.85rem; padding: 0.2rem 0.6rem; background: #f39c1220; color: #f39c12; border-radius: 12px; font-weight: 500;">MEDIUM Priority</span>
                </div>
                <div style="color: #555; font-size: 0.95rem; margin-bottom: 0.5rem;">üëÅÔ∏è MONITOR CLOSELY</div>
                <div style="font-size: 0.85rem; color: #666;">
                    <span style="margin-right: 1rem;">üìç Philippines</span>
                    <span style="margin-right: 1rem; color: #e74c3c; font-weight: 500;">
                        Score: -0.21
                    </span>
                    <span>üì∞ 5 articles</span>
                </div>
            </div>
            
            <div class="entity-card " data-entity="TW10" 
                 onclick="selectEntity('TW10')"
                 style="background: #fffbf5; border-left: 4px solid #f39c12; padding: 1rem 1.2rem; border-radius: 8px; margin-bottom: 0.8rem; cursor: pointer; transition: all 0.2s;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                    <strong style="font-size: 1.1rem;">TW10</strong>
                    <span style="font-size: 0.85rem; padding: 0.2rem 0.6rem; background: #f39c1220; color: #f39c12; border-radius: 12px; font-weight: 500;">MEDIUM Priority</span>
                </div>
                <div style="color: #555; font-size: 0.95rem; margin-bottom: 0.5rem;">üëÅÔ∏è NEUTRAL - MONITOR</div>
                <div style="font-size: 0.85rem; color: #666;">
                    <span style="margin-right: 1rem;">üìç Taiwan</span>
                    <span style="margin-right: 1rem; color: #7f8c8d; font-weight: 500;">
                        Score: 0.00
                    </span>
                    <span>üì∞ 5 articles</span>
                </div>
            </div>
            
            <div class="entity-card " data-entity="VN20" 
                 onclick="selectEntity('VN20')"
                 style="background: #fffbf5; border-left: 4px solid #f39c12; padding: 1rem 1.2rem; border-radius: 8px; margin-bottom: 0.8rem; cursor: pointer; transition: all 0.2s;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                    <strong style="font-size: 1.1rem;">VN20</strong>
                    <span style="font-size: 0.85rem; padding: 0.2rem 0.6rem; background: #f39c1220; color: #f39c12; border-radius: 12px; font-weight: 500;">MEDIUM Priority</span>
                </div>
                <div style="color: #555; font-size: 0.95rem; margin-bottom: 0.5rem;">üëÅÔ∏è NEUTRAL - MONITOR</div>
                <div style="font-size: 0.85rem; color: #666;">
                    <span style="margin-right: 1rem;">üìç Vietnam</span>
                    <span style="margin-right: 1rem; color: #27ae60; font-weight: 500;">
                        Score: 0.13
                    </span>
                    <span>üì∞ 5 articles</span>
                </div>
            </div>
            
            <div class="entity-card " data-entity="KR10" 
                 onclick="selectEntity('KR10')"
                 style="background: #fffbf5; border-left: 4px solid #f39c12; padding: 1rem 1.2rem; border-radius: 8px; margin-bottom: 0.8rem; cursor: pointer; transition: all 0.2s;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                    <strong style="font-size: 1.1rem;">KR10</strong>
                    <span style="font-size: 0.85rem; padding: 0.2rem 0.6rem; background: #f39c1220; color: #f39c12; border-radius: 12px; font-weight: 500;">MEDIUM Priority</span>
                </div>
                <div style="color: #555; font-size: 0.95rem; margin-bottom: 0.5rem;">üëÅÔ∏è NEUTRAL - MONITOR</div>
                <div style="font-size: 0.85rem; color: #666;">
                    <span style="margin-right: 1rem;">üìç South Korea</span>
                    <span style="margin-right: 1rem; color: #27ae60; font-weight: 500;">
                        Score: 0.19
                    </span>
                    <span>üì∞ 5 articles</span>
                </div>
            </div>
            
            <div class="entity-card " data-entity="ID10" 
                 onclick="selectEntity('ID10')"
                 style="background: #fffbf5; border-left: 4px solid #f39c12; padding: 1rem 1.2rem; border-radius: 8px; margin-bottom: 0.8rem; cursor: pointer; transition: all 0.2s;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                    <strong style="font-size: 1.1rem;">ID10</strong>
                    <span style="font-size: 0.85rem; padding: 0.2rem 0.6rem; background: #f39c1220; color: #f39c12; border-radius: 12px; font-weight: 500;">MEDIUM Priority</span>
                </div>
                <div style="color: #555; font-size: 0.95rem; margin-bottom: 0.5rem;">üëÅÔ∏è NEUTRAL - MONITOR</div>
                <div style="font-size: 0.85rem; color: #666;">
                    <span style="margin-right: 1rem;">üìç Indonesia</span>
                    <span style="margin-right: 1rem; color: #27ae60; font-weight: 500;">
                        Score: 0.29
                    </span>
                    <span>üì∞ 5 articles</span>
                </div>
            </div>
            
            <div class="entity-card " data-entity="SS10" 
                 onclick="selectEntity('SS10')"
                 style="background: #f5fdf8; border-left: 4px solid #27ae60; padding: 1rem 1.2rem; border-radius: 8px; margin-bottom: 0.8rem; cursor: pointer; transition: all 0.2s;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                    <strong style="font-size: 1.1rem;">SS10</strong>
                    <span style="font-size: 0.85rem; padding: 0.2rem 0.6rem; background: #27ae6020; color: #27ae60; border-radius: 12px; font-weight: 500;">LOW Priority</span>
                </div>
                <div style="color: #555; font-size: 0.95rem; margin-bottom: 0.5rem;">‚úÖ POSITIVE OUTLOOK</div>
                <div style="font-size: 0.85rem; color: #666;">
                    <span style="margin-right: 1rem;">üìç Singapore</span>
                    <span style="margin-right: 1rem; color: #27ae60; font-weight: 500;">
                        Score: 0.47
                    </span>
                    <span>üì∞ 5 articles</span>
                </div>
            </div>
            
            <div class="entity-card " data-entity="MY10" 
                 onclick="selectEntity('MY10')"
                 style="background: #f5fdf8; border-left: 4px solid #27ae60; padding: 1rem 1.2rem; border-radius: 8px; margin-bottom: 0.8rem; cursor: pointer; transition: all 0.2s;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                    <strong style="font-size: 1.1rem;">MY10</strong>
                    <span style="font-size: 0.85rem; padding: 0.2rem 0.6rem; background: #27ae6020; color: #27ae60; border-radius: 12px; font-weight: 500;">LOW Priority</span>
                </div>
                <div style="color: #555; font-size: 0.95rem; margin-bottom: 0.5rem;">‚úÖ POSITIVE OUTLOOK</div>
                <div style="font-size: 0.85rem; color: #666;">
                    <span style="margin-right: 1rem;">üìç Malaysia</span>
                    <span style="margin-right: 1rem; color: #27ae60; font-weight: 500;">
                        Score: 0.69
                    </span>
                    <span>üì∞ 5 articles</span>
                </div>
            </div>
            
                    </div>
                </div>
            </div>
            
            <!-- Disclaimer -->
            <div style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px; font-size: 0.8rem; color: #666;">
                <strong>‚ö†Ô∏è Disclaimer:</strong> These recommendations are based on historical cash flow patterns and ML forecast analysis. 
                They should be used as supplementary insights alongside professional judgment. Market conditions can change rapidly.
            </div>
            
            <script>
                const entityData = {"TH10": {"country": "Thailand", "sentiment_score": -0.388, "sentiment_label": "NEGATIVE", "articles": [{"title": "Thailand and Laos discuss economic cooperation plan to boost trade to $11 billion by 2027", "url": "https://www.nationthailand.com/business/economy/40059973", "publish_date": "2025-12-18 10:19:00+07:00", "final_score": 0.76, "source": "google_news_rss"}, {"title": "Thai Economy Faces Severe Slump in 2026 as China Overcapacity and Floods Bite", "url": "https://www.nationthailand.com/business/economy/40059181", "publish_date": "2025-12-03 14:28:00+07:00", "final_score": -0.941, "source": "google_news_rss"}, {"title": "Thai central bank cuts rates, open to more cuts after trimming 2026 GDP outlook - Reuters", "url": "https://www.reuters.com/world/asia-pacific/thai-central-bank-cuts-policy-rate-by-25-bps-expected-2025-12-17/", "publish_date": null, "final_score": -0.792, "source": "google_news_rss"}, {"title": "THD: Tourism Headwinds And Stagnant, Aging Population Will Weigh Down Thailand's Economy - Seeking Alpha", "url": "https://seekingalpha.com/article/4854410-thd-tourism-headwinds-and-stagnant-aging-population-will-weigh-down-thailands-economy", "publish_date": null, "final_score": -0.966, "source": "google_news_rss"}, {"title": "Bank of Thailand Resumes Rate Cuts as Economy Wilts - The Wall Street Journal", "url": "https://www.wsj.com/articles/bank-of-thailand-lowers-rates-to-boost-growth-7e8ef987?gaa_at=eafs&gaa_n=AWEtsqc912QOdxkd8E9zNDFsz3kx6Xr0BmsrGQ6kjxhc1f2t9bgtib3O-fPX&gaa_ts=6946acd9&gaa_sig=1UMu8c1KPknsGdGYuBJUTulQz7SrtULhrhaqrn-OtcCpbUTN90FBsyMOLu6M-ABgxqjA8qN1EqB318YKo4g00g%3D%3D", "publish_date": null, "final_score": 0, "source": "google_news_rss"}]}, "PH10": {"country": "Philippines", "sentiment_score": -0.206, "sentiment_label": "NEGATIVE", "articles": [{"title": "World Bank Group", "url": "https://www.worldbank.org/ext/en/country/philippines", "publish_date": null, "final_score": 0, "source": "google_news_rss"}, {"title": "Five Key Takeaways from AMRO\u2019s 2025 Annual Consultation Report on the Philippines", "url": "https://amro-asia.org/five-key-takeaways-from-amros-2025-annual-consultation-report-on-the-philippines", "publish_date": "2025-11-24 02:00:49+00:00", "final_score": -0.879, "source": "google_news_rss"}, {"title": "Opportunity opens up in one of Southeast Asia\u2019s most dynamic economies \u2014 the Philippines", "url": "https://www.macquarie.com/us/en/insights/opportunity-opens-up-in-one-of-southeast-asias-most-dynamic-economies-the-philippines.html", "publish_date": "2025-07-10 00:00:00", "final_score": 0.812, "source": "google_news_rss"}, {"title": "Philippine growth slows sharply in Q3 as 'shocking' corruption scandal dents confidence - Reuters", "url": "https://www.reuters.com/world/asia-pacific/philippines-q3-gdp-grows-40-yy-slowest-rate-more-than-four-years-2025-11-07/", "publish_date": null, "final_score": -0.961, "source": "google_news_rss"}, {"title": "Inside the $2 Billion Scandal That Paralyzed the Philippines - Bloomberg.com", "url": "https://www.bloomberg.com/news/features/2025-12-16/philippines-corruption-scandal-risks-lives-drains-billions-and-deters-investors", "publish_date": null, "final_score": 0, "source": "google_news_rss"}]}, "TW10": {"country": "Taiwan", "sentiment_score": 0.0, "sentiment_label": "NEUTRAL", "articles": [{"title": "The global AI race is supercharging Taiwan\u2019s economy. But many don\u2019t feel better off", "url": "https://edition.cnn.com/2025/11/28/economy/taiwan-ai-economy-intl-hnk", "publish_date": "2025-11-28 00:00:00", "final_score": -0.881, "source": "google_news_rss"}, {"title": "Taiwan\u2019s economy roars ahead on back of AI demand", "url": "https://www.ft.com/content/f6b8fac5-1a70-4815-854b-a2670cb9ac00", "publish_date": "2025-11-28 11:17:48.487000+00:00", "final_score": 0, "source": "google_news_rss"}, {"title": "Taiwan economic success down to \u2018inclusive institutions\u2019: Nobel winner", "url": "https://www.taipeitimes.com/News/biz/archives/2025/12/17/2003849003", "publish_date": "2025-12-17 00:00:00", "final_score": 0, "source": "google_news_rss"}, {"title": "Yahoo is part of the Yahoo family of brands.", "url": "https://consent.yahoo.com/v2/collectConsent?sessionId=4_cc-session_cc243e32-5f1f-4116-82ec-d06fc7aa47d6", "publish_date": null, "final_score": 0, "source": "google_news_rss"}, {"title": "Taiwan\u2019s economy is doing well, but many of its workers are not", "url": "https://www.straitstimes.com/asia/east-asia/taiwans-economy-is-rich-but-its-workers-are-not", "publish_date": "2025-12-18 09:10:00+08:00", "final_score": 0.881, "source": "google_news_rss"}]}, "VN20": {"country": "Vietnam", "sentiment_score": 0.127, "sentiment_label": "POSITIVE", "articles": [{"title": "Vietnam consolidates position as one of Asia\u2019s economic bright spots", "url": "https://www.oananews.org/node/710474", "publish_date": null, "final_score": 0.953, "source": "google_news_rss"}, {"title": "South Korea, Taiwan and Vietnam show that economic statecraft is not just the preserve of great powers", "url": "https://theconversation.com/south-korea-taiwan-and-vietnam-show-that-economic-statecraft-is-not-just-the-preserve-of-great-powers-272139", "publish_date": "2025-12-18 11:01:08+00:00", "final_score": 0, "source": "google_news_rss"}, {"title": "Vietnam sees robust export growth in 2025 despite US tariffs", "url": "https://www.fibre2fashion.com/news/textile-news/vietnam-sees-robust-export-growth-in-2025-despite-us-tariffs-307272-newsdetails.htm", "publish_date": null, "final_score": -0.825, "source": "google_news_rss"}, {"title": "Securing capital and efficiency for Vietnam\u2019s 2026-2030 growth ambitions", "url": "https://vir.com.vn/securing-capital-and-efficiency-for-vietnams-2026-2030-growth-ambitions-143160.html", "publish_date": "2025-12-17 10:00:02+07:00", "final_score": 0.505, "source": "google_news_rss"}, {"title": "Vietnam confronts the limits of its double-digit growth ambitions - East Asia Forum", "url": "https://eastasiaforum.org/2025/12/20/vietnam-confronts-the-limits-of-its-double-digit-growth-ambitions/", "publish_date": null, "final_score": 0, "source": "google_news_rss"}]}, "KR10": {"country": "South Korea", "sentiment_score": 0.193, "sentiment_label": "POSITIVE", "articles": [{"title": "South Korean economy grows at fastest pace in almost 4 years in Q3", "url": "https://www.kedglobal.com/economy/newsView/ked202512030003", "publish_date": "2025-12-03 22:11:32+09:00", "final_score": -0.524, "source": "google_news_rss"}, {"title": "South Korea, Taiwan and Vietnam show that economic statecraft is not just the preserve of great powers", "url": "https://theconversation.com/south-korea-taiwan-and-vietnam-show-that-economic-statecraft-is-not-just-the-preserve-of-great-powers-272139", "publish_date": "2025-12-18 11:01:08+00:00", "final_score": 0, "source": "google_news_rss"}, {"title": "Republic of Korea", "url": "https://www.worldbank.org/ext/en/country/korea", "publish_date": null, "final_score": 0, "source": "google_news_rss"}, {"title": "South Korea's third-quarter GDP clocks fastest growth in over a year as exports, manufacturing rise", "url": "https://www.cnbc.com/2025/10/28/south-koreas-gdp-q3-beats-expectations-.html", "publish_date": "2025-10-28 00:00:00", "final_score": 0.743, "source": "google_news_rss"}, {"title": "South Korea trade deal: Bentleys and Scottish salmon to benefit", "url": "https://www.bbc.com/news/articles/cewjzkw875vo", "publish_date": "2025-12-15 22:31:15.472000+00:00", "final_score": 0.744, "source": "google_news_rss"}]}, "ID10": {"country": "Indonesia", "sentiment_score": 0.29, "sentiment_label": "POSITIVE", "articles": [{"title": "Indonesia\u2019s Economy Maintains Resilience Amid Global Uncertainty", "url": "https://www.worldbank.org/en/news/press-release/2025/12/16/indonesia-s-economy-maintains-resilience-amid-global-uncertainty", "publish_date": "2025-12-16 00:00:00", "final_score": 0.908, "source": "google_news_rss"}, {"title": "Between Two Reefs: Indonesia\u2019s Strategic Culture in the Twenty-First Century", "url": "https://www.csis.org/analysis/between-two-reefs-indonesias-strategic-culture-twenty-first-century", "publish_date": null, "final_score": 0, "source": "google_news_rss"}, {"title": "How China views its economic relations with Indonesia", "url": "https://www.lowyinstitute.org/the-interpreter/how-china-views-its-economic-relations-indonesia", "publish_date": null, "final_score": 0.857, "source": "google_news_rss"}, {"title": "Indonesia plans major digital infrastructure investments to boost economy", "url": "https://www.biometricupdate.com/202512/indonesia-plans-major-digital-infrastructure-investments-to-boost-economy", "publish_date": "2025-12-16 15:16:28-05:00", "final_score": 0.654, "source": "google_news_rss"}, {"title": "Indonesia\u2019s thrifty window shoppers cast doubt on economic success story", "url": "https://www.aljazeera.com/economy/2025/9/25/indonesias-thrifty-window-shoppers-cast-doubt-on-economic-success-story", "publish_date": "2025-09-25 00:00:00", "final_score": -0.967, "source": "google_news_rss"}]}, "SS10": {"country": "Singapore", "sentiment_score": 0.471, "sentiment_label": "POSITIVE", "articles": [{"title": "World Bank Group", "url": "https://www.worldbank.org/ext/en/country/singapore", "publish_date": null, "final_score": 0, "source": "google_news_rss"}, {"title": "Singapore raises annual growth forecast as third-quarter GDP tops expectations", "url": "https://www.cnbc.com/2025/11/21/singapore-q3-gdp-forecast-mti-enterprise-exports-pharmaceuticals-drugs-tariffs-trade-mas.html", "publish_date": "2025-11-21 00:00:00", "final_score": 0.924, "source": "google_news_rss"}, {"title": "Budget 2026: MOF Calls for Public Input on Strengthening Singapore's Economy, Jobs and Social Support Systems", "url": "https://www.entrepreneur.com/en-au/news-and-trends/budget-2026-mof-calls-for-public-input-on-strengthening/500363", "publish_date": "2025-12-03 07:38:44+00:00", "final_score": 0.581, "source": "google_news_rss"}, {"title": "Why connectivity, not just AI, will power Singapore\u2019s next leap in competitiveness", "url": "https://sg.finance.yahoo.com/news/why-connectivity-not-just-ai-183851827.html", "publish_date": "2025-12-14 18:38:51+00:00", "final_score": 0, "source": "google_news_rss"}, {"title": "Economists raise their Singapore growth forecasts for 2025 and 2026: MAS survey", "url": "https://www.straitstimes.com/business/economists-raise-their-singapore-growth-forecasts-for-2025-and-2026-mas-survey", "publish_date": "2025-12-17 12:00:00+08:00", "final_score": 0.852, "source": "google_news_rss"}]}, "MY10": {"country": "Malaysia", "sentiment_score": 0.687, "sentiment_label": "POSITIVE", "articles": [{"title": "Can Malaysia\u2019s Neutrality Survive the Great Mineral Divide?", "url": "https://www.chinausfocus.com/finance-economy/can-malaysias-neutrality-survive-the-great-mineral-divide", "publish_date": "2025-12-15 17:10:24+08:00", "final_score": 0, "source": "google_news_rss"}, {"title": "PM Anwar welcomes IMF nod, says focus now on jobs and rebuilding public confidence", "url": "https://www.malaymail.com/news/malaysia/2025/12/20/pm-anwar-welcomes-imf-nod-says-focus-now-on-jobs-and-rebuilding-public-confidence/202575", "publish_date": "2025-12-20 00:00:00", "final_score": 0.952, "source": "google_news_rss"}, {"title": "Malaysian Stocks Rise As Local Economy Shows Strength", "url": "https://finimize.com/content/malaysian-stocks-rise-as-local-economy-shows-strength", "publish_date": "2025-12-15 10:04:54.787990+00:00", "final_score": 0.953, "source": "google_news_rss"}, {"title": "Laos cleared to export fresh durians to China as Malaysia, Thailand face new rival", "url": "https://www.scmp.com/economy/china-economy/article/3336771/laos-cleared-export-fresh-durians-china-malaysia-thailand-face-new-rival", "publish_date": "2025-12-17 17:15:10+08:00", "final_score": 0.576, "source": "google_news_rss"}, {"title": "Malaysia predicted to be ASEAN\u2019s second-fastest-growing economy, after Vietnam", "url": "https://theinvestor.vn/malaysia-predicted-to-be-aseans-second-fastest-growing-economy-after-vietnam-d17696.html", "publish_date": "2025-11-24 21:19:00+07:00", "final_score": 0.956, "source": "google_news_rss"}]}};
                
                function selectEntity(entityId) {
                    // Update active card styling
                    document.querySelectorAll('.entity-card').forEach(card => {
                        card.classList.remove('active');
                        card.style.boxShadow = 'none';
                    });
                    const activeCard = document.querySelector(`.entity-card[data-entity="${entityId}"]`);
                    if (activeCard) {
                        activeCard.classList.add('active');
                        activeCard.style.boxShadow = '0 4px 12px rgba(0,0,0,0.15)';
                    }
                    
                    // Get entity data
                    const data = entityData[entityId];
                    if (!data) return;
                    
                    // Update header
                    document.getElementById('selected-entity-name').textContent = `${entityId} (${data.country})`;
                    
                    // Update sentiment badge
                    const badge = document.getElementById('selected-sentiment-badge');
                    const score = data.sentiment_score;
                    if (score > 0.1) {
                        badge.textContent = `POSITIVE (${score.toFixed(2)})`;
                        badge.style.background = '#27ae6020';
                        badge.style.color = '#27ae60';
                    } else if (score < -0.1) {
                        badge.textContent = `NEGATIVE (${score.toFixed(2)})`;
                        badge.style.background = '#e74c3c20';
                        badge.style.color = '#e74c3c';
                    } else {
                        badge.textContent = `NEUTRAL (${score.toFixed(2)})`;
                        badge.style.background = '#7f8c8d20';
                        badge.style.color = '#7f8c8d';
                    }
                    
                    // Generate articles HTML
                    const container = document.getElementById('articles-container');
                    if (!data.articles || data.articles.length === 0) {
                        container.innerHTML = '<p style="color: #666; text-align: center; padding: 2rem;">No articles available for this entity.</p>';
                        return;
                    }
                    
                    let articlesHtml = '';
                    data.articles.forEach((article, idx) => {
                        const articleScore = article.final_score || 0;
                        let badgeColor, badgeText;
                        if (articleScore > 0.1) {
                            badgeColor = '#27ae60';
                            badgeText = 'Positive';
                        } else if (articleScore < -0.1) {
                            badgeColor = '#e74c3c';
                            badgeText = 'Negative';
                        } else {
                            badgeColor = '#7f8c8d';
                            badgeText = 'Neutral';
                        }
                        
                        const title = article.title || 'No title';
                        const url = article.url || '#';
                        const source = article.source || 'Unknown';
                        const publishDate = article.publish_date || '';
                        
                        articlesHtml += `
                            <div style="padding: 1rem; background: #f8f9fa; border-radius: 8px; margin-bottom: 0.75rem; border-left: 4px solid ${badgeColor};">
                                <a href="${url}" target="_blank" style="text-decoration: none;">
                                    <div style="font-weight: 500; color: #333; font-size: 0.95rem; margin-bottom: 0.5rem; line-height: 1.4;">
                                        ${idx + 1}. ${title}
                                    </div>
                                </a>
                                <div style="display: flex; justify-content: space-between; align-items: center; font-size: 0.85rem; color: #666; flex-wrap: wrap; gap: 0.5rem;">
                                    <div>
                                        <span style="margin-right: 1rem;">üì∞ ${source}</span>
                                        ${publishDate ? `<span>üìÖ ${publishDate}</span>` : ''}
                                    </div>
                                    <span style="color: ${badgeColor}; font-weight: 600; background: ${badgeColor}15; padding: 0.2rem 0.6rem; border-radius: 12px;">
                                        ${badgeText} (${articleScore.toFixed(3)})
                                    </span>
                                </div>
                                <div style="margin-top: 0.5rem;">
                                    <a href="${url}" target="_blank" style="font-size: 0.8rem; color: #3498db; text-decoration: none;">
                                        üîó Read full article ‚Üí
                                    </a>
                                </div>
                            </div>
                        `;
                    });
                    
                    container.innerHTML = articlesHtml;
                }
            </script>
        </section>
        
        
        
        <div class="entity-section" id="TW10">
            <div class="entity-header">
                <h2><span class="entity-badge">TW10</span> Cash Flow Analysis</h2>
                <div class="model-badge">Best Model: <strong>Ridge</strong></div>
            </div>

            <!-- KPI Cards Row -->
            <div class="kpi-row">
                <div class="kpi-card">
                    <div class="kpi-icon">üí∞</div>
                    <div class="kpi-value" style="color: #C4D600">$29.70M</div>
                    <div class="kpi-label">Total Inflow</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üí∏</div>
                    <div class="kpi-value" style="color: #D0006F">$28.56M</div>
                    <div class="kpi-label">Total Outflow</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üìä</div>
                    <div class="kpi-value" style="color: #003865">$1.14M</div>
                    <div class="kpi-label">Net Position</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üìà</div>
                    <div class="kpi-value" style="color: #68D2DF">$1.10M</div>
                    <div class="kpi-label">1-Month Forecast</div>
                </div>
            </div>

            <!-- Main Charts Section -->
            <div class="charts-grid">
                <!-- Backtest Chart -->
                <div class="chart-container full-width">
                    <h3>üîç Backtest: Actual vs Forecast (Last 4 Weeks)</h3>
                    <p class="chart-description">Comparing model predictions against actual cash flows to evaluate forecast accuracy.</p>
                    <div id="backtest-TW10" class="chart"></div>
                    <div class="metrics-row">
                        <div class="metric">
                            <span class="metric-label">MAE</span>
                            <span class="metric-value">$69.9K</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">RMSE</span>
                            <span class="metric-value">$86.0K</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">MAPE</span>
                            <span class="metric-value">12.2%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Direction Accuracy</span>
                            <span class="metric-value">100.0%</span>
                        </div>
                    </div>
                </div>

                <!-- Inflow/Outflow Chart -->
                <div class="chart-container full-width">
                    <h3>üíπ Cash Flow Overview: Inflow vs Outflow</h3>
                    <p class="chart-description">Weekly breakdown of cash inflows and outflows across the historical period.</p>
                    <div id="inflow-outflow-TW10" class="chart"></div>
                </div>

                <!-- Short-term Forecast -->
                <div class="chart-container">
                    <h3>üìÖ 1-Month Ahead Forecast</h3>
                    <p class="chart-description">Weekly cash flow predictions for the next 4 weeks based on Ridge model.</p>
                    <div id="short-forecast-TW10" class="chart"></div>
                    <div class="insight-box" style="border-left-color: #C4D600">
                        <div class="insight-header">
                            <span class="status-badge" style="background: #C4D600">‚úÖ Stable</span>
                            <strong>Short-term Liquidity Assessment</strong>
                        </div>
                        <p>Healthy cash position expected. Net inflow forecast: $1.10M</p>
                    </div>
                </div>

                <!-- Long-term Forecast -->
                <div class="chart-container">
                    <h3>üìÜ 6-Month Ahead Forecast (Iterative Month-by-Month)</h3>
                    <p class="chart-description">Each month's forecast uses previous months' predictions as input features, building iteratively.</p>
                    <div id="long-forecast-TW10" class="chart"></div>
                    <div class="insight-box" style="border-left-color: #F0AB00">
                        <div class="insight-header">
                            <span class="status-badge" style="background: #F0AB00">Monitor</span>
                            <strong>Long-term Sustainability</strong>
                        </div>
                        <p>6-month forecasted total: $292.4K. Consider strategic adjustments.</p>
                    </div>
                </div>
            </div>

            <!-- Month-by-Month Forecast Breakdown -->
            <div class="monthly-breakdown">
                <h3>üìä Month-by-Month Forecast Breakdown</h3>
                <p class="chart-description">Iterative forecasting: each month's prediction feeds into the next month's features, creating a cascading forecast.</p>
                <div class="monthly-grid">
                    
                    <div class="monthly-card" style="border-top: 4px solid #68D2DF">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #68D2DF">Month 1</span>
                            <span class="month-dates">2025-11-05 ‚Üí 2025-11-26</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$1.21M</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$1.21M</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #22c55e">$232.0K</span><span class="week-val" style="color: #ef4444">$-38.2K</span><span class="week-val" style="color: #22c55e">$307.4K</span><span class="week-val" style="color: #22c55e">$710.6K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #C4D600">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #C4D600">Month 2</span>
                            <span class="month-dates">2025-12-03 ‚Üí 2025-12-24</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$928.1K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$2.14M</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #ef4444">$-70.9K</span><span class="week-val" style="color: #ef4444">$-73.9K</span><span class="week-val" style="color: #22c55e">$709.9K</span><span class="week-val" style="color: #22c55e">$362.9K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #F0AB00">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #F0AB00">Month 3</span>
                            <span class="month-dates">2025-12-31 ‚Üí 2026-01-21</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$-614.6K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$1.53M</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #ef4444">$-175.5K</span><span class="week-val" style="color: #22c55e">$178.1K</span><span class="week-val" style="color: #ef4444">$-304.1K</span><span class="week-val" style="color: #ef4444">$-313.1K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #D0006F">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #D0006F">Month 4</span>
                            <span class="month-dates">2026-01-28 ‚Üí 2026-02-18</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$-2.09M</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$-569.2K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #22c55e">$48.9K</span><span class="week-val" style="color: #ef4444">$-525.1K</span><span class="week-val" style="color: #ef4444">$-424.6K</span><span class="week-val" style="color: #ef4444">$-1.19M</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #3C1053">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #3C1053">Month 5</span>
                            <span class="month-dates">2026-02-25 ‚Üí 2026-03-18</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$431.0K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$-138.2K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #22c55e">$1.33M</span><span class="week-val" style="color: #ef4444">$-14.4K</span><span class="week-val" style="color: #ef4444">$-316.9K</span><span class="week-val" style="color: #ef4444">$-567.5K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #830051">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #830051">Month 6</span>
                            <span class="month-dates">2026-03-25 ‚Üí 2026-04-15</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$430.7K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$292.4K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #ef4444">$-840.2K</span><span class="week-val" style="color: #22c55e">$1.90M</span><span class="week-val" style="color: #ef4444">$-184.3K</span><span class="week-val" style="color: #ef4444">$-447.5K</span>
                        </div>
                    </div>
                    
                </div>
                <div id="monthly-chart-TW10" class="chart" style="margin-top: 1.5rem;"></div>
            </div>

            <!-- Category Analysis -->
            <div class="category-analysis">
                <h3>üè∑Ô∏è Key Cash Flow Drivers</h3>
                <div class="category-grid">
                    <div class="category-box inflow">
                        <h4>Top Inflow Categories</h4>
                        <ul>
                            <li><span class="cat-name">AR</span><span class="cat-value">$28.67M</span></li><li><span class="cat-name">Loan receipt</span><span class="cat-value">$975.4K</span></li><li><span class="cat-name">Other receipt</span><span class="cat-value">$47.0K</span></li>
                        </ul>
                    </div>
                    <div class="category-box outflow">
                        <h4>Top Outflow Categories</h4>
                        <ul>
                            <li><span class="cat-name">Bank charges</span><span class="cat-value">-$467</span></li><li><span class="cat-name">Interest charges</span><span class="cat-value">-$14.3K</span></li><li><span class="cat-name">Payroll</span><span class="cat-value">-$1.81M</span></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Model Performance Table -->
            <div class="model-comparison">
                <h3>ü§ñ Model Performance Comparison</h3>
                <table class="model-table">
                    <thead>
                        <tr>
                            <th>Model</th>
                            <th>MAE</th>
                            <th>RMSE</th>
                            <th>MAPE (%)</th>
                            <th>Direction Acc (%)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="">
                            <td>XGBoost </td>
                            <td>$650.7K</td>
                            <td>$665.2K</td>
                            <td>103.9</td>
                            <td>66.7</td>
                        </tr><tr class="">
                            <td>LightGBM </td>
                            <td>$1.35M</td>
                            <td>$1.83M</td>
                            <td>66.3</td>
                            <td>33.3</td>
                        </tr><tr class="">
                            <td>RandomForest </td>
                            <td>$640.3K</td>
                            <td>$718.4K</td>
                            <td>79.7</td>
                            <td>66.7</td>
                        </tr><tr class="">
                            <td>GradientBoosting </td>
                            <td>$588.7K</td>
                            <td>$615.5K</td>
                            <td>81.8</td>
                            <td>100.0</td>
                        </tr><tr class="best-model">
                            <td>Ridge ‚≠ê</td>
                            <td>$69.9K</td>
                            <td>$86.0K</td>
                            <td>12.2</td>
                            <td>100.0</td>
                        </tr><tr class="">
                            <td>Ensemble </td>
                            <td>$251.0K</td>
                            <td>$274.1K</td>
                            <td>32.7</td>
                            <td>100.0</td>
                        </tr>
                    </tbody>
                </table>
                <div style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px; font-size: 0.85rem; color: #555;">
                    <strong>üìä Metric Definitions:</strong>
                    <ul style="margin: 0.5rem 0 0 1.5rem; line-height: 1.6;">
                        <li><strong>MAE</strong> (Mean Absolute Error): Average dollar difference between predicted and actual values ‚Äî lower is better.</li>
                        <li><strong>RMSE</strong> (Root Mean Square Error): Similar to MAE but penalizes large errors more heavily ‚Äî lower is better.</li>
                        <li><strong>MAPE</strong> (Mean Absolute Percentage Error): Average percentage error relative to actual values ‚Äî lower is better.</li>
                        <li><strong>Direction Acc</strong> (Direction Accuracy): Percentage of times the model correctly predicted if cash flow would go up or down ‚Äî higher is better.</li>
                    </ul>
                </div>
            </div>
        </div>

        <script>
        // Backtest Chart
        Plotly.newPlot('backtest-TW10', [
            {
                x: ["2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-203958.99148000003, -614642.0331799999, -2150738.1343, 2864292.22503],
                type: 'scatter',
                mode: 'lines+markers',
                name: '‚úì Actual Values',
                line: {color: '#003865', width: 4},
                marker: {size: 14, symbol: 'circle'},
                hovertemplate: '<b>Actual</b><br>Date: %{x}<br>Value: $%{y:,.0f}<extra></extra>'
            },
            {
                x: ["2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-284755.12503765704, -601120.2100423784, -2111419.689769977, 2718319.0524790795],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üîÆ Model Prediction',
                line: {color: '#F0AB00', width: 4, dash: 'dash'},
                marker: {size: 12, symbol: 'diamond'},
                hovertemplate: '<b>Prediction</b><br>Date: %{x}<br>Predicted: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 350,
            margin: {t: 50, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -30,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Net Cash Flow (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 11}
            },
            hovermode: 'x unified',
            shapes: [{type: 'line', x0: '2025-10-08', x1: '2025-10-29', y0: 0, y1: 0, line: {color: '#888', width: 1, dash: 'dot'}}],
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Inflow/Outflow Chart
        Plotly.newPlot('inflow-outflow-TW10', [
            {
                x: ["2025-01-01", "2025-01-08", "2025-01-15", "2025-01-22", "2025-01-29", "2025-02-05", "2025-02-12", "2025-02-19", "2025-02-26", "2025-03-05", "2025-03-12", "2025-03-19", "2025-03-26", "2025-04-02", "2025-04-09", "2025-04-16", "2025-04-23", "2025-04-30", "2025-05-07", "2025-05-14", "2025-05-21", "2025-05-28", "2025-06-04", "2025-06-11", "2025-06-18", "2025-06-25", "2025-07-02", "2025-07-09", "2025-07-16", "2025-07-23", "2025-07-30", "2025-08-06", "2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [166644.08336, 27.34836, 1102.4413499999998, 0.0, 2334787.87957, 13.69032, 2335.08, 1235.5844, 2666161.9679, 189.53815, 858.10096, 694.46256, 225187.71999999997, 3296156.5662599998, 1161.14708, 5.14738, 514.09906, 2581727.55847, 312.5137, 605.92714, 6862.13867, 2513844.4273000006, 178455.47777, 243.10150000000002, 475.73, 2835648.71, 187773.57632, 16.656, 3674.48138, 1213.0322800000001, 3077678.8701099996, 20.91896, 420.82640000000004, 2230.0141200000003, 3021602.34708, 176761.07105, 975436.3655000001, 0.0, 2365591.8772199997, 189805.46666, 1845.18374, 91.1, 2506.7245599999997, 2873769.09],
                type: 'bar',
                name: '‚Üë Inflow',
                marker: {color: '#C4D600', line: {color: 'rgba(0,0,0,0.2)', width: 1}},
                hovertemplate: '<b>Inflow</b><br>Date: %{x}<br>Amount: $%{y:,.0f}<extra></extra>'
            },
            {
                x: ["2025-01-01", "2025-01-08", "2025-01-15", "2025-01-22", "2025-01-29", "2025-02-05", "2025-02-12", "2025-02-19", "2025-02-26", "2025-03-05", "2025-03-12", "2025-03-19", "2025-03-26", "2025-04-02", "2025-04-09", "2025-04-16", "2025-04-23", "2025-04-30", "2025-05-07", "2025-05-14", "2025-05-21", "2025-05-28", "2025-06-04", "2025-06-11", "2025-06-18", "2025-06-25", "2025-07-02", "2025-07-09", "2025-07-16", "2025-07-23", "2025-07-30", "2025-08-06", "2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-83639.05167, -362386.95074999996, -360737.2353, -0.0, -2614280.92698, -183789.34934000002, -74821.14306999999, -1772556.3366999999, -54448.101590000006, -128558.94627999997, -201421.39815, -438908.3866999999, -2165568.28286, -19299.7011, -340207.85092999996, -242175.93814000004, -1844293.1115299999, -67138.29164, -201058.05842000002, -422821.6809599999, -1117512.4400000002, -1158401.43648, -157098.48804999999, -413109.71314, -92656.37594, -991330.7077899999, -881288.8911199999, -221563.54911999998, -349779.84284999996, -2096536.14058, -99464.87687, -342165.17441000004, -113773.50045999998, -335550.6645400001, -105993.86976, -198176.30142000003, -158489.91214000003, -3509570.2616700004, -1523681.3734900001, -130900.05998, -205804.17522, -614733.13318, -2153244.85886, -9476.864969999999],
                type: 'bar',
                name: '‚Üì Outflow',
                marker: {color: '#D0006F', line: {color: 'rgba(0,0,0,0.2)', width: 1}},
                hovertemplate: '<b>Outflow</b><br>Date: %{x}<br>Amount: $%{y:,.0f}<extra></extra>'
            },
            {
                x: ["2025-01-01", "2025-01-08", "2025-01-15", "2025-01-22", "2025-01-29", "2025-02-05", "2025-02-12", "2025-02-19", "2025-02-26", "2025-03-05", "2025-03-12", "2025-03-19", "2025-03-26", "2025-04-02", "2025-04-09", "2025-04-16", "2025-04-23", "2025-04-30", "2025-05-07", "2025-05-14", "2025-05-21", "2025-05-28", "2025-06-04", "2025-06-11", "2025-06-18", "2025-06-25", "2025-07-02", "2025-07-09", "2025-07-16", "2025-07-23", "2025-07-30", "2025-08-06", "2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [83005.03168999997, -362359.60239, -359634.79394999996, 0.0, -279493.04741000035, -183775.65902000002, -72486.06307, -1771320.7522999998, 2611713.86631, -128369.40813, -200563.29719, -438213.92413999996, -1940380.5628599997, 3276856.86516, -339046.70385, -242170.79076000006, -1843779.01247, 2514589.26683, -200745.54472, -422215.75381999987, -1110650.3013300002, 1355442.9908200004, 21356.989719999983, -412866.61164, -92180.64594, 1844318.0022099996, -693515.3147999999, -221546.89312000002, -346105.36147, -2095323.1082999997, 2978213.9932399997, -342144.25545000006, -113352.67405999999, -333320.65042, 2915608.47732, -21415.230369999997, 816946.4533600002, -3509570.2616700004, 841910.5037299998, 58905.406679999985, -203958.99148000003, -614642.0331799999, -2150738.1343, 2864292.22503],
                type: 'scatter',
                mode: 'lines+markers',
                name: '‚Äî Net Cash Flow',
                line: {color: '#003865', width: 3},
                marker: {size: 6},
                hovertemplate: '<b>Net</b><br>Date: %{x}<br>Amount: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 400,
            barmode: 'relative',
            margin: {t: 50, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -45,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Amount (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 11}
            },
            hovermode: 'x unified',
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Short-term Forecast Chart
        var lastHistDate = '2025-10-29';
        var lastHistVal = 2864292.22503;
        Plotly.newPlot('short-forecast-TW10', [
            {
                x: ["2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [816946.4533600002, -3509570.2616700004, 841910.5037299998, 58905.406679999985, -203958.99148000003, -614642.0331799999, -2150738.1343, 2864292.22503],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üìä Historical (Last 8 Weeks)',
                line: {color: '#003865', width: 3},
                marker: {size: 10},
                hovertemplate: '<b>Historical</b><br>Date: %{x}<br>Net: $%{y:,.0f}<extra></extra>'
            },
            {
                x: [lastHistDate].concat(["2025-11-05", "2025-11-12", "2025-11-19", "2025-11-26"]),
                y: [lastHistVal].concat([146134.07361877762, -13004.775253230608, 50108.409404406164, 919043.4642417397]),
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üîÆ 1-Month Forecast',
                line: {color: '#68D2DF', width: 4},
                marker: {size: 12, symbol: 'diamond'},
                fill: 'tozeroy',
                fillcolor: 'rgba(104, 210, 223, 0.2)',
                hovertemplate: '<b>Forecast</b><br>Date: %{x}<br>Predicted: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 320,
            margin: {t: 50, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -30,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Net Cash Flow (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 10}
            },
            hovermode: 'x unified',
            shapes: [{type: 'line', x0: lastHistDate, x1: lastHistDate, y0: 0, y1: 0, yref: 'paper', line: {color: '#888', width: 2, dash: 'dash'}}],
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Long-term Forecast Chart (Month-by-Month with different colors)
        var longForecastTraces = [
            {
                x: ["2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-113352.67405999999, -333320.65042, 2915608.47732, -21415.230369999997, 816946.4533600002, -3509570.2616700004, 841910.5037299998, 58905.406679999985, -203958.99148000003, -614642.0331799999, -2150738.1343, 2864292.22503],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üìä Historical',
                line: {color: '#003865', width: 3},
                marker: {size: 8},
                hovertemplate: '<b>Historical</b><br>Date: %{x}<br>Net: $%{y:,.0f}<extra></extra>'
            }
        ];
        
        // Add each month as a separate trace with different colors
        var monthColors = ['#68D2DF', '#C4D600', '#F0AB00', '#D0006F', '#3C1053', '#830051'];
        var monthNames = ['Nov', 'Dec', 'Jan', 'Feb', 'Mar', 'Apr'];
        var monthlyData = [{"month_num": 1, "dates": ["2025-11-05", "2025-11-12", "2025-11-19", "2025-11-26"], "predictions": [232030.22786662387, -38210.36277495889, 307440.3694870705, 710558.3926015798], "total": 1211818.627180315, "cumulative": 1211818.627180315, "color": "#68D2DF"}, {"month_num": 2, "dates": ["2025-12-03", "2025-12-10", "2025-12-17", "2025-12-24"], "predictions": [-70872.29117908888, -73893.15713778173, 709940.4613216834, 362907.39237673266], "total": 928082.4053815454, "cumulative": 2139901.0325618605, "color": "#C4D600"}, {"month_num": 3, "dates": ["2025-12-31", "2026-01-07", "2026-01-14", "2026-01-21"], "predictions": [-175474.16840175056, 178117.096382007, -304101.9995201122, -313103.9227263344], "total": -614562.9942661901, "cumulative": 1525338.0382956704, "color": "#F0AB00"}, {"month_num": 4, "dates": ["2026-01-28", "2026-02-04", "2026-02-11", "2026-02-18"], "predictions": [48941.320157012764, -525102.3044470265, -424629.2444437422, -1193742.8594479568], "total": -2094533.0881817127, "cumulative": -569195.0498860423, "color": "#D0006F"}, {"month_num": 5, "dates": ["2026-02-25", "2026-03-04", "2026-03-11", "2026-03-18"], "predictions": [1329854.9180978977, -14440.212471054605, -316939.77684104047, -567492.4999090326], "total": 430982.42887676996, "cumulative": -138212.6210092723, "color": "#3C1053"}, {"month_num": 6, "dates": ["2026-03-25", "2026-04-01", "2026-04-08", "2026-04-15"], "predictions": [-840241.1733030305, 1902676.162363018, -184281.16983259688, -447499.93019066134], "total": 430653.8890367291, "cumulative": 292441.2680274568, "color": "#830051"}];
        var prevEndDate = lastHistDate;
        var prevEndVal = lastHistVal;
        
        monthlyData.forEach(function(month, idx) {
            var xVals = [prevEndDate].concat(month.dates);
            var yVals = [prevEndVal].concat(month.predictions);
            var monthTotal = month.total;
            var sign = monthTotal >= 0 ? '+' : '';
            longForecastTraces.push({
                x: xVals,
                y: yVals,
                type: 'scatter',
                mode: 'lines+markers',
                name: 'M' + month.month_num + ' (' + sign + (monthTotal/1000).toFixed(0) + 'K)',
                line: {color: monthColors[idx], width: 3},
                marker: {size: 8, symbol: 'circle'},
                fill: 'tozeroy',
                fillcolor: monthColors[idx] + '15',
                hovertemplate: '<b>Month ' + month.month_num + '</b><br>Date: %{x}<br>Net: $%{y:,.0f}<extra></extra>'
            });
            prevEndDate = month.dates[month.dates.length - 1];
            prevEndVal = month.predictions[month.predictions.length - 1];
        });
        
        Plotly.newPlot('long-forecast-TW10', longForecastTraces, {
            height: 380,
            margin: {t: 60, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -30,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Net Cash Flow (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.15,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ccc',
                borderwidth: 1,
                font: {size: 10},
                itemwidth: 40
            },
            hovermode: 'x unified',
            shapes: [{
                type: 'line',
                x0: lastHistDate,
                x1: lastHistDate,
                y0: 0,
                y1: 1,
                yref: 'paper',
                line: {color: '#888', width: 2, dash: 'dash'}
            }],
            annotations: [{
                x: lastHistDate,
                y: 1.02,
                yref: 'paper',
                text: 'Forecast ‚Üí',
                showarrow: false,
                font: {size: 10, color: '#666'}
            }],
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Monthly Summary Bar Chart
        var monthlyTotals = monthlyData.map(m => m.total);
        var monthlyLabels = monthlyData.map(m => 'Month ' + m.month_num);
        var monthlyBarColors = monthlyTotals.map((v, i) => v >= 0 ? monthColors[i] : '#D0006F');
        
        // Calculate y-axis range to accommodate text labels
        var maxVal = Math.max(...monthlyTotals);
        var minVal = Math.min(...monthlyTotals);
        var yPadding = Math.max(Math.abs(maxVal), Math.abs(minVal)) * 0.25;
        var yMin = minVal < 0 ? minVal - yPadding : Math.min(0, minVal);
        var yMax = maxVal > 0 ? maxVal + yPadding : Math.max(0, maxVal);
        
        Plotly.newPlot('monthly-chart-TW10', [
            {
                x: monthlyLabels,
                y: monthlyTotals,
                type: 'bar',
                name: 'Monthly Net',
                marker: {
                    color: monthlyBarColors,
                    line: {color: 'rgba(0,0,0,0.3)', width: 1}
                },
                text: monthlyTotals.map(v => v >= 0 ? '+' + (v/1000).toFixed(0) + 'K' : (v/1000).toFixed(0) + 'K'),
                textposition: 'outside',
                textfont: {size: 11, color: '#333', family: 'Inter, sans-serif', weight: 600},
                cliponaxis: false,
                constraintext: 'none',
                hovertemplate: '<b>%{x}</b><br>Net: $%{y:,.0f}<extra></extra>'
            },
            {
                x: monthlyLabels,
                y: monthlyData.map(m => m.cumulative),
                type: 'scatter',
                mode: 'lines+markers',
                name: 'Cumulative Total',
                yaxis: 'y2',
                line: {color: '#003865', width: 3},
                marker: {size: 10, symbol: 'circle'},
                hovertemplate: '<b>%{x}</b><br>Cumulative: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 380,
            margin: {t: 80, b: 60, l: 80, r: 80},
            xaxis: {
                title: {text: 'Forecast Period', font: {size: 12, color: '#666'}},
                tickfont: {size: 11}
            },
            yaxis: {
                title: {text: 'Monthly Net (USD)', font: {size: 12, color: '#830051'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2,
                range: [yMin, yMax]
            },
            yaxis2: {
                title: {text: 'Cumulative (USD)', font: {size: 12, color: '#003865'}},
                overlaying: 'y',
                side: 'right',
                tickformat: ',.0f',
                tickfont: {size: 10}
            },
            showlegend: true,
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 11}
            },
            hovermode: 'x unified',
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});
        </script>
        
        <div class="entity-section" id="PH10">
            <div class="entity-header">
                <h2><span class="entity-badge">PH10</span> Cash Flow Analysis</h2>
                <div class="model-badge">Best Model: <strong>Ridge</strong></div>
            </div>

            <!-- KPI Cards Row -->
            <div class="kpi-row">
                <div class="kpi-card">
                    <div class="kpi-icon">üí∞</div>
                    <div class="kpi-value" style="color: #C4D600">$6.25M</div>
                    <div class="kpi-label">Total Inflow</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üí∏</div>
                    <div class="kpi-value" style="color: #D0006F">$6.87M</div>
                    <div class="kpi-label">Total Outflow</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üìä</div>
                    <div class="kpi-value" style="color: #003865">$-617.6K</div>
                    <div class="kpi-label">Net Position</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üìà</div>
                    <div class="kpi-value" style="color: #68D2DF">$526.1K</div>
                    <div class="kpi-label">1-Month Forecast</div>
                </div>
            </div>

            <!-- Main Charts Section -->
            <div class="charts-grid">
                <!-- Backtest Chart -->
                <div class="chart-container full-width">
                    <h3>üîç Backtest: Actual vs Forecast (Last 4 Weeks)</h3>
                    <p class="chart-description">Comparing model predictions against actual cash flows to evaluate forecast accuracy.</p>
                    <div id="backtest-PH10" class="chart"></div>
                    <div class="metrics-row">
                        <div class="metric">
                            <span class="metric-label">MAE</span>
                            <span class="metric-value">$95.2K</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">RMSE</span>
                            <span class="metric-value">$113.9K</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">MAPE</span>
                            <span class="metric-value">130.3%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Direction Accuracy</span>
                            <span class="metric-value">100.0%</span>
                        </div>
                    </div>
                </div>

                <!-- Inflow/Outflow Chart -->
                <div class="chart-container full-width">
                    <h3>üíπ Cash Flow Overview: Inflow vs Outflow</h3>
                    <p class="chart-description">Weekly breakdown of cash inflows and outflows across the historical period.</p>
                    <div id="inflow-outflow-PH10" class="chart"></div>
                </div>

                <!-- Short-term Forecast -->
                <div class="chart-container">
                    <h3>üìÖ 1-Month Ahead Forecast</h3>
                    <p class="chart-description">Weekly cash flow predictions for the next 4 weeks based on Ridge model.</p>
                    <div id="short-forecast-PH10" class="chart"></div>
                    <div class="insight-box" style="border-left-color: #C4D600">
                        <div class="insight-header">
                            <span class="status-badge" style="background: #C4D600">‚úÖ Stable</span>
                            <strong>Short-term Liquidity Assessment</strong>
                        </div>
                        <p>Healthy cash position expected. Net inflow forecast: $526.1K</p>
                    </div>
                </div>

                <!-- Long-term Forecast -->
                <div class="chart-container">
                    <h3>üìÜ 6-Month Ahead Forecast (Iterative Month-by-Month)</h3>
                    <p class="chart-description">Each month's forecast uses previous months' predictions as input features, building iteratively.</p>
                    <div id="long-forecast-PH10" class="chart"></div>
                    <div class="insight-box" style="border-left-color: #C4D600">
                        <div class="insight-header">
                            <span class="status-badge" style="background: #C4D600">Sustainable</span>
                            <strong>Long-term Sustainability</strong>
                        </div>
                        <p>6-month forecasted total: $596.4K. Position appears sustainable.</p>
                    </div>
                </div>
            </div>

            <!-- Month-by-Month Forecast Breakdown -->
            <div class="monthly-breakdown">
                <h3>üìä Month-by-Month Forecast Breakdown</h3>
                <p class="chart-description">Iterative forecasting: each month's prediction feeds into the next month's features, creating a cascading forecast.</p>
                <div class="monthly-grid">
                    
                    <div class="monthly-card" style="border-top: 4px solid #68D2DF">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #68D2DF">Month 1</span>
                            <span class="month-dates">2025-11-05 ‚Üí 2025-11-26</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$273.6K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$273.6K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #22c55e">$58.2K</span><span class="week-val" style="color: #22c55e">$32.8K</span><span class="week-val" style="color: #22c55e">$75.7K</span><span class="week-val" style="color: #22c55e">$106.9K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #C4D600">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #C4D600">Month 2</span>
                            <span class="month-dates">2025-12-03 ‚Üí 2025-12-24</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$252.4K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$526.0K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #22c55e">$33.7K</span><span class="week-val" style="color: #22c55e">$33.8K</span><span class="week-val" style="color: #22c55e">$109.8K</span><span class="week-val" style="color: #22c55e">$75.1K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #F0AB00">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #F0AB00">Month 3</span>
                            <span class="month-dates">2025-12-31 ‚Üí 2026-01-21</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$69.6K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$595.6K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #22c55e">$23.8K</span><span class="week-val" style="color: #22c55e">$39.9K</span><span class="week-val" style="color: #ef4444">$-1.0K</span><span class="week-val" style="color: #22c55e">$6.9K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #D0006F">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #D0006F">Month 4</span>
                            <span class="month-dates">2026-01-28 ‚Üí 2026-02-18</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$-105.8K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$489.8K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #ef4444">$-63.2K</span><span class="week-val" style="color: #ef4444">$-19.0K</span><span class="week-val" style="color: #ef4444">$-26.4K</span><span class="week-val" style="color: #22c55e">$2.8K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #3C1053">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #3C1053">Month 5</span>
                            <span class="month-dates">2026-02-25 ‚Üí 2026-03-18</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$97.1K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$587.0K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #22c55e">$111.0K</span><span class="week-val" style="color: #22c55e">$30.9K</span><span class="week-val" style="color: #ef4444">$-47.6K</span><span class="week-val" style="color: #22c55e">$2.9K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #830051">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #830051">Month 6</span>
                            <span class="month-dates">2026-03-25 ‚Üí 2026-04-15</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$9.4K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$596.4K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #22c55e">$69.9K</span><span class="week-val" style="color: #22c55e">$24.7K</span><span class="week-val" style="color: #ef4444">$-28.3K</span><span class="week-val" style="color: #ef4444">$-56.9K</span>
                        </div>
                    </div>
                    
                </div>
                <div id="monthly-chart-PH10" class="chart" style="margin-top: 1.5rem;"></div>
            </div>

            <!-- Category Analysis -->
            <div class="category-analysis">
                <h3>üè∑Ô∏è Key Cash Flow Drivers</h3>
                <div class="category-grid">
                    <div class="category-box inflow">
                        <h4>Top Inflow Categories</h4>
                        <ul>
                            <li><span class="cat-name">AR</span><span class="cat-value">$4.65M</span></li><li><span class="cat-name">Loan receipt</span><span class="cat-value">$1.34M</span></li><li><span class="cat-name">Other receipt</span><span class="cat-value">$257.8K</span></li>
                        </ul>
                    </div>
                    <div class="category-box outflow">
                        <h4>Top Outflow Categories</h4>
                        <ul>
                            <li><span class="cat-name">Bank charges</span><span class="cat-value">-$160</span></li><li><span class="cat-name">Interest charges</span><span class="cat-value">-$2.4K</span></li><li><span class="cat-name">Custom and Duty</span><span class="cat-value">-$212.1K</span></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Model Performance Table -->
            <div class="model-comparison">
                <h3>ü§ñ Model Performance Comparison</h3>
                <table class="model-table">
                    <thead>
                        <tr>
                            <th>Model</th>
                            <th>MAE</th>
                            <th>RMSE</th>
                            <th>MAPE (%)</th>
                            <th>Direction Acc (%)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="">
                            <td>XGBoost </td>
                            <td>$175.2K</td>
                            <td>$185.2K</td>
                            <td>174.7</td>
                            <td>66.7</td>
                        </tr><tr class="">
                            <td>LightGBM </td>
                            <td>$189.8K</td>
                            <td>$209.6K</td>
                            <td>131.0</td>
                            <td>0.0</td>
                        </tr><tr class="">
                            <td>RandomForest </td>
                            <td>$198.3K</td>
                            <td>$207.9K</td>
                            <td>200.4</td>
                            <td>66.7</td>
                        </tr><tr class="">
                            <td>GradientBoosting </td>
                            <td>$170.0K</td>
                            <td>$178.7K</td>
                            <td>212.4</td>
                            <td>66.7</td>
                        </tr><tr class="best-model">
                            <td>Ridge ‚≠ê</td>
                            <td>$95.2K</td>
                            <td>$113.9K</td>
                            <td>130.3</td>
                            <td>100.0</td>
                        </tr><tr class="">
                            <td>Ensemble </td>
                            <td>$153.1K</td>
                            <td>$164.3K</td>
                            <td>148.2</td>
                            <td>66.7</td>
                        </tr>
                    </tbody>
                </table>
                <div style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px; font-size: 0.85rem; color: #555;">
                    <strong>üìä Metric Definitions:</strong>
                    <ul style="margin: 0.5rem 0 0 1.5rem; line-height: 1.6;">
                        <li><strong>MAE</strong> (Mean Absolute Error): Average dollar difference between predicted and actual values ‚Äî lower is better.</li>
                        <li><strong>RMSE</strong> (Root Mean Square Error): Similar to MAE but penalizes large errors more heavily ‚Äî lower is better.</li>
                        <li><strong>MAPE</strong> (Mean Absolute Percentage Error): Average percentage error relative to actual values ‚Äî lower is better.</li>
                        <li><strong>Direction Acc</strong> (Direction Accuracy): Percentage of times the model correctly predicted if cash flow would go up or down ‚Äî higher is better.</li>
                    </ul>
                </div>
            </div>
        </div>

        <script>
        // Backtest Chart
        Plotly.newPlot('backtest-PH10', [
            {
                x: ["2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [240962.47684, 19307.471809999985, -221092.87524000008, 233178.69207],
                type: 'scatter',
                mode: 'lines+markers',
                name: '‚úì Actual Values',
                line: {color: '#003865', width: 4},
                marker: {size: 14, symbol: 'circle'},
                hovertemplate: '<b>Actual</b><br>Date: %{x}<br>Value: $%{y:,.0f}<extra></extra>'
            },
            {
                x: ["2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [167783.1197230612, 94710.20467862124, -188512.45906557576, 33609.973665593425],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üîÆ Model Prediction',
                line: {color: '#F0AB00', width: 4, dash: 'dash'},
                marker: {size: 12, symbol: 'diamond'},
                hovertemplate: '<b>Prediction</b><br>Date: %{x}<br>Predicted: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 350,
            margin: {t: 50, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -30,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Net Cash Flow (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 11}
            },
            hovermode: 'x unified',
            shapes: [{type: 'line', x0: '2025-10-08', x1: '2025-10-29', y0: 0, y1: 0, line: {color: '#888', width: 1, dash: 'dot'}}],
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Inflow/Outflow Chart
        Plotly.newPlot('inflow-outflow-PH10', [
            {
                x: ["2025-01-01", "2025-01-08", "2025-01-15", "2025-01-22", "2025-01-29", "2025-02-05", "2025-02-12", "2025-02-19", "2025-02-26", "2025-03-05", "2025-03-12", "2025-03-19", "2025-03-26", "2025-04-02", "2025-04-09", "2025-04-16", "2025-04-23", "2025-04-30", "2025-05-07", "2025-05-14", "2025-05-21", "2025-05-28", "2025-06-04", "2025-06-11", "2025-06-18", "2025-06-25", "2025-07-02", "2025-07-09", "2025-07-16", "2025-07-23", "2025-07-30", "2025-08-06", "2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [3636.57698, 1780.6658700000003, 6441.58752, 221117.47506, 198323.29903, 1042.6160599999998, 1955.70701, 276.10834, 462599.78418, 2596.12586, 3773.74468, 1134.6838799999998, 442221.61316, 614.2003500000001, 190.73497, 104.30187999999998, 304914.35731, 235298.16544, 93.42032, 489.26659000000006, 311614.45008999994, 240972.09278, 509.71734000000004, 246.28021999999999, 12643.999619999999, 600632.82603, 1371.0729600000002, 117.78515999999999, 905.07108, 371615.49174, 264923.58974, 328.85069999999996, 527.28038, 382886.39396, 231067.91504, 390852.00930999994, 269824.93858, 2223.0181399999997, 252510.64244, 197844.97775999998, 338889.73121999996, 67630.54534, 177032.87008999998, 246917.12504999997],
                type: 'bar',
                name: '‚Üë Inflow',
                marker: {color: '#C4D600', line: {color: 'rgba(0,0,0,0.2)', width: 1}},
                hovertemplate: '<b>Inflow</b><br>Date: %{x}<br>Amount: $%{y:,.0f}<extra></extra>'
            },
            {
                x: ["2025-01-01", "2025-01-08", "2025-01-15", "2025-01-22", "2025-01-29", "2025-02-05", "2025-02-12", "2025-02-19", "2025-02-26", "2025-03-05", "2025-03-12", "2025-03-19", "2025-03-26", "2025-04-02", "2025-04-09", "2025-04-16", "2025-04-23", "2025-04-30", "2025-05-07", "2025-05-14", "2025-05-21", "2025-05-28", "2025-06-04", "2025-06-11", "2025-06-18", "2025-06-25", "2025-07-02", "2025-07-09", "2025-07-16", "2025-07-23", "2025-07-30", "2025-08-06", "2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-43021.04595, -69294.94095, -56350.62339, -412208.8749899999, -26814.72728, -35511.6938, -54663.34735, -43676.44861, -313744.17092000006, -41875.56107, -133824.81153, -26034.695099999997, -451240.24267, -27222.886759999998, -130104.45175999998, -122609.45186000003, -395417.4623100001, -203620.49598999997, -93541.52394, -72363.5722, -277012.42223, -188975.86815, -85133.28754, -66722.49844, -24448.590269999997, -205055.18575, -32394.142249999997, -139074.43515, -33233.06898, -588166.00464, -20257.1664, -103177.39275999999, -20342.375459999996, -195847.87080999996, -593635.5166, -326689.11723000003, -73472.19012000001, -81629.94299000001, -146909.0012, -356862.51316000003, -97927.25437999998, -48323.07353, -398125.74533, -13738.432980000001],
                type: 'bar',
                name: '‚Üì Outflow',
                marker: {color: '#D0006F', line: {color: 'rgba(0,0,0,0.2)', width: 1}},
                hovertemplate: '<b>Outflow</b><br>Date: %{x}<br>Amount: $%{y:,.0f}<extra></extra>'
            },
            {
                x: ["2025-01-01", "2025-01-08", "2025-01-15", "2025-01-22", "2025-01-29", "2025-02-05", "2025-02-12", "2025-02-19", "2025-02-26", "2025-03-05", "2025-03-12", "2025-03-19", "2025-03-26", "2025-04-02", "2025-04-09", "2025-04-16", "2025-04-23", "2025-04-30", "2025-05-07", "2025-05-14", "2025-05-21", "2025-05-28", "2025-06-04", "2025-06-11", "2025-06-18", "2025-06-25", "2025-07-02", "2025-07-09", "2025-07-16", "2025-07-23", "2025-07-30", "2025-08-06", "2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-39384.46897, -67514.27508, -49909.03587, -191091.39993, 171508.57175, -34469.07774, -52707.64033999999, -43400.34027, 148855.61326000004, -39279.435209999996, -130051.06684999997, -24900.01122, -9018.62951000005, -26608.68641, -129913.71679, -122505.14998000002, -90503.10500000001, 31677.669449999994, -93448.10362000001, -71874.30561, 34602.02785999999, 51996.22462999995, -84623.5702, -66476.21822, -11804.590650000002, 395577.64027999993, -31023.06929, -138956.64999, -32327.997900000002, -216550.5129, 244666.42333999998, -102848.54206, -19815.09508, 187038.52315000002, -362567.60156000004, 64162.89208000003, 196352.74845999997, -79406.92485, 105601.64124, -159017.5354, 240962.47684, 19307.471809999985, -221092.87524000008, 233178.69207],
                type: 'scatter',
                mode: 'lines+markers',
                name: '‚Äî Net Cash Flow',
                line: {color: '#003865', width: 3},
                marker: {size: 6},
                hovertemplate: '<b>Net</b><br>Date: %{x}<br>Amount: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 400,
            barmode: 'relative',
            margin: {t: 50, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -45,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Amount (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 11}
            },
            hovermode: 'x unified',
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Short-term Forecast Chart
        var lastHistDate = '2025-10-29';
        var lastHistVal = 233178.69207;
        Plotly.newPlot('short-forecast-PH10', [
            {
                x: ["2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [196352.74845999997, -79406.92485, 105601.64124, -159017.5354, 240962.47684, 19307.471809999985, -221092.87524000008, 233178.69207],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üìä Historical (Last 8 Weeks)',
                line: {color: '#003865', width: 3},
                marker: {size: 10},
                hovertemplate: '<b>Historical</b><br>Date: %{x}<br>Net: $%{y:,.0f}<extra></extra>'
            },
            {
                x: [lastHistDate].concat(["2025-11-05", "2025-11-12", "2025-11-19", "2025-11-26"]),
                y: [lastHistVal].concat([71641.36193429507, 101704.8610272928, 164515.9919497136, 188250.48557443384]),
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üîÆ 1-Month Forecast',
                line: {color: '#68D2DF', width: 4},
                marker: {size: 12, symbol: 'diamond'},
                fill: 'tozeroy',
                fillcolor: 'rgba(104, 210, 223, 0.2)',
                hovertemplate: '<b>Forecast</b><br>Date: %{x}<br>Predicted: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 320,
            margin: {t: 50, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -30,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Net Cash Flow (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 10}
            },
            hovermode: 'x unified',
            shapes: [{type: 'line', x0: lastHistDate, x1: lastHistDate, y0: 0, y1: 0, yref: 'paper', line: {color: '#888', width: 2, dash: 'dash'}}],
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Long-term Forecast Chart (Month-by-Month with different colors)
        var longForecastTraces = [
            {
                x: ["2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-19815.09508, 187038.52315000002, -362567.60156000004, 64162.89208000003, 196352.74845999997, -79406.92485, 105601.64124, -159017.5354, 240962.47684, 19307.471809999985, -221092.87524000008, 233178.69207],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üìä Historical',
                line: {color: '#003865', width: 3},
                marker: {size: 8},
                hovertemplate: '<b>Historical</b><br>Date: %{x}<br>Net: $%{y:,.0f}<extra></extra>'
            }
        ];
        
        // Add each month as a separate trace with different colors
        var monthColors = ['#68D2DF', '#C4D600', '#F0AB00', '#D0006F', '#3C1053', '#830051'];
        var monthNames = ['Nov', 'Dec', 'Jan', 'Feb', 'Mar', 'Apr'];
        var monthlyData = [{"month_num": 1, "dates": ["2025-11-05", "2025-11-12", "2025-11-19", "2025-11-26"], "predictions": [58217.19563225278, 32796.90611141305, 75700.2891555661, 106856.07084313841], "total": 273570.4617423704, "cumulative": 273570.4617423704, "color": "#68D2DF"}, {"month_num": 2, "dates": ["2025-12-03", "2025-12-10", "2025-12-17", "2025-12-24"], "predictions": [33729.95884313126, 33804.40361519714, 109781.22043208114, 75131.65181547203], "total": 252447.23470588156, "cumulative": 526017.696448252, "color": "#C4D600"}, {"month_num": 3, "dates": ["2025-12-31", "2026-01-07", "2026-01-14", "2026-01-21"], "predictions": [23828.021119029367, 39934.595407359666, -1020.9835689983956, 6873.743666505294], "total": 69615.37662389592, "cumulative": 595633.0730721479, "color": "#F0AB00"}, {"month_num": 4, "dates": ["2026-01-28", "2026-02-04", "2026-02-11", "2026-02-18"], "predictions": [-63222.20274072145, -18964.558362123407, -26445.869106780206, 2805.654819705178], "total": -105826.97538991988, "cumulative": 489806.097682228, "color": "#D0006F"}, {"month_num": 5, "dates": ["2026-02-25", "2026-03-04", "2026-03-11", "2026-03-18"], "predictions": [110961.43505222932, 30937.841581298653, -47622.47881821726, 2871.1962541433604], "total": 97147.99406945407, "cumulative": 586954.0917516821, "color": "#3C1053"}, {"month_num": 6, "dates": ["2026-03-25", "2026-04-01", "2026-04-08", "2026-04-15"], "predictions": [69942.79792606847, 24735.037831590747, -28310.69691034402, -56938.30252844503], "total": 9428.836318870166, "cumulative": 596382.9280705523, "color": "#830051"}];
        var prevEndDate = lastHistDate;
        var prevEndVal = lastHistVal;
        
        monthlyData.forEach(function(month, idx) {
            var xVals = [prevEndDate].concat(month.dates);
            var yVals = [prevEndVal].concat(month.predictions);
            var monthTotal = month.total;
            var sign = monthTotal >= 0 ? '+' : '';
            longForecastTraces.push({
                x: xVals,
                y: yVals,
                type: 'scatter',
                mode: 'lines+markers',
                name: 'M' + month.month_num + ' (' + sign + (monthTotal/1000).toFixed(0) + 'K)',
                line: {color: monthColors[idx], width: 3},
                marker: {size: 8, symbol: 'circle'},
                fill: 'tozeroy',
                fillcolor: monthColors[idx] + '15',
                hovertemplate: '<b>Month ' + month.month_num + '</b><br>Date: %{x}<br>Net: $%{y:,.0f}<extra></extra>'
            });
            prevEndDate = month.dates[month.dates.length - 1];
            prevEndVal = month.predictions[month.predictions.length - 1];
        });
        
        Plotly.newPlot('long-forecast-PH10', longForecastTraces, {
            height: 380,
            margin: {t: 60, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -30,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Net Cash Flow (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.15,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ccc',
                borderwidth: 1,
                font: {size: 10},
                itemwidth: 40
            },
            hovermode: 'x unified',
            shapes: [{
                type: 'line',
                x0: lastHistDate,
                x1: lastHistDate,
                y0: 0,
                y1: 1,
                yref: 'paper',
                line: {color: '#888', width: 2, dash: 'dash'}
            }],
            annotations: [{
                x: lastHistDate,
                y: 1.02,
                yref: 'paper',
                text: 'Forecast ‚Üí',
                showarrow: false,
                font: {size: 10, color: '#666'}
            }],
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Monthly Summary Bar Chart
        var monthlyTotals = monthlyData.map(m => m.total);
        var monthlyLabels = monthlyData.map(m => 'Month ' + m.month_num);
        var monthlyBarColors = monthlyTotals.map((v, i) => v >= 0 ? monthColors[i] : '#D0006F');
        
        // Calculate y-axis range to accommodate text labels
        var maxVal = Math.max(...monthlyTotals);
        var minVal = Math.min(...monthlyTotals);
        var yPadding = Math.max(Math.abs(maxVal), Math.abs(minVal)) * 0.25;
        var yMin = minVal < 0 ? minVal - yPadding : Math.min(0, minVal);
        var yMax = maxVal > 0 ? maxVal + yPadding : Math.max(0, maxVal);
        
        Plotly.newPlot('monthly-chart-PH10', [
            {
                x: monthlyLabels,
                y: monthlyTotals,
                type: 'bar',
                name: 'Monthly Net',
                marker: {
                    color: monthlyBarColors,
                    line: {color: 'rgba(0,0,0,0.3)', width: 1}
                },
                text: monthlyTotals.map(v => v >= 0 ? '+' + (v/1000).toFixed(0) + 'K' : (v/1000).toFixed(0) + 'K'),
                textposition: 'outside',
                textfont: {size: 11, color: '#333', family: 'Inter, sans-serif', weight: 600},
                cliponaxis: false,
                constraintext: 'none',
                hovertemplate: '<b>%{x}</b><br>Net: $%{y:,.0f}<extra></extra>'
            },
            {
                x: monthlyLabels,
                y: monthlyData.map(m => m.cumulative),
                type: 'scatter',
                mode: 'lines+markers',
                name: 'Cumulative Total',
                yaxis: 'y2',
                line: {color: '#003865', width: 3},
                marker: {size: 10, symbol: 'circle'},
                hovertemplate: '<b>%{x}</b><br>Cumulative: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 380,
            margin: {t: 80, b: 60, l: 80, r: 80},
            xaxis: {
                title: {text: 'Forecast Period', font: {size: 12, color: '#666'}},
                tickfont: {size: 11}
            },
            yaxis: {
                title: {text: 'Monthly Net (USD)', font: {size: 12, color: '#830051'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2,
                range: [yMin, yMax]
            },
            yaxis2: {
                title: {text: 'Cumulative (USD)', font: {size: 12, color: '#003865'}},
                overlaying: 'y',
                side: 'right',
                tickformat: ',.0f',
                tickfont: {size: 10}
            },
            showlegend: true,
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 11}
            },
            hovermode: 'x unified',
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});
        </script>
        
        <div class="entity-section" id="TH10">
            <div class="entity-header">
                <h2><span class="entity-badge">TH10</span> Cash Flow Analysis</h2>
                <div class="model-badge">Best Model: <strong>Ridge</strong></div>
            </div>

            <!-- KPI Cards Row -->
            <div class="kpi-row">
                <div class="kpi-card">
                    <div class="kpi-icon">üí∞</div>
                    <div class="kpi-value" style="color: #C4D600">$8.03M</div>
                    <div class="kpi-label">Total Inflow</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üí∏</div>
                    <div class="kpi-value" style="color: #D0006F">$9.42M</div>
                    <div class="kpi-label">Total Outflow</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üìä</div>
                    <div class="kpi-value" style="color: #003865">$-1.39M</div>
                    <div class="kpi-label">Net Position</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üìà</div>
                    <div class="kpi-value" style="color: #68D2DF">$109.3K</div>
                    <div class="kpi-label">1-Month Forecast</div>
                </div>
            </div>

            <!-- Main Charts Section -->
            <div class="charts-grid">
                <!-- Backtest Chart -->
                <div class="chart-container full-width">
                    <h3>üîç Backtest: Actual vs Forecast (Last 4 Weeks)</h3>
                    <p class="chart-description">Comparing model predictions against actual cash flows to evaluate forecast accuracy.</p>
                    <div id="backtest-TH10" class="chart"></div>
                    <div class="metrics-row">
                        <div class="metric">
                            <span class="metric-label">MAE</span>
                            <span class="metric-value">$14.7K</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">RMSE</span>
                            <span class="metric-value">$17.4K</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">MAPE</span>
                            <span class="metric-value">64.3%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Direction Accuracy</span>
                            <span class="metric-value">66.7%</span>
                        </div>
                    </div>
                </div>

                <!-- Inflow/Outflow Chart -->
                <div class="chart-container full-width">
                    <h3>üíπ Cash Flow Overview: Inflow vs Outflow</h3>
                    <p class="chart-description">Weekly breakdown of cash inflows and outflows across the historical period.</p>
                    <div id="inflow-outflow-TH10" class="chart"></div>
                </div>

                <!-- Short-term Forecast -->
                <div class="chart-container">
                    <h3>üìÖ 1-Month Ahead Forecast</h3>
                    <p class="chart-description">Weekly cash flow predictions for the next 4 weeks based on Ridge model.</p>
                    <div id="short-forecast-TH10" class="chart"></div>
                    <div class="insight-box" style="border-left-color: #C4D600">
                        <div class="insight-header">
                            <span class="status-badge" style="background: #C4D600">‚úÖ Stable</span>
                            <strong>Short-term Liquidity Assessment</strong>
                        </div>
                        <p>Healthy cash position expected. Net inflow forecast: $109.3K</p>
                    </div>
                </div>

                <!-- Long-term Forecast -->
                <div class="chart-container">
                    <h3>üìÜ 6-Month Ahead Forecast (Iterative Month-by-Month)</h3>
                    <p class="chart-description">Each month's forecast uses previous months' predictions as input features, building iteratively.</p>
                    <div id="long-forecast-TH10" class="chart"></div>
                    <div class="insight-box" style="border-left-color: #D0006F">
                        <div class="insight-header">
                            <span class="status-badge" style="background: #D0006F">Needs Attention</span>
                            <strong>Long-term Sustainability</strong>
                        </div>
                        <p>6-month forecasted total: $-303.1K. Consider strategic adjustments.</p>
                    </div>
                </div>
            </div>

            <!-- Month-by-Month Forecast Breakdown -->
            <div class="monthly-breakdown">
                <h3>üìä Month-by-Month Forecast Breakdown</h3>
                <p class="chart-description">Iterative forecasting: each month's prediction feeds into the next month's features, creating a cascading forecast.</p>
                <div class="monthly-grid">
                    
                    <div class="monthly-card" style="border-top: 4px solid #68D2DF">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #68D2DF">Month 1</span>
                            <span class="month-dates">2025-11-05 ‚Üí 2025-11-26</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$99.4K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$99.4K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #22c55e">$25.7K</span><span class="week-val" style="color: #ef4444">$-45.1K</span><span class="week-val" style="color: #22c55e">$32.0K</span><span class="week-val" style="color: #22c55e">$86.8K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #C4D600">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #C4D600">Month 2</span>
                            <span class="month-dates">2025-12-03 ‚Üí 2025-12-24</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$-6</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$99.4K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #ef4444">$-52.9K</span><span class="week-val" style="color: #ef4444">$-52.8K</span><span class="week-val" style="color: #22c55e">$46.4K</span><span class="week-val" style="color: #22c55e">$59.2K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #F0AB00">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #F0AB00">Month 3</span>
                            <span class="month-dates">2025-12-31 ‚Üí 2026-01-21</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$-254.4K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$-155.0K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #ef4444">$-81.0K</span><span class="week-val" style="color: #22c55e">$4.8K</span><span class="week-val" style="color: #ef4444">$-99.1K</span><span class="week-val" style="color: #ef4444">$-79.2K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #D0006F">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #D0006F">Month 4</span>
                            <span class="month-dates">2026-01-28 ‚Üí 2026-02-18</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$-574.9K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$-729.9K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #22c55e">$58.1K</span><span class="week-val" style="color: #ef4444">$-174.9K</span><span class="week-val" style="color: #ef4444">$-152.7K</span><span class="week-val" style="color: #ef4444">$-305.4K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #3C1053">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #3C1053">Month 5</span>
                            <span class="month-dates">2026-02-25 ‚Üí 2026-03-18</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$-15.4K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$-745.3K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #22c55e">$294.5K</span><span class="week-val" style="color: #ef4444">$-57.7K</span><span class="week-val" style="color: #ef4444">$-119.0K</span><span class="week-val" style="color: #ef4444">$-133.3K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #830051">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #830051">Month 6</span>
                            <span class="month-dates">2026-03-25 ‚Üí 2026-04-15</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$442.2K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$-303.1K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #22c55e">$256.9K</span><span class="week-val" style="color: #ef4444">$-102.2K</span><span class="week-val" style="color: #22c55e">$438.5K</span><span class="week-val" style="color: #ef4444">$-151.0K</span>
                        </div>
                    </div>
                    
                </div>
                <div id="monthly-chart-TH10" class="chart" style="margin-top: 1.5rem;"></div>
            </div>

            <!-- Category Analysis -->
            <div class="category-analysis">
                <h3>üè∑Ô∏è Key Cash Flow Drivers</h3>
                <div class="category-grid">
                    <div class="category-box inflow">
                        <h4>Top Inflow Categories</h4>
                        <ul>
                            <li><span class="cat-name">AR</span><span class="cat-value">$7.85M</span></li><li><span class="cat-name">Netting AR</span><span class="cat-value">$156.2K</span></li><li><span class="cat-name">Other receipt</span><span class="cat-value">$8.9K</span></li>
                        </ul>
                    </div>
                    <div class="category-box outflow">
                        <h4>Top Outflow Categories</h4>
                        <ul>
                            <li><span class="cat-name">Bank charges</span><span class="cat-value">-$480</span></li><li><span class="cat-name">Custom and Duty</span><span class="cat-value">-$758.2K</span></li><li><span class="cat-name">Tax payable</span><span class="cat-value">-$896.9K</span></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Model Performance Table -->
            <div class="model-comparison">
                <h3>ü§ñ Model Performance Comparison</h3>
                <table class="model-table">
                    <thead>
                        <tr>
                            <th>Model</th>
                            <th>MAE</th>
                            <th>RMSE</th>
                            <th>MAPE (%)</th>
                            <th>Direction Acc (%)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="">
                            <td>XGBoost </td>
                            <td>$143.3K</td>
                            <td>$238.1K</td>
                            <td>312.6</td>
                            <td>100.0</td>
                        </tr><tr class="">
                            <td>LightGBM </td>
                            <td>$17.1K</td>
                            <td>$18.7K</td>
                            <td>57.2</td>
                            <td>0.0</td>
                        </tr><tr class="">
                            <td>RandomForest </td>
                            <td>$45.1K</td>
                            <td>$47.5K</td>
                            <td>146.4</td>
                            <td>33.3</td>
                        </tr><tr class="">
                            <td>GradientBoosting </td>
                            <td>$86.5K</td>
                            <td>$128.9K</td>
                            <td>209.8</td>
                            <td>100.0</td>
                        </tr><tr class="best-model">
                            <td>Ridge ‚≠ê</td>
                            <td>$14.7K</td>
                            <td>$17.4K</td>
                            <td>64.3</td>
                            <td>66.7</td>
                        </tr><tr class="">
                            <td>Ensemble </td>
                            <td>$9.9K</td>
                            <td>$13.9K</td>
                            <td>56.2</td>
                            <td>100.0</td>
                        </tr>
                    </tbody>
                </table>
                <div style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px; font-size: 0.85rem; color: #555;">
                    <strong>üìä Metric Definitions:</strong>
                    <ul style="margin: 0.5rem 0 0 1.5rem; line-height: 1.6;">
                        <li><strong>MAE</strong> (Mean Absolute Error): Average dollar difference between predicted and actual values ‚Äî lower is better.</li>
                        <li><strong>RMSE</strong> (Root Mean Square Error): Similar to MAE but penalizes large errors more heavily ‚Äî lower is better.</li>
                        <li><strong>MAPE</strong> (Mean Absolute Percentage Error): Average percentage error relative to actual values ‚Äî lower is better.</li>
                        <li><strong>Direction Acc</strong> (Direction Accuracy): Percentage of times the model correctly predicted if cash flow would go up or down ‚Äî higher is better.</li>
                    </ul>
                </div>
            </div>
        </div>

        <script>
        // Backtest Chart
        Plotly.newPlot('backtest-TH10', [
            {
                x: ["2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-38832.36741, -45176.7165, -59831.788199999886, -13533.2281],
                type: 'scatter',
                mode: 'lines+markers',
                name: '‚úì Actual Values',
                line: {color: '#003865', width: 4},
                marker: {size: 14, symbol: 'circle'},
                hovertemplate: '<b>Actual</b><br>Date: %{x}<br>Value: $%{y:,.0f}<extra></extra>'
            },
            {
                x: ["2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-39571.68117761069, -58029.14805672789, -41046.65877686883, -39972.404481314115],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üîÆ Model Prediction',
                line: {color: '#F0AB00', width: 4, dash: 'dash'},
                marker: {size: 12, symbol: 'diamond'},
                hovertemplate: '<b>Prediction</b><br>Date: %{x}<br>Predicted: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 350,
            margin: {t: 50, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -30,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Net Cash Flow (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 11}
            },
            hovermode: 'x unified',
            shapes: [{type: 'line', x0: '2025-10-08', x1: '2025-10-29', y0: 0, y1: 0, line: {color: '#888', width: 1, dash: 'dot'}}],
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Inflow/Outflow Chart
        Plotly.newPlot('inflow-outflow-TH10', [
            {
                x: ["2025-01-01", "2025-01-08", "2025-01-15", "2025-01-22", "2025-01-29", "2025-02-05", "2025-02-12", "2025-02-19", "2025-02-26", "2025-03-05", "2025-03-12", "2025-03-19", "2025-03-26", "2025-04-02", "2025-04-09", "2025-04-16", "2025-04-23", "2025-04-30", "2025-05-07", "2025-05-14", "2025-05-21", "2025-05-28", "2025-06-04", "2025-06-11", "2025-06-18", "2025-06-25", "2025-07-02", "2025-07-09", "2025-07-16", "2025-07-23", "2025-07-30", "2025-08-06", "2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [4.40586, 5.497170000000001, 19.68648, 598704.23006, 8.18266, 3.43734, 0.0, 0.0, 727597.28389, 4.68537, 0.0, 564.59, 830205.7525, 11.65885, 798885.19416, 0.0, 545057.63, 22.41518, 3.97266, 276.04179999999997, 0.0, 624983.3067, 10885.75798, 2862.84, 2.2653, 157889.49742, 767100.77205, 8.57489, 244.99348, 1164521.54, 15.75705, 27.752290000000002, 259.96788999999995, 2605.55324, 33479.24786, 5.50124, 1.01181, 0.63993, 1122076.18049, 27.35411, 61.52055, 1.10768, 638436.4855400001, 69.45984],
                type: 'bar',
                name: '‚Üë Inflow',
                marker: {color: '#C4D600', line: {color: 'rgba(0,0,0,0.2)', width: 1}},
                hovertemplate: '<b>Inflow</b><br>Date: %{x}<br>Amount: $%{y:,.0f}<extra></extra>'
            },
            {
                x: ["2025-01-01", "2025-01-08", "2025-01-15", "2025-01-22", "2025-01-29", "2025-02-05", "2025-02-12", "2025-02-19", "2025-02-26", "2025-03-05", "2025-03-12", "2025-03-19", "2025-03-26", "2025-04-02", "2025-04-09", "2025-04-16", "2025-04-23", "2025-04-30", "2025-05-07", "2025-05-14", "2025-05-21", "2025-05-28", "2025-06-04", "2025-06-11", "2025-06-18", "2025-06-25", "2025-07-02", "2025-07-09", "2025-07-16", "2025-07-23", "2025-07-30", "2025-08-06", "2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-21959.62238, -92683.20526999999, -44303.492029999994, -516833.96777, -36876.094, -80218.42852, -61332.959969999996, -361813.81239, -93637.14267999999, -82386.0092, -73335.46155, -47743.54057, -572415.6248799999, -109975.86782000001, -58719.34962, -78515.22289, -1546129.19162, -16030.85709, -120920.99702999998, -31399.05561, -1539050.22323, -33145.16659, -73403.79244, -212168.14779000002, -105439.98702, -90178.66940000001, -63395.62054999999, -78715.30722999999, -80386.74575999999, -732599.6025300001, -61709.405549999996, -138725.2125, -37808.20863, -207026.81259999998, -95780.38554, -237736.13752, -79371.56778000001, -47939.24654, -599654.42063, -64008.89918, -38893.88796, -45177.824179999996, -698268.27374, -13602.687940000002],
                type: 'bar',
                name: '‚Üì Outflow',
                marker: {color: '#D0006F', line: {color: 'rgba(0,0,0,0.2)', width: 1}},
                hovertemplate: '<b>Outflow</b><br>Date: %{x}<br>Amount: $%{y:,.0f}<extra></extra>'
            },
            {
                x: ["2025-01-01", "2025-01-08", "2025-01-15", "2025-01-22", "2025-01-29", "2025-02-05", "2025-02-12", "2025-02-19", "2025-02-26", "2025-03-05", "2025-03-12", "2025-03-19", "2025-03-26", "2025-04-02", "2025-04-09", "2025-04-16", "2025-04-23", "2025-04-30", "2025-05-07", "2025-05-14", "2025-05-21", "2025-05-28", "2025-06-04", "2025-06-11", "2025-06-18", "2025-06-25", "2025-07-02", "2025-07-09", "2025-07-16", "2025-07-23", "2025-07-30", "2025-08-06", "2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-21955.21652, -92677.70809999999, -44283.80555, 81870.26228999998, -36867.91134, -80214.99117999998, -61332.959969999996, -361813.81239, 633960.14121, -82381.32383000001, -73335.46155, -47178.95057, 257790.12761999996, -109964.20897, 740165.8445399998, -78515.22289, -1001071.5616199997, -16008.44191, -120917.02437, -31123.01381, -1539050.22323, 591838.1401099999, -62518.03446, -209305.30779000002, -105437.72172, 67710.82802, 703705.1515, -78706.73233999999, -80141.75227999999, 431921.9374699999, -61693.6485, -138697.46021, -37548.24074, -204421.25935999997, -62301.13768, -237730.63627999998, -79370.55597, -47938.60661, 522421.75986, -63981.54506999999, -38832.36741, -45176.7165, -59831.788199999886, -13533.2281],
                type: 'scatter',
                mode: 'lines+markers',
                name: '‚Äî Net Cash Flow',
                line: {color: '#003865', width: 3},
                marker: {size: 6},
                hovertemplate: '<b>Net</b><br>Date: %{x}<br>Amount: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 400,
            barmode: 'relative',
            margin: {t: 50, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -45,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Amount (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 11}
            },
            hovermode: 'x unified',
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Short-term Forecast Chart
        var lastHistDate = '2025-10-29';
        var lastHistVal = -13533.2281;
        Plotly.newPlot('short-forecast-TH10', [
            {
                x: ["2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-79370.55597, -47938.60661, 522421.75986, -63981.54506999999, -38832.36741, -45176.7165, -59831.788199999886, -13533.2281],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üìä Historical (Last 8 Weeks)',
                line: {color: '#003865', width: 3},
                marker: {size: 10},
                hovertemplate: '<b>Historical</b><br>Date: %{x}<br>Net: $%{y:,.0f}<extra></extra>'
            },
            {
                x: [lastHistDate].concat(["2025-11-05", "2025-11-12", "2025-11-19", "2025-11-26"]),
                y: [lastHistVal].concat([8723.46740320438, -29952.56476777298, -49721.66023599908, 180288.115247764]),
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üîÆ 1-Month Forecast',
                line: {color: '#68D2DF', width: 4},
                marker: {size: 12, symbol: 'diamond'},
                fill: 'tozeroy',
                fillcolor: 'rgba(104, 210, 223, 0.2)',
                hovertemplate: '<b>Forecast</b><br>Date: %{x}<br>Predicted: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 320,
            margin: {t: 50, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -30,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Net Cash Flow (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 10}
            },
            hovermode: 'x unified',
            shapes: [{type: 'line', x0: lastHistDate, x1: lastHistDate, y0: 0, y1: 0, yref: 'paper', line: {color: '#888', width: 2, dash: 'dash'}}],
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Long-term Forecast Chart (Month-by-Month with different colors)
        var longForecastTraces = [
            {
                x: ["2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-37548.24074, -204421.25935999997, -62301.13768, -237730.63627999998, -79370.55597, -47938.60661, 522421.75986, -63981.54506999999, -38832.36741, -45176.7165, -59831.788199999886, -13533.2281],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üìä Historical',
                line: {color: '#003865', width: 3},
                marker: {size: 8},
                hovertemplate: '<b>Historical</b><br>Date: %{x}<br>Net: $%{y:,.0f}<extra></extra>'
            }
        ];
        
        // Add each month as a separate trace with different colors
        var monthColors = ['#68D2DF', '#C4D600', '#F0AB00', '#D0006F', '#3C1053', '#830051'];
        var monthNames = ['Nov', 'Dec', 'Jan', 'Feb', 'Mar', 'Apr'];
        var monthlyData = [{"month_num": 1, "dates": ["2025-11-05", "2025-11-12", "2025-11-19", "2025-11-26"], "predictions": [25722.57595529135, -45059.98015571844, 31970.601901714326, 86776.01408874996], "total": 99409.2117900372, "cumulative": 99409.2117900372, "color": "#68D2DF"}, {"month_num": 2, "dates": ["2025-12-03", "2025-12-10", "2025-12-17", "2025-12-24"], "predictions": [-52853.73926266474, -52765.80367292647, 46397.392288749994, 59215.98823939763], "total": -6.162407443596749, "cumulative": 99403.0493825936, "color": "#C4D600"}, {"month_num": 3, "dates": ["2025-12-31", "2026-01-07", "2026-01-14", "2026-01-21"], "predictions": [-80950.6689236077, 4844.177880712057, -99093.00054909848, -79168.61982467763], "total": -254368.11141667177, "cumulative": -154965.06203407818, "color": "#F0AB00"}, {"month_num": 4, "dates": ["2026-01-28", "2026-02-04", "2026-02-11", "2026-02-18"], "predictions": [58057.05350579607, -174864.66232197138, -152705.8494685197, -305435.5542600856], "total": -574949.0125447807, "cumulative": -729914.0745788589, "color": "#D0006F"}, {"month_num": 5, "dates": ["2026-02-25", "2026-03-04", "2026-03-11", "2026-03-18"], "predictions": [294531.36879516515, -57683.985007267096, -118970.51334139064, -133291.6403169847], "total": -15414.769870477292, "cumulative": -745328.8444493362, "color": "#3C1053"}, {"month_num": 6, "dates": ["2026-03-25", "2026-04-01", "2026-04-08", "2026-04-15"], "predictions": [256877.40304616257, -102156.19696988165, 438492.51673243754, -150993.0024371992], "total": 442220.7203715192, "cumulative": -303108.12407781696, "color": "#830051"}];
        var prevEndDate = lastHistDate;
        var prevEndVal = lastHistVal;
        
        monthlyData.forEach(function(month, idx) {
            var xVals = [prevEndDate].concat(month.dates);
            var yVals = [prevEndVal].concat(month.predictions);
            var monthTotal = month.total;
            var sign = monthTotal >= 0 ? '+' : '';
            longForecastTraces.push({
                x: xVals,
                y: yVals,
                type: 'scatter',
                mode: 'lines+markers',
                name: 'M' + month.month_num + ' (' + sign + (monthTotal/1000).toFixed(0) + 'K)',
                line: {color: monthColors[idx], width: 3},
                marker: {size: 8, symbol: 'circle'},
                fill: 'tozeroy',
                fillcolor: monthColors[idx] + '15',
                hovertemplate: '<b>Month ' + month.month_num + '</b><br>Date: %{x}<br>Net: $%{y:,.0f}<extra></extra>'
            });
            prevEndDate = month.dates[month.dates.length - 1];
            prevEndVal = month.predictions[month.predictions.length - 1];
        });
        
        Plotly.newPlot('long-forecast-TH10', longForecastTraces, {
            height: 380,
            margin: {t: 60, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -30,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Net Cash Flow (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.15,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ccc',
                borderwidth: 1,
                font: {size: 10},
                itemwidth: 40
            },
            hovermode: 'x unified',
            shapes: [{
                type: 'line',
                x0: lastHistDate,
                x1: lastHistDate,
                y0: 0,
                y1: 1,
                yref: 'paper',
                line: {color: '#888', width: 2, dash: 'dash'}
            }],
            annotations: [{
                x: lastHistDate,
                y: 1.02,
                yref: 'paper',
                text: 'Forecast ‚Üí',
                showarrow: false,
                font: {size: 10, color: '#666'}
            }],
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Monthly Summary Bar Chart
        var monthlyTotals = monthlyData.map(m => m.total);
        var monthlyLabels = monthlyData.map(m => 'Month ' + m.month_num);
        var monthlyBarColors = monthlyTotals.map((v, i) => v >= 0 ? monthColors[i] : '#D0006F');
        
        // Calculate y-axis range to accommodate text labels
        var maxVal = Math.max(...monthlyTotals);
        var minVal = Math.min(...monthlyTotals);
        var yPadding = Math.max(Math.abs(maxVal), Math.abs(minVal)) * 0.25;
        var yMin = minVal < 0 ? minVal - yPadding : Math.min(0, minVal);
        var yMax = maxVal > 0 ? maxVal + yPadding : Math.max(0, maxVal);
        
        Plotly.newPlot('monthly-chart-TH10', [
            {
                x: monthlyLabels,
                y: monthlyTotals,
                type: 'bar',
                name: 'Monthly Net',
                marker: {
                    color: monthlyBarColors,
                    line: {color: 'rgba(0,0,0,0.3)', width: 1}
                },
                text: monthlyTotals.map(v => v >= 0 ? '+' + (v/1000).toFixed(0) + 'K' : (v/1000).toFixed(0) + 'K'),
                textposition: 'outside',
                textfont: {size: 11, color: '#333', family: 'Inter, sans-serif', weight: 600},
                cliponaxis: false,
                constraintext: 'none',
                hovertemplate: '<b>%{x}</b><br>Net: $%{y:,.0f}<extra></extra>'
            },
            {
                x: monthlyLabels,
                y: monthlyData.map(m => m.cumulative),
                type: 'scatter',
                mode: 'lines+markers',
                name: 'Cumulative Total',
                yaxis: 'y2',
                line: {color: '#003865', width: 3},
                marker: {size: 10, symbol: 'circle'},
                hovertemplate: '<b>%{x}</b><br>Cumulative: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 380,
            margin: {t: 80, b: 60, l: 80, r: 80},
            xaxis: {
                title: {text: 'Forecast Period', font: {size: 12, color: '#666'}},
                tickfont: {size: 11}
            },
            yaxis: {
                title: {text: 'Monthly Net (USD)', font: {size: 12, color: '#830051'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2,
                range: [yMin, yMax]
            },
            yaxis2: {
                title: {text: 'Cumulative (USD)', font: {size: 12, color: '#003865'}},
                overlaying: 'y',
                side: 'right',
                tickformat: ',.0f',
                tickfont: {size: 10}
            },
            showlegend: true,
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 11}
            },
            hovermode: 'x unified',
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});
        </script>
        
        <div class="entity-section" id="ID10">
            <div class="entity-header">
                <h2><span class="entity-badge">ID10</span> Cash Flow Analysis</h2>
                <div class="model-badge">Best Model: <strong>Ridge</strong></div>
            </div>

            <!-- KPI Cards Row -->
            <div class="kpi-row">
                <div class="kpi-card">
                    <div class="kpi-icon">üí∞</div>
                    <div class="kpi-value" style="color: #C4D600">$10.79M</div>
                    <div class="kpi-label">Total Inflow</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üí∏</div>
                    <div class="kpi-value" style="color: #D0006F">$10.56M</div>
                    <div class="kpi-label">Total Outflow</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üìä</div>
                    <div class="kpi-value" style="color: #003865">$220.4K</div>
                    <div class="kpi-label">Net Position</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üìà</div>
                    <div class="kpi-value" style="color: #68D2DF">$-718.6K</div>
                    <div class="kpi-label">1-Month Forecast</div>
                </div>
            </div>

            <!-- Main Charts Section -->
            <div class="charts-grid">
                <!-- Backtest Chart -->
                <div class="chart-container full-width">
                    <h3>üîç Backtest: Actual vs Forecast (Last 4 Weeks)</h3>
                    <p class="chart-description">Comparing model predictions against actual cash flows to evaluate forecast accuracy.</p>
                    <div id="backtest-ID10" class="chart"></div>
                    <div class="metrics-row">
                        <div class="metric">
                            <span class="metric-label">MAE</span>
                            <span class="metric-value">$59.8K</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">RMSE</span>
                            <span class="metric-value">$67.9K</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">MAPE</span>
                            <span class="metric-value">169.5%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Direction Accuracy</span>
                            <span class="metric-value">100.0%</span>
                        </div>
                    </div>
                </div>

                <!-- Inflow/Outflow Chart -->
                <div class="chart-container full-width">
                    <h3>üíπ Cash Flow Overview: Inflow vs Outflow</h3>
                    <p class="chart-description">Weekly breakdown of cash inflows and outflows across the historical period.</p>
                    <div id="inflow-outflow-ID10" class="chart"></div>
                </div>

                <!-- Short-term Forecast -->
                <div class="chart-container">
                    <h3>üìÖ 1-Month Ahead Forecast</h3>
                    <p class="chart-description">Weekly cash flow predictions for the next 4 weeks based on Ridge model.</p>
                    <div id="short-forecast-ID10" class="chart"></div>
                    <div class="insight-box" style="border-left-color: #D0006F">
                        <div class="insight-header">
                            <span class="status-badge" style="background: #D0006F">‚ö†Ô∏è At Risk</span>
                            <strong>Short-term Liquidity Assessment</strong>
                        </div>
                        <p>Expected net outflow of $718.6K over the next month. Monitor closely.</p>
                    </div>
                </div>

                <!-- Long-term Forecast -->
                <div class="chart-container">
                    <h3>üìÜ 6-Month Ahead Forecast (Iterative Month-by-Month)</h3>
                    <p class="chart-description">Each month's forecast uses previous months' predictions as input features, building iteratively.</p>
                    <div id="long-forecast-ID10" class="chart"></div>
                    <div class="insight-box" style="border-left-color: #D0006F">
                        <div class="insight-header">
                            <span class="status-badge" style="background: #D0006F">Needs Attention</span>
                            <strong>Long-term Sustainability</strong>
                        </div>
                        <p>6-month forecasted total: $-1.22M. Consider strategic adjustments.</p>
                    </div>
                </div>
            </div>

            <!-- Month-by-Month Forecast Breakdown -->
            <div class="monthly-breakdown">
                <h3>üìä Month-by-Month Forecast Breakdown</h3>
                <p class="chart-description">Iterative forecasting: each month's prediction feeds into the next month's features, creating a cascading forecast.</p>
                <div class="monthly-grid">
                    
                    <div class="monthly-card" style="border-top: 4px solid #68D2DF">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #68D2DF">Month 1</span>
                            <span class="month-dates">2025-11-05 ‚Üí 2025-11-26</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$-10.8K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$-10.8K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #ef4444">$-18.5K</span><span class="week-val" style="color: #ef4444">$-50.1K</span><span class="week-val" style="color: #22c55e">$850</span><span class="week-val" style="color: #22c55e">$57.0K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #C4D600">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #C4D600">Month 2</span>
                            <span class="month-dates">2025-12-03 ‚Üí 2025-12-24</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$-48.6K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$-59.3K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #ef4444">$-61.0K</span><span class="week-val" style="color: #ef4444">$-55.7K</span><span class="week-val" style="color: #22c55e">$54.9K</span><span class="week-val" style="color: #22c55e">$13.1K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #F0AB00">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #F0AB00">Month 3</span>
                            <span class="month-dates">2025-12-31 ‚Üí 2026-01-21</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$-283.3K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$-342.7K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #ef4444">$-53.4K</span><span class="week-val" style="color: #ef4444">$-72.8K</span><span class="week-val" style="color: #ef4444">$-96.8K</span><span class="week-val" style="color: #ef4444">$-60.4K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #D0006F">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #D0006F">Month 4</span>
                            <span class="month-dates">2026-01-28 ‚Üí 2026-02-18</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$-654.3K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$-996.9K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #ef4444">$-246.2K</span><span class="week-val" style="color: #ef4444">$-160.9K</span><span class="week-val" style="color: #ef4444">$-45.4K</span><span class="week-val" style="color: #ef4444">$-201.8K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #3C1053">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #3C1053">Month 5</span>
                            <span class="month-dates">2026-02-25 ‚Üí 2026-03-18</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$-63.1K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$-1.06M</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #22c55e">$104.8K</span><span class="week-val" style="color: #ef4444">$-72.7K</span><span class="week-val" style="color: #ef4444">$-57.0K</span><span class="week-val" style="color: #ef4444">$-38.3K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #830051">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #830051">Month 6</span>
                            <span class="month-dates">2026-03-25 ‚Üí 2026-04-15</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$-162.3K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$-1.22M</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #ef4444">$-209.5K</span><span class="week-val" style="color: #22c55e">$56.2K</span><span class="week-val" style="color: #ef4444">$-17.7K</span><span class="week-val" style="color: #22c55e">$8.7K</span>
                        </div>
                    </div>
                    
                </div>
                <div id="monthly-chart-ID10" class="chart" style="margin-top: 1.5rem;"></div>
            </div>

            <!-- Category Analysis -->
            <div class="category-analysis">
                <h3>üè∑Ô∏è Key Cash Flow Drivers</h3>
                <div class="category-grid">
                    <div class="category-box inflow">
                        <h4>Top Inflow Categories</h4>
                        <ul>
                            <li><span class="cat-name">AR</span><span class="cat-value">$7.13M</span></li><li><span class="cat-name">Loan receipt</span><span class="cat-value">$2.36M</span></li><li><span class="cat-name">Netting AR</span><span class="cat-value">$413.6K</span></li>
                        </ul>
                    </div>
                    <div class="category-box outflow">
                        <h4>Top Outflow Categories</h4>
                        <ul>
                            <li><span class="cat-name">Interest income</span><span class="cat-value">-$1</span></li><li><span class="cat-name">Bank charges</span><span class="cat-value">-$5.9K</span></li><li><span class="cat-name">Tax payable</span><span class="cat-value">-$137.1K</span></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Model Performance Table -->
            <div class="model-comparison">
                <h3>ü§ñ Model Performance Comparison</h3>
                <table class="model-table">
                    <thead>
                        <tr>
                            <th>Model</th>
                            <th>MAE</th>
                            <th>RMSE</th>
                            <th>MAPE (%)</th>
                            <th>Direction Acc (%)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="">
                            <td>XGBoost </td>
                            <td>$119.9K</td>
                            <td>$184.7K</td>
                            <td>128.0</td>
                            <td>100.0</td>
                        </tr><tr class="">
                            <td>LightGBM </td>
                            <td>$236.0K</td>
                            <td>$328.0K</td>
                            <td>101.3</td>
                            <td>0.0</td>
                        </tr><tr class="">
                            <td>RandomForest </td>
                            <td>$118.8K</td>
                            <td>$177.1K</td>
                            <td>266.9</td>
                            <td>100.0</td>
                        </tr><tr class="">
                            <td>GradientBoosting </td>
                            <td>$105.2K</td>
                            <td>$164.7K</td>
                            <td>169.4</td>
                            <td>100.0</td>
                        </tr><tr class="best-model">
                            <td>Ridge ‚≠ê</td>
                            <td>$59.8K</td>
                            <td>$67.9K</td>
                            <td>169.5</td>
                            <td>100.0</td>
                        </tr><tr class="">
                            <td>Ensemble </td>
                            <td>$98.8K</td>
                            <td>$140.2K</td>
                            <td>166.7</td>
                            <td>100.0</td>
                        </tr>
                    </tbody>
                </table>
                <div style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px; font-size: 0.85rem; color: #555;">
                    <strong>üìä Metric Definitions:</strong>
                    <ul style="margin: 0.5rem 0 0 1.5rem; line-height: 1.6;">
                        <li><strong>MAE</strong> (Mean Absolute Error): Average dollar difference between predicted and actual values ‚Äî lower is better.</li>
                        <li><strong>RMSE</strong> (Root Mean Square Error): Similar to MAE but penalizes large errors more heavily ‚Äî lower is better.</li>
                        <li><strong>MAPE</strong> (Mean Absolute Percentage Error): Average percentage error relative to actual values ‚Äî lower is better.</li>
                        <li><strong>Direction Acc</strong> (Direction Accuracy): Percentage of times the model correctly predicted if cash flow would go up or down ‚Äî higher is better.</li>
                    </ul>
                </div>
            </div>
        </div>

        <script>
        // Backtest Chart
        Plotly.newPlot('backtest-ID10', [
            {
                x: ["2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-51693.447179999996, -6168.28617000001, -309062.31998, 576340.69672],
                type: 'scatter',
                mode: 'lines+markers',
                name: '‚úì Actual Values',
                line: {color: '#003865', width: 4},
                marker: {size: 14, symbol: 'circle'},
                hovertemplate: '<b>Actual</b><br>Date: %{x}<br>Value: $%{y:,.0f}<extra></extra>'
            },
            {
                x: ["2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-19097.99955396754, 29391.05162017056, -251218.0406887778, 463250.2643910675],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üîÆ Model Prediction',
                line: {color: '#F0AB00', width: 4, dash: 'dash'},
                marker: {size: 12, symbol: 'diamond'},
                hovertemplate: '<b>Prediction</b><br>Date: %{x}<br>Predicted: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 350,
            margin: {t: 50, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -30,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Net Cash Flow (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 11}
            },
            hovermode: 'x unified',
            shapes: [{type: 'line', x0: '2025-10-08', x1: '2025-10-29', y0: 0, y1: 0, line: {color: '#888', width: 1, dash: 'dot'}}],
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Inflow/Outflow Chart
        Plotly.newPlot('inflow-outflow-ID10', [
            {
                x: ["2025-01-01", "2025-01-08", "2025-01-15", "2025-01-22", "2025-01-29", "2025-02-05", "2025-02-12", "2025-02-19", "2025-02-26", "2025-03-05", "2025-03-12", "2025-03-19", "2025-03-26", "2025-04-02", "2025-04-09", "2025-04-16", "2025-04-23", "2025-04-30", "2025-05-07", "2025-05-14", "2025-05-21", "2025-05-28", "2025-06-04", "2025-06-11", "2025-06-18", "2025-06-25", "2025-07-02", "2025-07-09", "2025-07-16", "2025-07-23", "2025-07-30", "2025-08-06", "2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [1.27965, 2.42242, 107716.15766000001, 68295.82752, 466609.00898, 1.31397, 150148.1, 233357.56, 516995.84667999996, 24.3952, 132114.6615, 234841.89884, 99575.65675, 490450.38, 105272.95777, 248826.52596, 310282.32314, 325604.75852000003, 483.93021000000005, 112912.24556000001, 247415.6149, 819963.8353500001, 206751.1238, 15.76302, 248061.91775999998, 832381.2899999999, 57588.446840000004, 65.06591, 187103.01901000002, 220585.02071, 524961.53069, 29.48537, 134975.58451, 462151.24073, 558613.36974, 34.58991999999999, 96424.57346999999, 344030.40018, 564755.21716, 11024.635129999999, 53.58749, 111238.13157, 459407.59706, 1094112.45],
                type: 'bar',
                name: '‚Üë Inflow',
                marker: {color: '#C4D600', line: {color: 'rgba(0,0,0,0.2)', width: 1}},
                hovertemplate: '<b>Inflow</b><br>Date: %{x}<br>Amount: $%{y:,.0f}<extra></extra>'
            },
            {
                x: ["2025-01-01", "2025-01-08", "2025-01-15", "2025-01-22", "2025-01-29", "2025-02-05", "2025-02-12", "2025-02-19", "2025-02-26", "2025-03-05", "2025-03-12", "2025-03-19", "2025-03-26", "2025-04-02", "2025-04-09", "2025-04-16", "2025-04-23", "2025-04-30", "2025-05-07", "2025-05-14", "2025-05-21", "2025-05-28", "2025-06-04", "2025-06-11", "2025-06-18", "2025-06-25", "2025-07-02", "2025-07-09", "2025-07-16", "2025-07-23", "2025-07-30", "2025-08-06", "2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-57653.639599999995, -57824.78521, -113587.47244000001, -426969.3094100001, -87626.14769, -85753.11262, -61279.04136, -470201.02888999996, -229904.80472000001, -46506.08982, -102110.57330999999, -158131.71765000004, -456225.8181000001, -297919.02164999995, -59054.433419999994, -95182.64334, -357342.13438999996, -216051.91887, -97861.9175, -39802.513609999995, -486579.84717, -704802.4997100001, -49952.26464000001, -81092.21755, -127385.09881000001, -769134.25065, -253666.68374999997, -59166.10278, -101201.01705999998, -407073.93692000007, -232288.55675000002, -67461.33946, -51341.13134, -666156.9740500001, -448787.22639, -54936.697060000006, -100148.92185000001, -143641.75244999997, -408563.39985, -379131.1494, -51747.034669999994, -117406.41774, -768469.9170400001, -517771.75328],
                type: 'bar',
                name: '‚Üì Outflow',
                marker: {color: '#D0006F', line: {color: 'rgba(0,0,0,0.2)', width: 1}},
                hovertemplate: '<b>Outflow</b><br>Date: %{x}<br>Amount: $%{y:,.0f}<extra></extra>'
            },
            {
                x: ["2025-01-01", "2025-01-08", "2025-01-15", "2025-01-22", "2025-01-29", "2025-02-05", "2025-02-12", "2025-02-19", "2025-02-26", "2025-03-05", "2025-03-12", "2025-03-19", "2025-03-26", "2025-04-02", "2025-04-09", "2025-04-16", "2025-04-23", "2025-04-30", "2025-05-07", "2025-05-14", "2025-05-21", "2025-05-28", "2025-06-04", "2025-06-11", "2025-06-18", "2025-06-25", "2025-07-02", "2025-07-09", "2025-07-16", "2025-07-23", "2025-07-30", "2025-08-06", "2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-57652.35995, -57822.36279000001, -5871.314779999998, -358673.4818900001, 378982.86129, -85751.79865000001, 88869.05863999994, -236843.46889, 287091.04196, -46481.694619999995, 30004.08819000001, 76710.18118999999, -356650.16134999995, 192531.35834999997, 46218.52434999997, 153643.88262000002, -47059.81125, 109552.83964999998, -97377.98728999999, 73109.73195000003, -239164.23227000004, 115161.33563999996, 156798.85916000002, -81076.45453000002, 120676.81895000004, 63247.03934999997, -196078.23690999998, -59101.036869999996, 85902.00195000003, -186488.91621, 292672.97394, -67431.85409000001, 83634.45316999998, -204005.7333199999, 109826.14335, -54902.10714000001, -3724.348380000003, 200388.64773000003, 156191.81731000004, -368106.51427000004, -51693.447179999996, -6168.28617000001, -309062.31998, 576340.69672],
                type: 'scatter',
                mode: 'lines+markers',
                name: '‚Äî Net Cash Flow',
                line: {color: '#003865', width: 3},
                marker: {size: 6},
                hovertemplate: '<b>Net</b><br>Date: %{x}<br>Amount: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 400,
            barmode: 'relative',
            margin: {t: 50, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -45,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Amount (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 11}
            },
            hovermode: 'x unified',
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Short-term Forecast Chart
        var lastHistDate = '2025-10-29';
        var lastHistVal = 576340.69672;
        Plotly.newPlot('short-forecast-ID10', [
            {
                x: ["2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-3724.348380000003, 200388.64773000003, 156191.81731000004, -368106.51427000004, -51693.447179999996, -6168.28617000001, -309062.31998, 576340.69672],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üìä Historical (Last 8 Weeks)',
                line: {color: '#003865', width: 3},
                marker: {size: 10},
                hovertemplate: '<b>Historical</b><br>Date: %{x}<br>Net: $%{y:,.0f}<extra></extra>'
            },
            {
                x: [lastHistDate].concat(["2025-11-05", "2025-11-12", "2025-11-19", "2025-11-26"]),
                y: [lastHistVal].concat([-360607.9018853579, -108748.32990577274, -103825.80540677799, -145438.0057560231]),
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üîÆ 1-Month Forecast',
                line: {color: '#68D2DF', width: 4},
                marker: {size: 12, symbol: 'diamond'},
                fill: 'tozeroy',
                fillcolor: 'rgba(104, 210, 223, 0.2)',
                hovertemplate: '<b>Forecast</b><br>Date: %{x}<br>Predicted: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 320,
            margin: {t: 50, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -30,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Net Cash Flow (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 10}
            },
            hovermode: 'x unified',
            shapes: [{type: 'line', x0: lastHistDate, x1: lastHistDate, y0: 0, y1: 0, yref: 'paper', line: {color: '#888', width: 2, dash: 'dash'}}],
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Long-term Forecast Chart (Month-by-Month with different colors)
        var longForecastTraces = [
            {
                x: ["2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [83634.45316999998, -204005.7333199999, 109826.14335, -54902.10714000001, -3724.348380000003, 200388.64773000003, 156191.81731000004, -368106.51427000004, -51693.447179999996, -6168.28617000001, -309062.31998, 576340.69672],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üìä Historical',
                line: {color: '#003865', width: 3},
                marker: {size: 8},
                hovertemplate: '<b>Historical</b><br>Date: %{x}<br>Net: $%{y:,.0f}<extra></extra>'
            }
        ];
        
        // Add each month as a separate trace with different colors
        var monthColors = ['#68D2DF', '#C4D600', '#F0AB00', '#D0006F', '#3C1053', '#830051'];
        var monthNames = ['Nov', 'Dec', 'Jan', 'Feb', 'Mar', 'Apr'];
        var monthlyData = [{"month_num": 1, "dates": ["2025-11-05", "2025-11-12", "2025-11-19", "2025-11-26"], "predictions": [-18521.340214360644, -50088.22736152394, 850.4971170615245, 56979.515573329], "total": -10779.554885494057, "cumulative": -10779.554885494057, "color": "#68D2DF"}, {"month_num": 2, "dates": ["2025-12-03", "2025-12-10", "2025-12-17", "2025-12-24"], "predictions": [-60958.77027936267, -55655.021575703766, 54938.953473621805, 13106.29073635054], "total": -48568.54764509409, "cumulative": -59348.10253058815, "color": "#C4D600"}, {"month_num": 3, "dates": ["2025-12-31", "2026-01-07", "2026-01-14", "2026-01-21"], "predictions": [-53411.37662310896, -72767.35529810034, -96772.33980009543, -60366.03986210571], "total": -283317.1115834104, "cumulative": -342665.2141139986, "color": "#F0AB00"}, {"month_num": 4, "dates": ["2026-01-28", "2026-02-04", "2026-02-11", "2026-02-18"], "predictions": [-246198.6662304913, -160925.54152554803, -45381.65064072927, -201752.61999431212], "total": -654258.4783910807, "cumulative": -996923.6925050793, "color": "#D0006F"}, {"month_num": 5, "dates": ["2026-02-25", "2026-03-04", "2026-03-11", "2026-03-18"], "predictions": [104830.59623352293, -72693.38350858774, -56984.38450225754, -38298.29596752214], "total": -63145.46774484449, "cumulative": -1060069.1602499238, "color": "#3C1053"}, {"month_num": 6, "dates": ["2026-03-25", "2026-04-01", "2026-04-08", "2026-04-15"], "predictions": [-209458.32461445386, 56222.98756322681, -17746.633219834213, 8687.26398055433], "total": -162294.70629050693, "cumulative": -1222363.8665404308, "color": "#830051"}];
        var prevEndDate = lastHistDate;
        var prevEndVal = lastHistVal;
        
        monthlyData.forEach(function(month, idx) {
            var xVals = [prevEndDate].concat(month.dates);
            var yVals = [prevEndVal].concat(month.predictions);
            var monthTotal = month.total;
            var sign = monthTotal >= 0 ? '+' : '';
            longForecastTraces.push({
                x: xVals,
                y: yVals,
                type: 'scatter',
                mode: 'lines+markers',
                name: 'M' + month.month_num + ' (' + sign + (monthTotal/1000).toFixed(0) + 'K)',
                line: {color: monthColors[idx], width: 3},
                marker: {size: 8, symbol: 'circle'},
                fill: 'tozeroy',
                fillcolor: monthColors[idx] + '15',
                hovertemplate: '<b>Month ' + month.month_num + '</b><br>Date: %{x}<br>Net: $%{y:,.0f}<extra></extra>'
            });
            prevEndDate = month.dates[month.dates.length - 1];
            prevEndVal = month.predictions[month.predictions.length - 1];
        });
        
        Plotly.newPlot('long-forecast-ID10', longForecastTraces, {
            height: 380,
            margin: {t: 60, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -30,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Net Cash Flow (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.15,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ccc',
                borderwidth: 1,
                font: {size: 10},
                itemwidth: 40
            },
            hovermode: 'x unified',
            shapes: [{
                type: 'line',
                x0: lastHistDate,
                x1: lastHistDate,
                y0: 0,
                y1: 1,
                yref: 'paper',
                line: {color: '#888', width: 2, dash: 'dash'}
            }],
            annotations: [{
                x: lastHistDate,
                y: 1.02,
                yref: 'paper',
                text: 'Forecast ‚Üí',
                showarrow: false,
                font: {size: 10, color: '#666'}
            }],
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Monthly Summary Bar Chart
        var monthlyTotals = monthlyData.map(m => m.total);
        var monthlyLabels = monthlyData.map(m => 'Month ' + m.month_num);
        var monthlyBarColors = monthlyTotals.map((v, i) => v >= 0 ? monthColors[i] : '#D0006F');
        
        // Calculate y-axis range to accommodate text labels
        var maxVal = Math.max(...monthlyTotals);
        var minVal = Math.min(...monthlyTotals);
        var yPadding = Math.max(Math.abs(maxVal), Math.abs(minVal)) * 0.25;
        var yMin = minVal < 0 ? minVal - yPadding : Math.min(0, minVal);
        var yMax = maxVal > 0 ? maxVal + yPadding : Math.max(0, maxVal);
        
        Plotly.newPlot('monthly-chart-ID10', [
            {
                x: monthlyLabels,
                y: monthlyTotals,
                type: 'bar',
                name: 'Monthly Net',
                marker: {
                    color: monthlyBarColors,
                    line: {color: 'rgba(0,0,0,0.3)', width: 1}
                },
                text: monthlyTotals.map(v => v >= 0 ? '+' + (v/1000).toFixed(0) + 'K' : (v/1000).toFixed(0) + 'K'),
                textposition: 'outside',
                textfont: {size: 11, color: '#333', family: 'Inter, sans-serif', weight: 600},
                cliponaxis: false,
                constraintext: 'none',
                hovertemplate: '<b>%{x}</b><br>Net: $%{y:,.0f}<extra></extra>'
            },
            {
                x: monthlyLabels,
                y: monthlyData.map(m => m.cumulative),
                type: 'scatter',
                mode: 'lines+markers',
                name: 'Cumulative Total',
                yaxis: 'y2',
                line: {color: '#003865', width: 3},
                marker: {size: 10, symbol: 'circle'},
                hovertemplate: '<b>%{x}</b><br>Cumulative: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 380,
            margin: {t: 80, b: 60, l: 80, r: 80},
            xaxis: {
                title: {text: 'Forecast Period', font: {size: 12, color: '#666'}},
                tickfont: {size: 11}
            },
            yaxis: {
                title: {text: 'Monthly Net (USD)', font: {size: 12, color: '#830051'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2,
                range: [yMin, yMax]
            },
            yaxis2: {
                title: {text: 'Cumulative (USD)', font: {size: 12, color: '#003865'}},
                overlaying: 'y',
                side: 'right',
                tickformat: ',.0f',
                tickfont: {size: 10}
            },
            showlegend: true,
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 11}
            },
            hovermode: 'x unified',
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});
        </script>
        
        <div class="entity-section" id="SS10">
            <div class="entity-header">
                <h2><span class="entity-badge">SS10</span> Cash Flow Analysis</h2>
                <div class="model-badge">Best Model: <strong>Ensemble</strong></div>
            </div>

            <!-- KPI Cards Row -->
            <div class="kpi-row">
                <div class="kpi-card">
                    <div class="kpi-icon">üí∞</div>
                    <div class="kpi-value" style="color: #C4D600">$1.61M</div>
                    <div class="kpi-label">Total Inflow</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üí∏</div>
                    <div class="kpi-value" style="color: #D0006F">$1.36M</div>
                    <div class="kpi-label">Total Outflow</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üìä</div>
                    <div class="kpi-value" style="color: #003865">$254.6K</div>
                    <div class="kpi-label">Net Position</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üìà</div>
                    <div class="kpi-value" style="color: #68D2DF">$57.0K</div>
                    <div class="kpi-label">1-Month Forecast</div>
                </div>
            </div>

            <!-- Main Charts Section -->
            <div class="charts-grid">
                <!-- Backtest Chart -->
                <div class="chart-container full-width">
                    <h3>üîç Backtest: Actual vs Forecast (Last 4 Weeks)</h3>
                    <p class="chart-description">Comparing model predictions against actual cash flows to evaluate forecast accuracy.</p>
                    <div id="backtest-SS10" class="chart"></div>
                    <div class="metrics-row">
                        <div class="metric">
                            <span class="metric-label">MAE</span>
                            <span class="metric-value">$2.1K</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">RMSE</span>
                            <span class="metric-value">$2.6K</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">MAPE</span>
                            <span class="metric-value">200.5%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Direction Accuracy</span>
                            <span class="metric-value">100.0%</span>
                        </div>
                    </div>
                </div>

                <!-- Inflow/Outflow Chart -->
                <div class="chart-container full-width">
                    <h3>üíπ Cash Flow Overview: Inflow vs Outflow</h3>
                    <p class="chart-description">Weekly breakdown of cash inflows and outflows across the historical period.</p>
                    <div id="inflow-outflow-SS10" class="chart"></div>
                </div>

                <!-- Short-term Forecast -->
                <div class="chart-container">
                    <h3>üìÖ 1-Month Ahead Forecast</h3>
                    <p class="chart-description">Weekly cash flow predictions for the next 4 weeks based on Ensemble model.</p>
                    <div id="short-forecast-SS10" class="chart"></div>
                    <div class="insight-box" style="border-left-color: #C4D600">
                        <div class="insight-header">
                            <span class="status-badge" style="background: #C4D600">‚úÖ Stable</span>
                            <strong>Short-term Liquidity Assessment</strong>
                        </div>
                        <p>Healthy cash position expected. Net inflow forecast: $57.0K</p>
                    </div>
                </div>

                <!-- Long-term Forecast -->
                <div class="chart-container">
                    <h3>üìÜ 6-Month Ahead Forecast (Iterative Month-by-Month)</h3>
                    <p class="chart-description">Each month's forecast uses previous months' predictions as input features, building iteratively.</p>
                    <div id="long-forecast-SS10" class="chart"></div>
                    <div class="insight-box" style="border-left-color: #D0006F">
                        <div class="insight-header">
                            <span class="status-badge" style="background: #D0006F">Needs Attention</span>
                            <strong>Long-term Sustainability</strong>
                        </div>
                        <p>6-month forecasted total: $-31.0K. Consider strategic adjustments.</p>
                    </div>
                </div>
            </div>

            <!-- Month-by-Month Forecast Breakdown -->
            <div class="monthly-breakdown">
                <h3>üìä Month-by-Month Forecast Breakdown</h3>
                <p class="chart-description">Iterative forecasting: each month's prediction feeds into the next month's features, creating a cascading forecast.</p>
                <div class="monthly-grid">
                    
                    <div class="monthly-card" style="border-top: 4px solid #68D2DF">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #68D2DF">Month 1</span>
                            <span class="month-dates">2025-11-05 ‚Üí 2025-11-26</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$86.9K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$86.9K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #22c55e">$17.7K</span><span class="week-val" style="color: #ef4444">$-857</span><span class="week-val" style="color: #22c55e">$22.2K</span><span class="week-val" style="color: #22c55e">$47.8K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #C4D600">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #C4D600">Month 2</span>
                            <span class="month-dates">2025-12-03 ‚Üí 2025-12-24</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$67.8K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$154.7K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #ef4444">$-3.7K</span><span class="week-val" style="color: #ef4444">$-3.7K</span><span class="week-val" style="color: #22c55e">$49.5K</span><span class="week-val" style="color: #22c55e">$25.7K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #F0AB00">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #F0AB00">Month 3</span>
                            <span class="month-dates">2025-12-31 ‚Üí 2026-01-21</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$-3.5K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$151.2K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #ef4444">$-10.6K</span><span class="week-val" style="color: #22c55e">$7.2K</span><span class="week-val" style="color: #ef4444">$-19.5K</span><span class="week-val" style="color: #22c55e">$19.3K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #D0006F">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #D0006F">Month 4</span>
                            <span class="month-dates">2026-01-28 ‚Üí 2026-02-18</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$-9.0K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$142.2K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #22c55e">$98.5K</span><span class="week-val" style="color: #ef4444">$-33.5K</span><span class="week-val" style="color: #ef4444">$-30.3K</span><span class="week-val" style="color: #ef4444">$-43.7K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #3C1053">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #3C1053">Month 5</span>
                            <span class="month-dates">2026-02-25 ‚Üí 2026-03-18</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$-143.4K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$-1.2K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #ef4444">$-10.8K</span><span class="week-val" style="color: #22c55e">$13.5K</span><span class="week-val" style="color: #ef4444">$-12.1K</span><span class="week-val" style="color: #ef4444">$-133.9K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #830051">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #830051">Month 6</span>
                            <span class="month-dates">2026-03-25 ‚Üí 2026-04-15</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$-29.8K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$-31.0K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #ef4444">$-41.0K</span><span class="week-val" style="color: #ef4444">$-9.1K</span><span class="week-val" style="color: #22c55e">$45.5K</span><span class="week-val" style="color: #ef4444">$-25.2K</span>
                        </div>
                    </div>
                    
                </div>
                <div id="monthly-chart-SS10" class="chart" style="margin-top: 1.5rem;"></div>
            </div>

            <!-- Category Analysis -->
            <div class="category-analysis">
                <h3>üè∑Ô∏è Key Cash Flow Drivers</h3>
                <div class="category-grid">
                    <div class="category-box inflow">
                        <h4>Top Inflow Categories</h4>
                        <ul>
                            <li><span class="cat-name">Netting AR</span><span class="cat-value">$1.18M</span></li><li><span class="cat-name">Nonting AR</span><span class="cat-value">$232.8K</span></li><li><span class="cat-name">Other receipt</span><span class="cat-value">$202.0K</span></li>
                        </ul>
                    </div>
                    <div class="category-box outflow">
                        <h4>Top Outflow Categories</h4>
                        <ul>
                            <li><span class="cat-name">Bank charges</span><span class="cat-value">-$157</span></li><li><span class="cat-name">Netting AP</span><span class="cat-value">-$6.0K</span></li><li><span class="cat-name">AP</span><span class="cat-value">-$321.4K</span></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Model Performance Table -->
            <div class="model-comparison">
                <h3>ü§ñ Model Performance Comparison</h3>
                <table class="model-table">
                    <thead>
                        <tr>
                            <th>Model</th>
                            <th>MAE</th>
                            <th>RMSE</th>
                            <th>MAPE (%)</th>
                            <th>Direction Acc (%)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="">
                            <td>XGBoost </td>
                            <td>$4.2K</td>
                            <td>$6.2K</td>
                            <td>495.3</td>
                            <td>100.0</td>
                        </tr><tr class="">
                            <td>LightGBM </td>
                            <td>$24.3K</td>
                            <td>$36.6K</td>
                            <td>439.3</td>
                            <td>0.0</td>
                        </tr><tr class="">
                            <td>RandomForest </td>
                            <td>$7.3K</td>
                            <td>$8.5K</td>
                            <td>425.4</td>
                            <td>100.0</td>
                        </tr><tr class="">
                            <td>GradientBoosting </td>
                            <td>$6.6K</td>
                            <td>$9.7K</td>
                            <td>206.9</td>
                            <td>100.0</td>
                        </tr><tr class="">
                            <td>Ridge </td>
                            <td>$1.8K</td>
                            <td>$3.0K</td>
                            <td>23.8</td>
                            <td>100.0</td>
                        </tr><tr class="best-model">
                            <td>Ensemble ‚≠ê</td>
                            <td>$2.1K</td>
                            <td>$2.6K</td>
                            <td>200.5</td>
                            <td>100.0</td>
                        </tr>
                    </tbody>
                </table>
                <div style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px; font-size: 0.85rem; color: #555;">
                    <strong>üìä Metric Definitions:</strong>
                    <ul style="margin: 0.5rem 0 0 1.5rem; line-height: 1.6;">
                        <li><strong>MAE</strong> (Mean Absolute Error): Average dollar difference between predicted and actual values ‚Äî lower is better.</li>
                        <li><strong>RMSE</strong> (Root Mean Square Error): Similar to MAE but penalizes large errors more heavily ‚Äî lower is better.</li>
                        <li><strong>MAPE</strong> (Mean Absolute Percentage Error): Average percentage error relative to actual values ‚Äî lower is better.</li>
                        <li><strong>Direction Acc</strong> (Direction Accuracy): Percentage of times the model correctly predicted if cash flow would go up or down ‚Äî higher is better.</li>
                    </ul>
                </div>
            </div>
        </div>

        <script>
        // Backtest Chart
        Plotly.newPlot('backtest-SS10', [
            {
                x: ["2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-8816.00367, 6757.5143400000015, -62652.16125999999, -598.9863500000001],
                type: 'scatter',
                mode: 'lines+markers',
                name: '‚úì Actual Values',
                line: {color: '#003865', width: 4},
                marker: {size: 14, symbol: 'circle'},
                hovertemplate: '<b>Actual</b><br>Date: %{x}<br>Value: $%{y:,.0f}<extra></extra>'
            },
            {
                x: ["2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-8456.8837890625, 4851.84619140625, -61124.18359375, -5193.85498046875],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üîÆ Model Prediction',
                line: {color: '#F0AB00', width: 4, dash: 'dash'},
                marker: {size: 12, symbol: 'diamond'},
                hovertemplate: '<b>Prediction</b><br>Date: %{x}<br>Predicted: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 350,
            margin: {t: 50, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -30,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Net Cash Flow (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 11}
            },
            hovermode: 'x unified',
            shapes: [{type: 'line', x0: '2025-10-08', x1: '2025-10-29', y0: 0, y1: 0, line: {color: '#888', width: 1, dash: 'dot'}}],
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Inflow/Outflow Chart
        Plotly.newPlot('inflow-outflow-SS10', [
            {
                x: ["2025-01-01", "2025-01-08", "2025-01-15", "2025-01-22", "2025-01-29", "2025-02-05", "2025-02-12", "2025-02-19", "2025-02-26", "2025-03-05", "2025-03-12", "2025-03-19", "2025-03-26", "2025-04-02", "2025-04-09", "2025-04-16", "2025-04-23", "2025-04-30", "2025-05-07", "2025-05-14", "2025-05-21", "2025-05-28", "2025-06-04", "2025-06-11", "2025-06-18", "2025-06-25", "2025-07-02", "2025-07-09", "2025-07-16", "2025-07-23", "2025-07-30", "2025-08-06", "2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [4.8552, 213.26632999999998, 45473.05919, 217044.8246, 4208.6320000000005, 2.04659, 9.12421, 16.458, 20204.410000000003, 43361.52, 10365.15, 764.1764800000001, 7690.19912, 50.58441, 85318.38, 20.58668, 50.89533, 187.92, 0.0, 84855.23035, 525145.27886, 41408.868899999994, 2918.93336, 2044.65555, 50888.841420000004, 12486.539560000001, 30.81406, 63.77663, 32.5234, 6175.55512, 619.95184, 13106.59612, 0.0, 365073.93, 18353.44, 386.72884, 1001.4000000000001, 27039.010000000002, 13525.81752, 215.41843999999998, 413.98624, 12380.44, 0.0, 11.26073],
                type: 'bar',
                name: '‚Üë Inflow',
                marker: {color: '#C4D600', line: {color: 'rgba(0,0,0,0.2)', width: 1}},
                hovertemplate: '<b>Inflow</b><br>Date: %{x}<br>Amount: $%{y:,.0f}<extra></extra>'
            },
            {
                x: ["2025-01-01", "2025-01-08", "2025-01-15", "2025-01-22", "2025-01-29", "2025-02-05", "2025-02-12", "2025-02-19", "2025-02-26", "2025-03-05", "2025-03-12", "2025-03-19", "2025-03-26", "2025-04-02", "2025-04-09", "2025-04-16", "2025-04-23", "2025-04-30", "2025-05-07", "2025-05-14", "2025-05-21", "2025-05-28", "2025-06-04", "2025-06-11", "2025-06-18", "2025-06-25", "2025-07-02", "2025-07-09", "2025-07-16", "2025-07-23", "2025-07-30", "2025-08-06", "2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-803.08599, -20887.64107, -1400.39377, -58356.424150000006, -28524.333809999996, -8672.95264, -7941.58863, -58582.763139999995, -13017.41814, -28050.65885, -7959.332259999999, -189040.81826, -111389.30084, -9193.620949999997, -10640.538840000001, -6842.430240000001, -60037.88492, -31033.85116, -11240.26086, -6240.628159999999, -69157.28921, -37584.34176, -7578.23821, -4452.54106, -61223.73414, -3281.37974, -30180.737510000003, -12730.41146, -5255.291139999999, -83675.04225, -36233.42083, -9421.82697, -8241.26578, -52383.668789999996, -25935.72625, -42285.02726, -10795.438719999998, -1520.5685299999998, -79836.98124000001, -28817.128699999997, -9229.98991, -5622.925659999999, -62652.16125999999, -610.2470800000001],
                type: 'bar',
                name: '‚Üì Outflow',
                marker: {color: '#D0006F', line: {color: 'rgba(0,0,0,0.2)', width: 1}},
                hovertemplate: '<b>Outflow</b><br>Date: %{x}<br>Amount: $%{y:,.0f}<extra></extra>'
            },
            {
                x: ["2025-01-01", "2025-01-08", "2025-01-15", "2025-01-22", "2025-01-29", "2025-02-05", "2025-02-12", "2025-02-19", "2025-02-26", "2025-03-05", "2025-03-12", "2025-03-19", "2025-03-26", "2025-04-02", "2025-04-09", "2025-04-16", "2025-04-23", "2025-04-30", "2025-05-07", "2025-05-14", "2025-05-21", "2025-05-28", "2025-06-04", "2025-06-11", "2025-06-18", "2025-06-25", "2025-07-02", "2025-07-09", "2025-07-16", "2025-07-23", "2025-07-30", "2025-08-06", "2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-798.23079, -20674.374740000003, 44072.66542, 158688.40044999996, -24315.701809999995, -8670.90605, -7932.46442, -58566.30514, 7186.99186, 15310.861149999993, 2405.8177400000004, -188276.64178, -103699.10172, -9143.036540000001, 74677.84116000001, -6821.84356, -59986.98959, -30845.93116, -11240.26086, 78614.60218999999, 455987.98965, 3824.52714, -4659.3048499999995, -2407.88551, -10334.89272, 9205.15982, -30149.923450000002, -12666.634829999999, -5222.767739999999, -77499.48713000001, -35613.46899, 3684.76915, -8241.26578, 312690.26120999997, -7582.286250000001, -41898.29842, -9794.03872, 25518.441469999998, -66311.16372000001, -28601.710259999996, -8816.00367, 6757.5143400000015, -62652.16125999999, -598.9863500000001],
                type: 'scatter',
                mode: 'lines+markers',
                name: '‚Äî Net Cash Flow',
                line: {color: '#003865', width: 3},
                marker: {size: 6},
                hovertemplate: '<b>Net</b><br>Date: %{x}<br>Amount: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 400,
            barmode: 'relative',
            margin: {t: 50, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -45,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Amount (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 11}
            },
            hovermode: 'x unified',
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Short-term Forecast Chart
        var lastHistDate = '2025-10-29';
        var lastHistVal = -598.9863500000001;
        Plotly.newPlot('short-forecast-SS10', [
            {
                x: ["2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-9794.03872, 25518.441469999998, -66311.16372000001, -28601.710259999996, -8816.00367, 6757.5143400000015, -62652.16125999999, -598.9863500000001],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üìä Historical (Last 8 Weeks)',
                line: {color: '#003865', width: 3},
                marker: {size: 10},
                hovertemplate: '<b>Historical</b><br>Date: %{x}<br>Net: $%{y:,.0f}<extra></extra>'
            },
            {
                x: [lastHistDate].concat(["2025-11-05", "2025-11-12", "2025-11-19", "2025-11-26"]),
                y: [lastHistVal].concat([1133.5475866353318, -1907.282143388061, 30495.565076966526, 27251.162464682606]),
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üîÆ 1-Month Forecast',
                line: {color: '#68D2DF', width: 4},
                marker: {size: 12, symbol: 'diamond'},
                fill: 'tozeroy',
                fillcolor: 'rgba(104, 210, 223, 0.2)',
                hovertemplate: '<b>Forecast</b><br>Date: %{x}<br>Predicted: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 320,
            margin: {t: 50, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -30,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Net Cash Flow (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 10}
            },
            hovermode: 'x unified',
            shapes: [{type: 'line', x0: lastHistDate, x1: lastHistDate, y0: 0, y1: 0, yref: 'paper', line: {color: '#888', width: 2, dash: 'dash'}}],
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Long-term Forecast Chart (Month-by-Month with different colors)
        var longForecastTraces = [
            {
                x: ["2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-8241.26578, 312690.26120999997, -7582.286250000001, -41898.29842, -9794.03872, 25518.441469999998, -66311.16372000001, -28601.710259999996, -8816.00367, 6757.5143400000015, -62652.16125999999, -598.9863500000001],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üìä Historical',
                line: {color: '#003865', width: 3},
                marker: {size: 8},
                hovertemplate: '<b>Historical</b><br>Date: %{x}<br>Net: $%{y:,.0f}<extra></extra>'
            }
        ];
        
        // Add each month as a separate trace with different colors
        var monthColors = ['#68D2DF', '#C4D600', '#F0AB00', '#D0006F', '#3C1053', '#830051'];
        var monthNames = ['Nov', 'Dec', 'Jan', 'Feb', 'Mar', 'Apr'];
        var monthlyData = [{"month_num": 1, "dates": ["2025-11-05", "2025-11-12", "2025-11-19", "2025-11-26"], "predictions": [17742.97618680233, -857.4646288886142, 22165.472881052516, 47806.86949453036], "total": 86857.85393349659, "cumulative": 86857.85393349659, "color": "#68D2DF"}, {"month_num": 2, "dates": ["2025-12-03", "2025-12-10", "2025-12-17", "2025-12-24"], "predictions": [-3666.3458212035866, -3665.8648949068092, 49452.63841581399, 25673.201253409698], "total": 67793.6289531133, "cumulative": 154651.48288660988, "color": "#C4D600"}, {"month_num": 3, "dates": ["2025-12-31", "2026-01-07", "2026-01-14", "2026-01-21"], "predictions": [-10559.610486956735, 7188.520028454769, -19471.232690201363, 19343.127777037393], "total": -3499.1953716659373, "cumulative": 151152.28751494395, "color": "#F0AB00"}, {"month_num": 4, "dates": ["2026-01-28", "2026-02-04", "2026-02-11", "2026-02-18"], "predictions": [98477.78949077963, -33504.58270135155, -30302.665138730656, -43654.4893096286], "total": -8983.947658931182, "cumulative": 142168.33985601278, "color": "#D0006F"}, {"month_num": 5, "dates": ["2026-02-25", "2026-03-04", "2026-03-11", "2026-03-18"], "predictions": [-10801.403832542237, 13509.990022343547, -12135.050523230817, -133930.4645082001], "total": -143356.9288416296, "cumulative": -1188.588985616807, "color": "#3C1053"}, {"month_num": 6, "dates": ["2026-03-25", "2026-04-01", "2026-04-08", "2026-04-15"], "predictions": [-41031.9711882112, -9071.811944350738, 45516.60302708754, -25239.85389013535], "total": -29827.03399560975, "cumulative": -31015.622981226556, "color": "#830051"}];
        var prevEndDate = lastHistDate;
        var prevEndVal = lastHistVal;
        
        monthlyData.forEach(function(month, idx) {
            var xVals = [prevEndDate].concat(month.dates);
            var yVals = [prevEndVal].concat(month.predictions);
            var monthTotal = month.total;
            var sign = monthTotal >= 0 ? '+' : '';
            longForecastTraces.push({
                x: xVals,
                y: yVals,
                type: 'scatter',
                mode: 'lines+markers',
                name: 'M' + month.month_num + ' (' + sign + (monthTotal/1000).toFixed(0) + 'K)',
                line: {color: monthColors[idx], width: 3},
                marker: {size: 8, symbol: 'circle'},
                fill: 'tozeroy',
                fillcolor: monthColors[idx] + '15',
                hovertemplate: '<b>Month ' + month.month_num + '</b><br>Date: %{x}<br>Net: $%{y:,.0f}<extra></extra>'
            });
            prevEndDate = month.dates[month.dates.length - 1];
            prevEndVal = month.predictions[month.predictions.length - 1];
        });
        
        Plotly.newPlot('long-forecast-SS10', longForecastTraces, {
            height: 380,
            margin: {t: 60, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -30,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Net Cash Flow (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.15,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ccc',
                borderwidth: 1,
                font: {size: 10},
                itemwidth: 40
            },
            hovermode: 'x unified',
            shapes: [{
                type: 'line',
                x0: lastHistDate,
                x1: lastHistDate,
                y0: 0,
                y1: 1,
                yref: 'paper',
                line: {color: '#888', width: 2, dash: 'dash'}
            }],
            annotations: [{
                x: lastHistDate,
                y: 1.02,
                yref: 'paper',
                text: 'Forecast ‚Üí',
                showarrow: false,
                font: {size: 10, color: '#666'}
            }],
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Monthly Summary Bar Chart
        var monthlyTotals = monthlyData.map(m => m.total);
        var monthlyLabels = monthlyData.map(m => 'Month ' + m.month_num);
        var monthlyBarColors = monthlyTotals.map((v, i) => v >= 0 ? monthColors[i] : '#D0006F');
        
        // Calculate y-axis range to accommodate text labels
        var maxVal = Math.max(...monthlyTotals);
        var minVal = Math.min(...monthlyTotals);
        var yPadding = Math.max(Math.abs(maxVal), Math.abs(minVal)) * 0.25;
        var yMin = minVal < 0 ? minVal - yPadding : Math.min(0, minVal);
        var yMax = maxVal > 0 ? maxVal + yPadding : Math.max(0, maxVal);
        
        Plotly.newPlot('monthly-chart-SS10', [
            {
                x: monthlyLabels,
                y: monthlyTotals,
                type: 'bar',
                name: 'Monthly Net',
                marker: {
                    color: monthlyBarColors,
                    line: {color: 'rgba(0,0,0,0.3)', width: 1}
                },
                text: monthlyTotals.map(v => v >= 0 ? '+' + (v/1000).toFixed(0) + 'K' : (v/1000).toFixed(0) + 'K'),
                textposition: 'outside',
                textfont: {size: 11, color: '#333', family: 'Inter, sans-serif', weight: 600},
                cliponaxis: false,
                constraintext: 'none',
                hovertemplate: '<b>%{x}</b><br>Net: $%{y:,.0f}<extra></extra>'
            },
            {
                x: monthlyLabels,
                y: monthlyData.map(m => m.cumulative),
                type: 'scatter',
                mode: 'lines+markers',
                name: 'Cumulative Total',
                yaxis: 'y2',
                line: {color: '#003865', width: 3},
                marker: {size: 10, symbol: 'circle'},
                hovertemplate: '<b>%{x}</b><br>Cumulative: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 380,
            margin: {t: 80, b: 60, l: 80, r: 80},
            xaxis: {
                title: {text: 'Forecast Period', font: {size: 12, color: '#666'}},
                tickfont: {size: 11}
            },
            yaxis: {
                title: {text: 'Monthly Net (USD)', font: {size: 12, color: '#830051'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2,
                range: [yMin, yMax]
            },
            yaxis2: {
                title: {text: 'Cumulative (USD)', font: {size: 12, color: '#003865'}},
                overlaying: 'y',
                side: 'right',
                tickformat: ',.0f',
                tickfont: {size: 10}
            },
            showlegend: true,
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 11}
            },
            hovermode: 'x unified',
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});
        </script>
        
        <div class="entity-section" id="MY10">
            <div class="entity-header">
                <h2><span class="entity-badge">MY10</span> Cash Flow Analysis</h2>
                <div class="model-badge">Best Model: <strong>Ridge</strong></div>
            </div>

            <!-- KPI Cards Row -->
            <div class="kpi-row">
                <div class="kpi-card">
                    <div class="kpi-icon">üí∞</div>
                    <div class="kpi-value" style="color: #C4D600">$8.12M</div>
                    <div class="kpi-label">Total Inflow</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üí∏</div>
                    <div class="kpi-value" style="color: #D0006F">$9.70M</div>
                    <div class="kpi-label">Total Outflow</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üìä</div>
                    <div class="kpi-value" style="color: #003865">$-1.58M</div>
                    <div class="kpi-label">Net Position</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üìà</div>
                    <div class="kpi-value" style="color: #68D2DF">$-9.8K</div>
                    <div class="kpi-label">1-Month Forecast</div>
                </div>
            </div>

            <!-- Main Charts Section -->
            <div class="charts-grid">
                <!-- Backtest Chart -->
                <div class="chart-container full-width">
                    <h3>üîç Backtest: Actual vs Forecast (Last 4 Weeks)</h3>
                    <p class="chart-description">Comparing model predictions against actual cash flows to evaluate forecast accuracy.</p>
                    <div id="backtest-MY10" class="chart"></div>
                    <div class="metrics-row">
                        <div class="metric">
                            <span class="metric-label">MAE</span>
                            <span class="metric-value">$74.7K</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">RMSE</span>
                            <span class="metric-value">$98.1K</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">MAPE</span>
                            <span class="metric-value">75.4%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Direction Accuracy</span>
                            <span class="metric-value">100.0%</span>
                        </div>
                    </div>
                </div>

                <!-- Inflow/Outflow Chart -->
                <div class="chart-container full-width">
                    <h3>üíπ Cash Flow Overview: Inflow vs Outflow</h3>
                    <p class="chart-description">Weekly breakdown of cash inflows and outflows across the historical period.</p>
                    <div id="inflow-outflow-MY10" class="chart"></div>
                </div>

                <!-- Short-term Forecast -->
                <div class="chart-container">
                    <h3>üìÖ 1-Month Ahead Forecast</h3>
                    <p class="chart-description">Weekly cash flow predictions for the next 4 weeks based on Ridge model.</p>
                    <div id="short-forecast-MY10" class="chart"></div>
                    <div class="insight-box" style="border-left-color: #D0006F">
                        <div class="insight-header">
                            <span class="status-badge" style="background: #D0006F">‚ö†Ô∏è At Risk</span>
                            <strong>Short-term Liquidity Assessment</strong>
                        </div>
                        <p>Expected net outflow of $9.8K over the next month. Monitor closely.</p>
                    </div>
                </div>

                <!-- Long-term Forecast -->
                <div class="chart-container">
                    <h3>üìÜ 6-Month Ahead Forecast (Iterative Month-by-Month)</h3>
                    <p class="chart-description">Each month's forecast uses previous months' predictions as input features, building iteratively.</p>
                    <div id="long-forecast-MY10" class="chart"></div>
                    <div class="insight-box" style="border-left-color: #D0006F">
                        <div class="insight-header">
                            <span class="status-badge" style="background: #D0006F">Needs Attention</span>
                            <strong>Long-term Sustainability</strong>
                        </div>
                        <p>6-month forecasted total: $-989.3K. Consider strategic adjustments.</p>
                    </div>
                </div>
            </div>

            <!-- Month-by-Month Forecast Breakdown -->
            <div class="monthly-breakdown">
                <h3>üìä Month-by-Month Forecast Breakdown</h3>
                <p class="chart-description">Iterative forecasting: each month's prediction feeds into the next month's features, creating a cascading forecast.</p>
                <div class="monthly-grid">
                    
                    <div class="monthly-card" style="border-top: 4px solid #68D2DF">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #68D2DF">Month 1</span>
                            <span class="month-dates">2025-11-05 ‚Üí 2025-11-26</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$59.3K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$59.3K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #22c55e">$1.5K</span><span class="week-val" style="color: #ef4444">$-61.2K</span><span class="week-val" style="color: #22c55e">$16.4K</span><span class="week-val" style="color: #22c55e">$102.7K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #C4D600">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #C4D600">Month 2</span>
                            <span class="month-dates">2025-12-03 ‚Üí 2025-12-24</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$-1.7K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$57.6K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #ef4444">$-69.9K</span><span class="week-val" style="color: #ef4444">$-69.9K</span><span class="week-val" style="color: #22c55e">$109.1K</span><span class="week-val" style="color: #22c55e">$29.0K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #F0AB00">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #F0AB00">Month 3</span>
                            <span class="month-dates">2025-12-31 ‚Üí 2026-01-21</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$-238.7K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$-181.1K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #ef4444">$-93.1K</span><span class="week-val" style="color: #ef4444">$-21.5K</span><span class="week-val" style="color: #ef4444">$-57.2K</span><span class="week-val" style="color: #ef4444">$-66.8K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #D0006F">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #D0006F">Month 4</span>
                            <span class="month-dates">2026-01-28 ‚Üí 2026-02-18</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$-676.8K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$-857.9K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #22c55e">$15.9K</span><span class="week-val" style="color: #ef4444">$-155.7K</span><span class="week-val" style="color: #ef4444">$-126.1K</span><span class="week-val" style="color: #ef4444">$-411.0K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #3C1053">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #3C1053">Month 5</span>
                            <span class="month-dates">2026-02-25 ‚Üí 2026-03-18</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$-516</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$-858.4K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #22c55e">$324.5K</span><span class="week-val" style="color: #ef4444">$-46.9K</span><span class="week-val" style="color: #ef4444">$-97.1K</span><span class="week-val" style="color: #ef4444">$-180.9K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #830051">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #830051">Month 6</span>
                            <span class="month-dates">2026-03-25 ‚Üí 2026-04-15</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$-130.9K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$-989.3K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #22c55e">$101.3K</span><span class="week-val" style="color: #ef4444">$-61.0K</span><span class="week-val" style="color: #ef4444">$-56.2K</span><span class="week-val" style="color: #ef4444">$-115.0K</span>
                        </div>
                    </div>
                    
                </div>
                <div id="monthly-chart-MY10" class="chart" style="margin-top: 1.5rem;"></div>
            </div>

            <!-- Category Analysis -->
            <div class="category-analysis">
                <h3>üè∑Ô∏è Key Cash Flow Drivers</h3>
                <div class="category-grid">
                    <div class="category-box inflow">
                        <h4>Top Inflow Categories</h4>
                        <ul>
                            <li><span class="cat-name">AR</span><span class="cat-value">$8.06M</span></li><li><span class="cat-name">Nonting AR</span><span class="cat-value">$45.5K</span></li><li><span class="cat-name">Other receipt</span><span class="cat-value">$19.4K</span></li>
                        </ul>
                    </div>
                    <div class="category-box outflow">
                        <h4>Top Outflow Categories</h4>
                        <ul>
                            <li><span class="cat-name">Bank charges</span><span class="cat-value">-$129</span></li><li><span class="cat-name">Interest charges</span><span class="cat-value">-$15.2K</span></li><li><span class="cat-name">Nonting AP</span><span class="cat-value">-$93.8K</span></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Model Performance Table -->
            <div class="model-comparison">
                <h3>ü§ñ Model Performance Comparison</h3>
                <table class="model-table">
                    <thead>
                        <tr>
                            <th>Model</th>
                            <th>MAE</th>
                            <th>RMSE</th>
                            <th>MAPE (%)</th>
                            <th>Direction Acc (%)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="">
                            <td>XGBoost </td>
                            <td>$144.2K</td>
                            <td>$230.8K</td>
                            <td>23.3</td>
                            <td>100.0</td>
                        </tr><tr class="">
                            <td>LightGBM </td>
                            <td>$440.1K</td>
                            <td>$613.5K</td>
                            <td>72.0</td>
                            <td>0.0</td>
                        </tr><tr class="">
                            <td>RandomForest </td>
                            <td>$201.4K</td>
                            <td>$305.0K</td>
                            <td>33.0</td>
                            <td>100.0</td>
                        </tr><tr class="">
                            <td>GradientBoosting </td>
                            <td>$179.9K</td>
                            <td>$272.8K</td>
                            <td>22.9</td>
                            <td>100.0</td>
                        </tr><tr class="best-model">
                            <td>Ridge ‚≠ê</td>
                            <td>$74.7K</td>
                            <td>$98.1K</td>
                            <td>75.4</td>
                            <td>100.0</td>
                        </tr><tr class="">
                            <td>Ensemble </td>
                            <td>$135.1K</td>
                            <td>$203.5K</td>
                            <td>41.3</td>
                            <td>100.0</td>
                        </tr>
                    </tbody>
                </table>
                <div style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px; font-size: 0.85rem; color: #555;">
                    <strong>üìä Metric Definitions:</strong>
                    <ul style="margin: 0.5rem 0 0 1.5rem; line-height: 1.6;">
                        <li><strong>MAE</strong> (Mean Absolute Error): Average dollar difference between predicted and actual values ‚Äî lower is better.</li>
                        <li><strong>RMSE</strong> (Root Mean Square Error): Similar to MAE but penalizes large errors more heavily ‚Äî lower is better.</li>
                        <li><strong>MAPE</strong> (Mean Absolute Percentage Error): Average percentage error relative to actual values ‚Äî lower is better.</li>
                        <li><strong>Direction Acc</strong> (Direction Accuracy): Percentage of times the model correctly predicted if cash flow would go up or down ‚Äî higher is better.</li>
                    </ul>
                </div>
            </div>
        </div>

        <script>
        // Backtest Chart
        Plotly.newPlot('backtest-MY10', [
            {
                x: ["2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-47854.232050000006, -21735.80982, -925379.0575799999, 809093.7142800001],
                type: 'scatter',
                mode: 'lines+markers',
                name: '‚úì Actual Values',
                line: {color: '#003865', width: 4},
                marker: {size: 14, symbol: 'circle'},
                hovertemplate: '<b>Actual</b><br>Date: %{x}<br>Value: $%{y:,.0f}<extra></extra>'
            },
            {
                x: ["2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-34530.66532379765, 32139.7047320564, -744088.0053532129, 859382.6384521781],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üîÆ Model Prediction',
                line: {color: '#F0AB00', width: 4, dash: 'dash'},
                marker: {size: 12, symbol: 'diamond'},
                hovertemplate: '<b>Prediction</b><br>Date: %{x}<br>Predicted: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 350,
            margin: {t: 50, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -30,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Net Cash Flow (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 11}
            },
            hovermode: 'x unified',
            shapes: [{type: 'line', x0: '2025-10-08', x1: '2025-10-29', y0: 0, y1: 0, line: {color: '#888', width: 1, dash: 'dot'}}],
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Inflow/Outflow Chart
        Plotly.newPlot('inflow-outflow-MY10', [
            {
                x: ["2025-01-01", "2025-01-08", "2025-01-15", "2025-01-22", "2025-01-29", "2025-02-05", "2025-02-12", "2025-02-19", "2025-02-26", "2025-03-05", "2025-03-12", "2025-03-19", "2025-03-26", "2025-04-02", "2025-04-09", "2025-04-16", "2025-04-23", "2025-04-30", "2025-05-07", "2025-05-14", "2025-05-21", "2025-05-28", "2025-06-04", "2025-06-11", "2025-06-18", "2025-06-25", "2025-07-02", "2025-07-09", "2025-07-16", "2025-07-23", "2025-07-30", "2025-08-06", "2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [245.20666, 22924.744749999998, 14348.631519999999, 875678.049, 1.04574, 9.78402, 6837.900000000001, 14683.9886, 699443.2100000001, 89.31884, 0.0, 10.57124, 782450.6900000001, 8.2296, 252.41270999999998, 1245.25052, 773324.9990899999, 1.161, 0.0946, 0.0, 57383.47, 745433.32033, 0.1078, 347.95241, 335.47, 1145396.49, 274.24715000000003, 915.2698899999999, 152.47415, 640289.24671, 0.0, 130.67915, 40.03576, 442.79457, 786737.85567, 7414.501, 88.83619999999999, 0.0, 655229.64475, 0.0, 36.43704, 0.0, 74904.34516, 814086.53215],
                type: 'bar',
                name: '‚Üë Inflow',
                marker: {color: '#C4D600', line: {color: 'rgba(0,0,0,0.2)', width: 1}},
                hovertemplate: '<b>Inflow</b><br>Date: %{x}<br>Amount: $%{y:,.0f}<extra></extra>'
            },
            {
                x: ["2025-01-01", "2025-01-08", "2025-01-15", "2025-01-22", "2025-01-29", "2025-02-05", "2025-02-12", "2025-02-19", "2025-02-26", "2025-03-05", "2025-03-12", "2025-03-19", "2025-03-26", "2025-04-02", "2025-04-09", "2025-04-16", "2025-04-23", "2025-04-30", "2025-05-07", "2025-05-14", "2025-05-21", "2025-05-28", "2025-06-04", "2025-06-11", "2025-06-18", "2025-06-25", "2025-07-02", "2025-07-09", "2025-07-16", "2025-07-23", "2025-07-30", "2025-08-06", "2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-24161.28726, -23684.57824, -30928.204859999998, -812539.98982, -73953.74041, -46970.668739999994, -19883.61912, -598205.37775, -20193.15355, -50243.79971000001, -33347.44576, -131483.94165, -680306.0561500001, -30468.74181, -46904.781480000005, -23131.91932, -1577013.3373800002, -99879.97738000001, -55161.90507, -21053.289569999997, -706913.6567, -60341.2696, -50978.92374, -39909.73726, -87528.47862999998, -931718.52955, -40943.439419999995, -74409.16631999999, -15164.295849999999, -1104611.15244, -71193.7947, -50384.18674999999, -32496.118150000002, -188304.91415000003, -65389.203859999994, -96542.37276, -42322.63336, -25314.80467, -454608.87460999994, -87500.1422, -47890.66909, -21735.80982, -1000283.4027399999, -4992.81787],
                type: 'bar',
                name: '‚Üì Outflow',
                marker: {color: '#D0006F', line: {color: 'rgba(0,0,0,0.2)', width: 1}},
                hovertemplate: '<b>Outflow</b><br>Date: %{x}<br>Amount: $%{y:,.0f}<extra></extra>'
            },
            {
                x: ["2025-01-01", "2025-01-08", "2025-01-15", "2025-01-22", "2025-01-29", "2025-02-05", "2025-02-12", "2025-02-19", "2025-02-26", "2025-03-05", "2025-03-12", "2025-03-19", "2025-03-26", "2025-04-02", "2025-04-09", "2025-04-16", "2025-04-23", "2025-04-30", "2025-05-07", "2025-05-14", "2025-05-21", "2025-05-28", "2025-06-04", "2025-06-11", "2025-06-18", "2025-06-25", "2025-07-02", "2025-07-09", "2025-07-16", "2025-07-23", "2025-07-30", "2025-08-06", "2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-23916.0806, -759.8334900000009, -16579.573339999995, 63138.0591800001, -73952.69467, -46960.88472, -13045.71912, -583521.3891500001, 679250.05645, -50154.48087, -33347.44576, -131473.37041, 102144.6338500001, -30460.51221, -46652.36876999999, -21886.6688, -803688.3382900002, -99878.81638, -55161.81047, -21053.289569999997, -649530.1867, 685092.05073, -50978.81594, -39561.78485, -87193.00862999998, 213677.96045, -40669.19227, -73493.89643, -15011.821699999999, -464321.9057299999, -71193.7947, -50253.5076, -32456.082390000003, -187862.11958, 721348.65181, -89127.87176000001, -42233.79716, -25314.80467, 200620.77013999998, -87500.1422, -47854.232050000006, -21735.80982, -925379.0575799999, 809093.7142800001],
                type: 'scatter',
                mode: 'lines+markers',
                name: '‚Äî Net Cash Flow',
                line: {color: '#003865', width: 3},
                marker: {size: 6},
                hovertemplate: '<b>Net</b><br>Date: %{x}<br>Amount: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 400,
            barmode: 'relative',
            margin: {t: 50, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -45,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Amount (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 11}
            },
            hovermode: 'x unified',
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Short-term Forecast Chart
        var lastHistDate = '2025-10-29';
        var lastHistVal = 809093.7142800001;
        Plotly.newPlot('short-forecast-MY10', [
            {
                x: ["2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-42233.79716, -25314.80467, 200620.77013999998, -87500.1422, -47854.232050000006, -21735.80982, -925379.0575799999, 809093.7142800001],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üìä Historical (Last 8 Weeks)',
                line: {color: '#003865', width: 3},
                marker: {size: 10},
                hovertemplate: '<b>Historical</b><br>Date: %{x}<br>Net: $%{y:,.0f}<extra></extra>'
            },
            {
                x: [lastHistDate].concat(["2025-11-05", "2025-11-12", "2025-11-19", "2025-11-26"]),
                y: [lastHistVal].concat([-66917.24312294011, -65509.23318329049, -63576.093573963386, 186237.91023347224]),
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üîÆ 1-Month Forecast',
                line: {color: '#68D2DF', width: 4},
                marker: {size: 12, symbol: 'diamond'},
                fill: 'tozeroy',
                fillcolor: 'rgba(104, 210, 223, 0.2)',
                hovertemplate: '<b>Forecast</b><br>Date: %{x}<br>Predicted: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 320,
            margin: {t: 50, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -30,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Net Cash Flow (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 10}
            },
            hovermode: 'x unified',
            shapes: [{type: 'line', x0: lastHistDate, x1: lastHistDate, y0: 0, y1: 0, yref: 'paper', line: {color: '#888', width: 2, dash: 'dash'}}],
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Long-term Forecast Chart (Month-by-Month with different colors)
        var longForecastTraces = [
            {
                x: ["2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-32456.082390000003, -187862.11958, 721348.65181, -89127.87176000001, -42233.79716, -25314.80467, 200620.77013999998, -87500.1422, -47854.232050000006, -21735.80982, -925379.0575799999, 809093.7142800001],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üìä Historical',
                line: {color: '#003865', width: 3},
                marker: {size: 8},
                hovertemplate: '<b>Historical</b><br>Date: %{x}<br>Net: $%{y:,.0f}<extra></extra>'
            }
        ];
        
        // Add each month as a separate trace with different colors
        var monthColors = ['#68D2DF', '#C4D600', '#F0AB00', '#D0006F', '#3C1053', '#830051'];
        var monthNames = ['Nov', 'Dec', 'Jan', 'Feb', 'Mar', 'Apr'];
        var monthlyData = [{"month_num": 1, "dates": ["2025-11-05", "2025-11-12", "2025-11-19", "2025-11-26"], "predictions": [1453.2095265507087, -61201.7640047064, 16350.244283198444, 102722.44599825986], "total": 59324.13580330262, "cumulative": 59324.13580330262, "color": "#68D2DF"}, {"month_num": 2, "dates": ["2025-12-03", "2025-12-10", "2025-12-17", "2025-12-24"], "predictions": [-69873.27045886399, -69871.6504744403, 109056.28203701158, 28956.02953429755], "total": -1732.6093619951644, "cumulative": 57591.526441307455, "color": "#C4D600"}, {"month_num": 3, "dates": ["2025-12-31", "2026-01-07", "2026-01-14", "2026-01-21"], "predictions": [-93093.00591870179, -21499.06884413641, -57236.53879658181, -66842.45122703956], "total": -238671.06478645955, "cumulative": -181079.5383451521, "color": "#F0AB00"}, {"month_num": 4, "dates": ["2026-01-28", "2026-02-04", "2026-02-11", "2026-02-18"], "predictions": [15903.033516105452, -155697.90413336223, -126055.7005196047, -410981.2264675252], "total": -676831.7976043867, "cumulative": -857911.3359495387, "color": "#D0006F"}, {"month_num": 5, "dates": ["2026-02-25", "2026-03-04", "2026-03-11", "2026-03-18"], "predictions": [324453.4876467207, -46925.97810150136, -97144.10447668738, -180898.9495793132], "total": -515.544510781212, "cumulative": -858426.8804603199, "color": "#3C1053"}, {"month_num": 6, "dates": ["2026-03-25", "2026-04-01", "2026-04-08", "2026-04-15"], "predictions": [101259.37606542831, -60962.24672175497, -56206.80194252582, -114970.77591775254], "total": -130880.44851660501, "cumulative": -989307.328976925, "color": "#830051"}];
        var prevEndDate = lastHistDate;
        var prevEndVal = lastHistVal;
        
        monthlyData.forEach(function(month, idx) {
            var xVals = [prevEndDate].concat(month.dates);
            var yVals = [prevEndVal].concat(month.predictions);
            var monthTotal = month.total;
            var sign = monthTotal >= 0 ? '+' : '';
            longForecastTraces.push({
                x: xVals,
                y: yVals,
                type: 'scatter',
                mode: 'lines+markers',
                name: 'M' + month.month_num + ' (' + sign + (monthTotal/1000).toFixed(0) + 'K)',
                line: {color: monthColors[idx], width: 3},
                marker: {size: 8, symbol: 'circle'},
                fill: 'tozeroy',
                fillcolor: monthColors[idx] + '15',
                hovertemplate: '<b>Month ' + month.month_num + '</b><br>Date: %{x}<br>Net: $%{y:,.0f}<extra></extra>'
            });
            prevEndDate = month.dates[month.dates.length - 1];
            prevEndVal = month.predictions[month.predictions.length - 1];
        });
        
        Plotly.newPlot('long-forecast-MY10', longForecastTraces, {
            height: 380,
            margin: {t: 60, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -30,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Net Cash Flow (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.15,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ccc',
                borderwidth: 1,
                font: {size: 10},
                itemwidth: 40
            },
            hovermode: 'x unified',
            shapes: [{
                type: 'line',
                x0: lastHistDate,
                x1: lastHistDate,
                y0: 0,
                y1: 1,
                yref: 'paper',
                line: {color: '#888', width: 2, dash: 'dash'}
            }],
            annotations: [{
                x: lastHistDate,
                y: 1.02,
                yref: 'paper',
                text: 'Forecast ‚Üí',
                showarrow: false,
                font: {size: 10, color: '#666'}
            }],
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Monthly Summary Bar Chart
        var monthlyTotals = monthlyData.map(m => m.total);
        var monthlyLabels = monthlyData.map(m => 'Month ' + m.month_num);
        var monthlyBarColors = monthlyTotals.map((v, i) => v >= 0 ? monthColors[i] : '#D0006F');
        
        // Calculate y-axis range to accommodate text labels
        var maxVal = Math.max(...monthlyTotals);
        var minVal = Math.min(...monthlyTotals);
        var yPadding = Math.max(Math.abs(maxVal), Math.abs(minVal)) * 0.25;
        var yMin = minVal < 0 ? minVal - yPadding : Math.min(0, minVal);
        var yMax = maxVal > 0 ? maxVal + yPadding : Math.max(0, maxVal);
        
        Plotly.newPlot('monthly-chart-MY10', [
            {
                x: monthlyLabels,
                y: monthlyTotals,
                type: 'bar',
                name: 'Monthly Net',
                marker: {
                    color: monthlyBarColors,
                    line: {color: 'rgba(0,0,0,0.3)', width: 1}
                },
                text: monthlyTotals.map(v => v >= 0 ? '+' + (v/1000).toFixed(0) + 'K' : (v/1000).toFixed(0) + 'K'),
                textposition: 'outside',
                textfont: {size: 11, color: '#333', family: 'Inter, sans-serif', weight: 600},
                cliponaxis: false,
                constraintext: 'none',
                hovertemplate: '<b>%{x}</b><br>Net: $%{y:,.0f}<extra></extra>'
            },
            {
                x: monthlyLabels,
                y: monthlyData.map(m => m.cumulative),
                type: 'scatter',
                mode: 'lines+markers',
                name: 'Cumulative Total',
                yaxis: 'y2',
                line: {color: '#003865', width: 3},
                marker: {size: 10, symbol: 'circle'},
                hovertemplate: '<b>%{x}</b><br>Cumulative: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 380,
            margin: {t: 80, b: 60, l: 80, r: 80},
            xaxis: {
                title: {text: 'Forecast Period', font: {size: 12, color: '#666'}},
                tickfont: {size: 11}
            },
            yaxis: {
                title: {text: 'Monthly Net (USD)', font: {size: 12, color: '#830051'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2,
                range: [yMin, yMax]
            },
            yaxis2: {
                title: {text: 'Cumulative (USD)', font: {size: 12, color: '#003865'}},
                overlaying: 'y',
                side: 'right',
                tickformat: ',.0f',
                tickfont: {size: 10}
            },
            showlegend: true,
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 11}
            },
            hovermode: 'x unified',
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});
        </script>
        
        <div class="entity-section" id="VN20">
            <div class="entity-header">
                <h2><span class="entity-badge">VN20</span> Cash Flow Analysis</h2>
                <div class="model-badge">Best Model: <strong>Ridge</strong></div>
            </div>

            <!-- KPI Cards Row -->
            <div class="kpi-row">
                <div class="kpi-card">
                    <div class="kpi-icon">üí∞</div>
                    <div class="kpi-value" style="color: #C4D600">$17.06M</div>
                    <div class="kpi-label">Total Inflow</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üí∏</div>
                    <div class="kpi-value" style="color: #D0006F">$17.46M</div>
                    <div class="kpi-label">Total Outflow</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üìä</div>
                    <div class="kpi-value" style="color: #003865">$-394.8K</div>
                    <div class="kpi-label">Net Position</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üìà</div>
                    <div class="kpi-value" style="color: #68D2DF">$683.4K</div>
                    <div class="kpi-label">1-Month Forecast</div>
                </div>
            </div>

            <!-- Main Charts Section -->
            <div class="charts-grid">
                <!-- Backtest Chart -->
                <div class="chart-container full-width">
                    <h3>üîç Backtest: Actual vs Forecast (Last 4 Weeks)</h3>
                    <p class="chart-description">Comparing model predictions against actual cash flows to evaluate forecast accuracy.</p>
                    <div id="backtest-VN20" class="chart"></div>
                    <div class="metrics-row">
                        <div class="metric">
                            <span class="metric-label">MAE</span>
                            <span class="metric-value">$70.3K</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">RMSE</span>
                            <span class="metric-value">$95.1K</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">MAPE</span>
                            <span class="metric-value">294.9%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Direction Accuracy</span>
                            <span class="metric-value">100.0%</span>
                        </div>
                    </div>
                </div>

                <!-- Inflow/Outflow Chart -->
                <div class="chart-container full-width">
                    <h3>üíπ Cash Flow Overview: Inflow vs Outflow</h3>
                    <p class="chart-description">Weekly breakdown of cash inflows and outflows across the historical period.</p>
                    <div id="inflow-outflow-VN20" class="chart"></div>
                </div>

                <!-- Short-term Forecast -->
                <div class="chart-container">
                    <h3>üìÖ 1-Month Ahead Forecast</h3>
                    <p class="chart-description">Weekly cash flow predictions for the next 4 weeks based on Ridge model.</p>
                    <div id="short-forecast-VN20" class="chart"></div>
                    <div class="insight-box" style="border-left-color: #C4D600">
                        <div class="insight-header">
                            <span class="status-badge" style="background: #C4D600">‚úÖ Stable</span>
                            <strong>Short-term Liquidity Assessment</strong>
                        </div>
                        <p>Healthy cash position expected. Net inflow forecast: $683.4K</p>
                    </div>
                </div>

                <!-- Long-term Forecast -->
                <div class="chart-container">
                    <h3>üìÜ 6-Month Ahead Forecast (Iterative Month-by-Month)</h3>
                    <p class="chart-description">Each month's forecast uses previous months' predictions as input features, building iteratively.</p>
                    <div id="long-forecast-VN20" class="chart"></div>
                    <div class="insight-box" style="border-left-color: #C4D600">
                        <div class="insight-header">
                            <span class="status-badge" style="background: #C4D600">Sustainable</span>
                            <strong>Long-term Sustainability</strong>
                        </div>
                        <p>6-month forecasted total: $2.55M. Position appears sustainable.</p>
                    </div>
                </div>
            </div>

            <!-- Month-by-Month Forecast Breakdown -->
            <div class="monthly-breakdown">
                <h3>üìä Month-by-Month Forecast Breakdown</h3>
                <p class="chart-description">Iterative forecasting: each month's prediction feeds into the next month's features, creating a cascading forecast.</p>
                <div class="monthly-grid">
                    
                    <div class="monthly-card" style="border-top: 4px solid #68D2DF">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #68D2DF">Month 1</span>
                            <span class="month-dates">2025-11-05 ‚Üí 2025-11-26</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$573.8K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$573.8K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #22c55e">$160.2K</span><span class="week-val" style="color: #22c55e">$51.0K</span><span class="week-val" style="color: #22c55e">$93.1K</span><span class="week-val" style="color: #22c55e">$269.6K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #C4D600">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #C4D600">Month 2</span>
                            <span class="month-dates">2025-12-03 ‚Üí 2025-12-24</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$688.6K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$1.26M</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #22c55e">$89.2K</span><span class="week-val" style="color: #22c55e">$79.4K</span><span class="week-val" style="color: #22c55e">$313.6K</span><span class="week-val" style="color: #22c55e">$206.4K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #F0AB00">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #F0AB00">Month 3</span>
                            <span class="month-dates">2025-12-31 ‚Üí 2026-01-21</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$649.5K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$1.91M</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #22c55e">$34.8K</span><span class="week-val" style="color: #22c55e">$134.9K</span><span class="week-val" style="color: #22c55e">$194.9K</span><span class="week-val" style="color: #22c55e">$284.9K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #D0006F">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #D0006F">Month 4</span>
                            <span class="month-dates">2026-01-28 ‚Üí 2026-02-18</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$80.3K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$1.99M</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #22c55e">$100.2K</span><span class="week-val" style="color: #22c55e">$117.9K</span><span class="week-val" style="color: #22c55e">$317.5K</span><span class="week-val" style="color: #ef4444">$-455.3K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #3C1053">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #3C1053">Month 5</span>
                            <span class="month-dates">2026-02-25 ‚Üí 2026-03-18</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$105.3K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$2.10M</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #ef4444">$-64.8K</span><span class="week-val" style="color: #22c55e">$104.1K</span><span class="week-val" style="color: #22c55e">$172.2K</span><span class="week-val" style="color: #ef4444">$-106.2K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #830051">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #830051">Month 6</span>
                            <span class="month-dates">2026-03-25 ‚Üí 2026-04-15</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$453.3K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$2.55M</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #ef4444">$-25.8K</span><span class="week-val" style="color: #22c55e">$285.7K</span><span class="week-val" style="color: #22c55e">$265.1K</span><span class="week-val" style="color: #ef4444">$-71.7K</span>
                        </div>
                    </div>
                    
                </div>
                <div id="monthly-chart-VN20" class="chart" style="margin-top: 1.5rem;"></div>
            </div>

            <!-- Category Analysis -->
            <div class="category-analysis">
                <h3>üè∑Ô∏è Key Cash Flow Drivers</h3>
                <div class="category-grid">
                    <div class="category-box inflow">
                        <h4>Top Inflow Categories</h4>
                        <ul>
                            <li><span class="cat-name">AR</span><span class="cat-value">$10.87M</span></li><li><span class="cat-name">Loan receipt</span><span class="cat-value">$3.43M</span></li><li><span class="cat-name">Netting AR</span><span class="cat-value">$2.74M</span></li>
                        </ul>
                    </div>
                    <div class="category-box outflow">
                        <h4>Top Outflow Categories</h4>
                        <ul>
                            <li><span class="cat-name">Interest charges</span><span class="cat-value">-$8</span></li><li><span class="cat-name">Bank charges</span><span class="cat-value">-$773</span></li><li><span class="cat-name">Payroll</span><span class="cat-value">-$1.43M</span></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Model Performance Table -->
            <div class="model-comparison">
                <h3>ü§ñ Model Performance Comparison</h3>
                <table class="model-table">
                    <thead>
                        <tr>
                            <th>Model</th>
                            <th>MAE</th>
                            <th>RMSE</th>
                            <th>MAPE (%)</th>
                            <th>Direction Acc (%)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="">
                            <td>XGBoost </td>
                            <td>$255.4K</td>
                            <td>$276.5K</td>
                            <td>4877.8</td>
                            <td>100.0</td>
                        </tr><tr class="">
                            <td>LightGBM </td>
                            <td>$270.0K</td>
                            <td>$326.3K</td>
                            <td>2569.8</td>
                            <td>66.7</td>
                        </tr><tr class="">
                            <td>RandomForest </td>
                            <td>$193.1K</td>
                            <td>$207.9K</td>
                            <td>2463.4</td>
                            <td>100.0</td>
                        </tr><tr class="">
                            <td>GradientBoosting </td>
                            <td>$133.1K</td>
                            <td>$160.4K</td>
                            <td>3166.4</td>
                            <td>100.0</td>
                        </tr><tr class="best-model">
                            <td>Ridge ‚≠ê</td>
                            <td>$70.3K</td>
                            <td>$95.1K</td>
                            <td>294.9</td>
                            <td>100.0</td>
                        </tr><tr class="">
                            <td>Ensemble </td>
                            <td>$147.6K</td>
                            <td>$151.2K</td>
                            <td>2130.9</td>
                            <td>100.0</td>
                        </tr>
                    </tbody>
                </table>
                <div style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px; font-size: 0.85rem; color: #555;">
                    <strong>üìä Metric Definitions:</strong>
                    <ul style="margin: 0.5rem 0 0 1.5rem; line-height: 1.6;">
                        <li><strong>MAE</strong> (Mean Absolute Error): Average dollar difference between predicted and actual values ‚Äî lower is better.</li>
                        <li><strong>RMSE</strong> (Root Mean Square Error): Similar to MAE but penalizes large errors more heavily ‚Äî lower is better.</li>
                        <li><strong>MAPE</strong> (Mean Absolute Percentage Error): Average percentage error relative to actual values ‚Äî lower is better.</li>
                        <li><strong>Direction Acc</strong> (Direction Accuracy): Percentage of times the model correctly predicted if cash flow would go up or down ‚Äî higher is better.</li>
                    </ul>
                </div>
            </div>
        </div>

        <script>
        // Backtest Chart
        Plotly.newPlot('backtest-VN20', [
            {
                x: ["2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [346871.09432999993, 18350.57692999998, -845517.9321999999, 2247.29514],
                type: 'scatter',
                mode: 'lines+markers',
                name: '‚úì Actual Values',
                line: {color: '#003865', width: 4},
                marker: {size: 14, symbol: 'circle'},
                hovertemplate: '<b>Actual</b><br>Date: %{x}<br>Value: $%{y:,.0f}<extra></extra>'
            },
            {
                x: ["2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [513008.61551897734, 109196.04581934298, -835686.2454576622, 16529.498707175564],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üîÆ Model Prediction',
                line: {color: '#F0AB00', width: 4, dash: 'dash'},
                marker: {size: 12, symbol: 'diamond'},
                hovertemplate: '<b>Prediction</b><br>Date: %{x}<br>Predicted: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 350,
            margin: {t: 50, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -30,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Net Cash Flow (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 11}
            },
            hovermode: 'x unified',
            shapes: [{type: 'line', x0: '2025-10-08', x1: '2025-10-29', y0: 0, y1: 0, line: {color: '#888', width: 1, dash: 'dot'}}],
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Inflow/Outflow Chart
        Plotly.newPlot('inflow-outflow-VN20', [
            {
                x: ["2025-01-01", "2025-01-08", "2025-01-15", "2025-01-22", "2025-01-29", "2025-02-05", "2025-02-12", "2025-02-19", "2025-02-26", "2025-03-05", "2025-03-12", "2025-03-19", "2025-03-26", "2025-04-02", "2025-04-09", "2025-04-16", "2025-04-23", "2025-04-30", "2025-05-07", "2025-05-14", "2025-05-21", "2025-05-28", "2025-06-04", "2025-06-11", "2025-06-18", "2025-06-25", "2025-07-02", "2025-07-09", "2025-07-16", "2025-07-23", "2025-07-30", "2025-08-06", "2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [887.0003800000001, 367319.72578, 409521.75642, 14.82888, 1100268.16088, 215922.54551, 528256.6034199999, 265249.14741000003, 1660598.0777599998, 1220.17494, 243253.69177, 225108.25266, 2086286.95033, 351450.16779, 290334.12318999995, 122065.46514, 542149.41432, 248748.61, 323678.20514, 314953.4706, 131055.4905, 446963.59690999996, 310333.30445, 374828.23397, 79092.99733, 535666.82747, 218900.11394, 562348.10888, 303742.75114, 382936.75048000005, 431784.49, 336037.02918, 300162.05757, 84925.89104000002, 232996.70103, 388136.98604, 797453.9390199999, 220059.51403999998, 359632.82428, 366725.57999999996, 383510.93534, 206825.64858, 297904.47621, 11550.8],
                type: 'bar',
                name: '‚Üë Inflow',
                marker: {color: '#C4D600', line: {color: 'rgba(0,0,0,0.2)', width: 1}},
                hovertemplate: '<b>Inflow</b><br>Date: %{x}<br>Amount: $%{y:,.0f}<extra></extra>'
            },
            {
                x: ["2025-01-01", "2025-01-08", "2025-01-15", "2025-01-22", "2025-01-29", "2025-02-05", "2025-02-12", "2025-02-19", "2025-02-26", "2025-03-05", "2025-03-12", "2025-03-19", "2025-03-26", "2025-04-02", "2025-04-09", "2025-04-16", "2025-04-23", "2025-04-30", "2025-05-07", "2025-05-14", "2025-05-21", "2025-05-28", "2025-06-04", "2025-06-11", "2025-06-18", "2025-06-25", "2025-07-02", "2025-07-09", "2025-07-16", "2025-07-23", "2025-07-30", "2025-08-06", "2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-34793.491270000006, -224379.24274, -97698.84743, -16835.443450000002, -2093873.56221, -28780.25714, -34337.305499999995, -1199436.38936, -1795771.8346, -27262.87888, -48251.80859000001, -345131.55448, -2401506.61828, -28660.578510000003, -50647.18518, -259071.89798000007, -1107407.95861, -51707.11148, -30108.02312, -47945.446099999994, -197910.67406000002, -573187.2826899999, -45334.03726, -55192.416249999995, -185739.70324000003, -1431328.3954099999, -45007.93290999999, -25335.128920000003, -207962.82937999998, -1120563.27637, -36318.255020000004, -72009.07918, -35507.9176, -924124.372, -29275.55477, -30121.738339999993, -52730.220239999995, -198810.13889999996, -841631.48794, -46103.45869, -36639.84101, -188475.07165, -1143422.40841, -9303.50486],
                type: 'bar',
                name: '‚Üì Outflow',
                marker: {color: '#D0006F', line: {color: 'rgba(0,0,0,0.2)', width: 1}},
                hovertemplate: '<b>Outflow</b><br>Date: %{x}<br>Amount: $%{y:,.0f}<extra></extra>'
            },
            {
                x: ["2025-01-01", "2025-01-08", "2025-01-15", "2025-01-22", "2025-01-29", "2025-02-05", "2025-02-12", "2025-02-19", "2025-02-26", "2025-03-05", "2025-03-12", "2025-03-19", "2025-03-26", "2025-04-02", "2025-04-09", "2025-04-16", "2025-04-23", "2025-04-30", "2025-05-07", "2025-05-14", "2025-05-21", "2025-05-28", "2025-06-04", "2025-06-11", "2025-06-18", "2025-06-25", "2025-07-02", "2025-07-09", "2025-07-16", "2025-07-23", "2025-07-30", "2025-08-06", "2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-33906.490889999994, 142940.48303999996, 311822.90898999997, -16820.61457, -993605.4013300003, 187142.28837000002, 493919.29792000004, -934187.24195, -135173.7568399998, -26042.70394, 195001.88318, -120023.30181999998, -315219.66795000026, 322789.58928, 239686.93800999998, -137006.43283999996, -565258.5442900001, 197041.49852, 293570.18202, 267008.0245, -66855.18356, -126223.68577999996, 264999.2671899999, 319635.81772, -106646.70591000003, -895661.5679399999, 173892.18103, 537012.9799599999, 95779.92176000003, -737626.5258899999, 395466.23498, 264027.95, 264654.13997, -839198.4809600001, 203721.14626, 358015.2477, 744723.7187799999, 21249.37513999999, -481998.66365999996, 320622.12130999996, 346871.09432999993, 18350.57692999998, -845517.9321999999, 2247.29514],
                type: 'scatter',
                mode: 'lines+markers',
                name: '‚Äî Net Cash Flow',
                line: {color: '#003865', width: 3},
                marker: {size: 6},
                hovertemplate: '<b>Net</b><br>Date: %{x}<br>Amount: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 400,
            barmode: 'relative',
            margin: {t: 50, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -45,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Amount (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 11}
            },
            hovermode: 'x unified',
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Short-term Forecast Chart
        var lastHistDate = '2025-10-29';
        var lastHistVal = 2247.29514;
        Plotly.newPlot('short-forecast-VN20', [
            {
                x: ["2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [744723.7187799999, 21249.37513999999, -481998.66365999996, 320622.12130999996, 346871.09432999993, 18350.57692999998, -845517.9321999999, 2247.29514],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üìä Historical (Last 8 Weeks)',
                line: {color: '#003865', width: 3},
                marker: {size: 10},
                hovertemplate: '<b>Historical</b><br>Date: %{x}<br>Net: $%{y:,.0f}<extra></extra>'
            },
            {
                x: [lastHistDate].concat(["2025-11-05", "2025-11-12", "2025-11-19", "2025-11-26"]),
                y: [lastHistVal].concat([1221509.6185679568, 1921830.2492552788, -438748.9436572012, -2021219.7134531965]),
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üîÆ 1-Month Forecast',
                line: {color: '#68D2DF', width: 4},
                marker: {size: 12, symbol: 'diamond'},
                fill: 'tozeroy',
                fillcolor: 'rgba(104, 210, 223, 0.2)',
                hovertemplate: '<b>Forecast</b><br>Date: %{x}<br>Predicted: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 320,
            margin: {t: 50, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -30,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Net Cash Flow (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 10}
            },
            hovermode: 'x unified',
            shapes: [{type: 'line', x0: lastHistDate, x1: lastHistDate, y0: 0, y1: 0, yref: 'paper', line: {color: '#888', width: 2, dash: 'dash'}}],
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Long-term Forecast Chart (Month-by-Month with different colors)
        var longForecastTraces = [
            {
                x: ["2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [264654.13997, -839198.4809600001, 203721.14626, 358015.2477, 744723.7187799999, 21249.37513999999, -481998.66365999996, 320622.12130999996, 346871.09432999993, 18350.57692999998, -845517.9321999999, 2247.29514],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üìä Historical',
                line: {color: '#003865', width: 3},
                marker: {size: 8},
                hovertemplate: '<b>Historical</b><br>Date: %{x}<br>Net: $%{y:,.0f}<extra></extra>'
            }
        ];
        
        // Add each month as a separate trace with different colors
        var monthColors = ['#68D2DF', '#C4D600', '#F0AB00', '#D0006F', '#3C1053', '#830051'];
        var monthNames = ['Nov', 'Dec', 'Jan', 'Feb', 'Mar', 'Apr'];
        var monthlyData = [{"month_num": 1, "dates": ["2025-11-05", "2025-11-12", "2025-11-19", "2025-11-26"], "predictions": [160156.80185923938, 50961.0821632656, 93118.1485448542, 269574.86827284226], "total": 573810.9008402014, "cumulative": 573810.9008402014, "color": "#68D2DF"}, {"month_num": 2, "dates": ["2025-12-03", "2025-12-10", "2025-12-17", "2025-12-24"], "predictions": [89164.79079733575, 79399.81104841028, 313649.8464721313, 206393.18968410644], "total": 688607.6380019838, "cumulative": 1262418.5388421852, "color": "#C4D600"}, {"month_num": 3, "dates": ["2025-12-31", "2026-01-07", "2026-01-14", "2026-01-21"], "predictions": [34846.29132995186, 134928.82200647675, 194885.73403065788, 284861.91582012986], "total": 649522.7631872164, "cumulative": 1911941.3020294015, "color": "#F0AB00"}, {"month_num": 4, "dates": ["2026-01-28", "2026-02-04", "2026-02-11", "2026-02-18"], "predictions": [100191.41161791827, 117940.42000913093, 317497.44214161765, -455334.616734627], "total": 80294.65703403986, "cumulative": 1992235.9590634415, "color": "#D0006F"}, {"month_num": 5, "dates": ["2026-02-25", "2026-03-04", "2026-03-11", "2026-03-18"], "predictions": [-64826.705890838144, 104113.89675148882, 172203.34038527502, -106233.65928494307], "total": 105256.87196098262, "cumulative": 2097492.831024424, "color": "#3C1053"}, {"month_num": 6, "dates": ["2026-03-25", "2026-04-01", "2026-04-08", "2026-04-15"], "predictions": [-25778.71997193439, 285691.35704046313, 265073.2908486066, -71660.34428819474], "total": 453325.5836289406, "cumulative": 2550818.4146533646, "color": "#830051"}];
        var prevEndDate = lastHistDate;
        var prevEndVal = lastHistVal;
        
        monthlyData.forEach(function(month, idx) {
            var xVals = [prevEndDate].concat(month.dates);
            var yVals = [prevEndVal].concat(month.predictions);
            var monthTotal = month.total;
            var sign = monthTotal >= 0 ? '+' : '';
            longForecastTraces.push({
                x: xVals,
                y: yVals,
                type: 'scatter',
                mode: 'lines+markers',
                name: 'M' + month.month_num + ' (' + sign + (monthTotal/1000).toFixed(0) + 'K)',
                line: {color: monthColors[idx], width: 3},
                marker: {size: 8, symbol: 'circle'},
                fill: 'tozeroy',
                fillcolor: monthColors[idx] + '15',
                hovertemplate: '<b>Month ' + month.month_num + '</b><br>Date: %{x}<br>Net: $%{y:,.0f}<extra></extra>'
            });
            prevEndDate = month.dates[month.dates.length - 1];
            prevEndVal = month.predictions[month.predictions.length - 1];
        });
        
        Plotly.newPlot('long-forecast-VN20', longForecastTraces, {
            height: 380,
            margin: {t: 60, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -30,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Net Cash Flow (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.15,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ccc',
                borderwidth: 1,
                font: {size: 10},
                itemwidth: 40
            },
            hovermode: 'x unified',
            shapes: [{
                type: 'line',
                x0: lastHistDate,
                x1: lastHistDate,
                y0: 0,
                y1: 1,
                yref: 'paper',
                line: {color: '#888', width: 2, dash: 'dash'}
            }],
            annotations: [{
                x: lastHistDate,
                y: 1.02,
                yref: 'paper',
                text: 'Forecast ‚Üí',
                showarrow: false,
                font: {size: 10, color: '#666'}
            }],
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Monthly Summary Bar Chart
        var monthlyTotals = monthlyData.map(m => m.total);
        var monthlyLabels = monthlyData.map(m => 'Month ' + m.month_num);
        var monthlyBarColors = monthlyTotals.map((v, i) => v >= 0 ? monthColors[i] : '#D0006F');
        
        // Calculate y-axis range to accommodate text labels
        var maxVal = Math.max(...monthlyTotals);
        var minVal = Math.min(...monthlyTotals);
        var yPadding = Math.max(Math.abs(maxVal), Math.abs(minVal)) * 0.25;
        var yMin = minVal < 0 ? minVal - yPadding : Math.min(0, minVal);
        var yMax = maxVal > 0 ? maxVal + yPadding : Math.max(0, maxVal);
        
        Plotly.newPlot('monthly-chart-VN20', [
            {
                x: monthlyLabels,
                y: monthlyTotals,
                type: 'bar',
                name: 'Monthly Net',
                marker: {
                    color: monthlyBarColors,
                    line: {color: 'rgba(0,0,0,0.3)', width: 1}
                },
                text: monthlyTotals.map(v => v >= 0 ? '+' + (v/1000).toFixed(0) + 'K' : (v/1000).toFixed(0) + 'K'),
                textposition: 'outside',
                textfont: {size: 11, color: '#333', family: 'Inter, sans-serif', weight: 600},
                cliponaxis: false,
                constraintext: 'none',
                hovertemplate: '<b>%{x}</b><br>Net: $%{y:,.0f}<extra></extra>'
            },
            {
                x: monthlyLabels,
                y: monthlyData.map(m => m.cumulative),
                type: 'scatter',
                mode: 'lines+markers',
                name: 'Cumulative Total',
                yaxis: 'y2',
                line: {color: '#003865', width: 3},
                marker: {size: 10, symbol: 'circle'},
                hovertemplate: '<b>%{x}</b><br>Cumulative: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 380,
            margin: {t: 80, b: 60, l: 80, r: 80},
            xaxis: {
                title: {text: 'Forecast Period', font: {size: 12, color: '#666'}},
                tickfont: {size: 11}
            },
            yaxis: {
                title: {text: 'Monthly Net (USD)', font: {size: 12, color: '#830051'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2,
                range: [yMin, yMax]
            },
            yaxis2: {
                title: {text: 'Cumulative (USD)', font: {size: 12, color: '#003865'}},
                overlaying: 'y',
                side: 'right',
                tickformat: ',.0f',
                tickfont: {size: 10}
            },
            showlegend: true,
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 11}
            },
            hovermode: 'x unified',
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});
        </script>
        
        <div class="entity-section" id="KR10">
            <div class="entity-header">
                <h2><span class="entity-badge">KR10</span> Cash Flow Analysis</h2>
                <div class="model-badge">Best Model: <strong>GradientBoosting</strong></div>
            </div>

            <!-- KPI Cards Row -->
            <div class="kpi-row">
                <div class="kpi-card">
                    <div class="kpi-icon">üí∞</div>
                    <div class="kpi-value" style="color: #C4D600">$45.71M</div>
                    <div class="kpi-label">Total Inflow</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üí∏</div>
                    <div class="kpi-value" style="color: #D0006F">$47.25M</div>
                    <div class="kpi-label">Total Outflow</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üìä</div>
                    <div class="kpi-value" style="color: #003865">$-1.54M</div>
                    <div class="kpi-label">Net Position</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-icon">üìà</div>
                    <div class="kpi-value" style="color: #68D2DF">$2.06M</div>
                    <div class="kpi-label">1-Month Forecast</div>
                </div>
            </div>

            <!-- Main Charts Section -->
            <div class="charts-grid">
                <!-- Backtest Chart -->
                <div class="chart-container full-width">
                    <h3>üîç Backtest: Actual vs Forecast (Last 4 Weeks)</h3>
                    <p class="chart-description">Comparing model predictions against actual cash flows to evaluate forecast accuracy.</p>
                    <div id="backtest-KR10" class="chart"></div>
                    <div class="metrics-row">
                        <div class="metric">
                            <span class="metric-label">MAE</span>
                            <span class="metric-value">$130.0K</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">RMSE</span>
                            <span class="metric-value">$230.1K</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">MAPE</span>
                            <span class="metric-value">14.0%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Direction Accuracy</span>
                            <span class="metric-value">100.0%</span>
                        </div>
                    </div>
                </div>

                <!-- Inflow/Outflow Chart -->
                <div class="chart-container full-width">
                    <h3>üíπ Cash Flow Overview: Inflow vs Outflow</h3>
                    <p class="chart-description">Weekly breakdown of cash inflows and outflows across the historical period.</p>
                    <div id="inflow-outflow-KR10" class="chart"></div>
                </div>

                <!-- Short-term Forecast -->
                <div class="chart-container">
                    <h3>üìÖ 1-Month Ahead Forecast</h3>
                    <p class="chart-description">Weekly cash flow predictions for the next 4 weeks based on GradientBoosting model.</p>
                    <div id="short-forecast-KR10" class="chart"></div>
                    <div class="insight-box" style="border-left-color: #C4D600">
                        <div class="insight-header">
                            <span class="status-badge" style="background: #C4D600">‚úÖ Stable</span>
                            <strong>Short-term Liquidity Assessment</strong>
                        </div>
                        <p>Healthy cash position expected. Net inflow forecast: $2.06M</p>
                    </div>
                </div>

                <!-- Long-term Forecast -->
                <div class="chart-container">
                    <h3>üìÜ 6-Month Ahead Forecast (Iterative Month-by-Month)</h3>
                    <p class="chart-description">Each month's forecast uses previous months' predictions as input features, building iteratively.</p>
                    <div id="long-forecast-KR10" class="chart"></div>
                    <div class="insight-box" style="border-left-color: #C4D600">
                        <div class="insight-header">
                            <span class="status-badge" style="background: #C4D600">Sustainable</span>
                            <strong>Long-term Sustainability</strong>
                        </div>
                        <p>6-month forecasted total: $67.7K. Position appears sustainable.</p>
                    </div>
                </div>
            </div>

            <!-- Month-by-Month Forecast Breakdown -->
            <div class="monthly-breakdown">
                <h3>üìä Month-by-Month Forecast Breakdown</h3>
                <p class="chart-description">Iterative forecasting: each month's prediction feeds into the next month's features, creating a cascading forecast.</p>
                <div class="monthly-grid">
                    
                    <div class="monthly-card" style="border-top: 4px solid #68D2DF">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #68D2DF">Month 1</span>
                            <span class="month-dates">2025-11-05 ‚Üí 2025-11-26</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$1.10M</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$1.10M</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #22c55e">$167.8K</span><span class="week-val" style="color: #ef4444">$-85.5K</span><span class="week-val" style="color: #22c55e">$228.7K</span><span class="week-val" style="color: #22c55e">$787.5K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #C4D600">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #C4D600">Month 2</span>
                            <span class="month-dates">2025-12-03 ‚Üí 2025-12-24</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$852.2K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$1.95M</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #ef4444">$-118.6K</span><span class="week-val" style="color: #ef4444">$-108.2K</span><span class="week-val" style="color: #22c55e">$595.4K</span><span class="week-val" style="color: #22c55e">$483.6K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #F0AB00">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #F0AB00">Month 3</span>
                            <span class="month-dates">2025-12-31 ‚Üí 2026-01-21</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$-545.6K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$1.41M</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #ef4444">$-204.3K</span><span class="week-val" style="color: #22c55e">$113.1K</span><span class="week-val" style="color: #ef4444">$-107.3K</span><span class="week-val" style="color: #ef4444">$-347.0K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #D0006F">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #D0006F">Month 4</span>
                            <span class="month-dates">2026-01-28 ‚Üí 2026-02-18</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$-2.18M</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$-774.8K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #22c55e">$172.5K</span><span class="week-val" style="color: #ef4444">$-495.9K</span><span class="week-val" style="color: #ef4444">$-398.5K</span><span class="week-val" style="color: #ef4444">$-1.46M</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #3C1053">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #3C1053">Month 5</span>
                            <span class="month-dates">2026-02-25 ‚Üí 2026-03-18</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$249.2K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$-525.5K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #22c55e">$926.8K</span><span class="week-val" style="color: #ef4444">$-27.5K</span><span class="week-val" style="color: #ef4444">$-159.6K</span><span class="week-val" style="color: #ef4444">$-490.4K</span>
                        </div>
                    </div>
                    
                    <div class="monthly-card" style="border-top: 4px solid #830051">
                        <div class="monthly-header">
                            <span class="month-badge" style="background: #830051">Month 6</span>
                            <span class="month-dates">2026-03-25 ‚Üí 2026-04-15</span>
                        </div>
                        <div class="monthly-stats">
                            <div class="monthly-stat">
                                <span class="stat-value">$593.2K</span>
                                <span class="stat-label">Monthly Net</span>
                            </div>
                            <div class="monthly-stat">
                                <span class="stat-value">$67.7K</span>
                                <span class="stat-label">Cumulative</span>
                            </div>
                        </div>
                        <div class="weekly-detail">
                            <span class="week-val" style="color: #22c55e">$1.33M</span><span class="week-val" style="color: #ef4444">$-197.3K</span><span class="week-val" style="color: #ef4444">$-125.7K</span><span class="week-val" style="color: #ef4444">$-414.2K</span>
                        </div>
                    </div>
                    
                </div>
                <div id="monthly-chart-KR10" class="chart" style="margin-top: 1.5rem;"></div>
            </div>

            <!-- Category Analysis -->
            <div class="category-analysis">
                <h3>üè∑Ô∏è Key Cash Flow Drivers</h3>
                <div class="category-grid">
                    <div class="category-box inflow">
                        <h4>Top Inflow Categories</h4>
                        <ul>
                            <li><span class="cat-name">AR</span><span class="cat-value">$39.96M</span></li><li><span class="cat-name">Other receipt</span><span class="cat-value">$4.39M</span></li><li><span class="cat-name">Loan receipt</span><span class="cat-value">$1.34M</span></li>
                        </ul>
                    </div>
                    <div class="category-box outflow">
                        <h4>Top Outflow Categories</h4>
                        <ul>
                            <li><span class="cat-name">Bank charges</span><span class="cat-value">-$444</span></li><li><span class="cat-name">Interest charges</span><span class="cat-value">-$5.9K</span></li><li><span class="cat-name">Dividend payout</span><span class="cat-value">-$993.1K</span></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Model Performance Table -->
            <div class="model-comparison">
                <h3>ü§ñ Model Performance Comparison</h3>
                <table class="model-table">
                    <thead>
                        <tr>
                            <th>Model</th>
                            <th>MAE</th>
                            <th>RMSE</th>
                            <th>MAPE (%)</th>
                            <th>Direction Acc (%)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="">
                            <td>XGBoost </td>
                            <td>$375.1K</td>
                            <td>$395.9K</td>
                            <td>380.3</td>
                            <td>66.7</td>
                        </tr><tr class="">
                            <td>LightGBM </td>
                            <td>$1.36M</td>
                            <td>$1.79M</td>
                            <td>347.7</td>
                            <td>100.0</td>
                        </tr><tr class="">
                            <td>RandomForest </td>
                            <td>$435.9K</td>
                            <td>$705.4K</td>
                            <td>67.2</td>
                            <td>66.7</td>
                        </tr><tr class="best-model">
                            <td>GradientBoosting ‚≠ê</td>
                            <td>$130.0K</td>
                            <td>$230.1K</td>
                            <td>14.0</td>
                            <td>100.0</td>
                        </tr><tr class="">
                            <td>Ridge </td>
                            <td>$327.2K</td>
                            <td>$345.4K</td>
                            <td>421.3</td>
                            <td>66.7</td>
                        </tr><tr class="">
                            <td>Ensemble </td>
                            <td>$251.4K</td>
                            <td>$346.6K</td>
                            <td>198.0</td>
                            <td>66.7</td>
                        </tr>
                    </tbody>
                </table>
                <div style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px; font-size: 0.85rem; color: #555;">
                    <strong>üìä Metric Definitions:</strong>
                    <ul style="margin: 0.5rem 0 0 1.5rem; line-height: 1.6;">
                        <li><strong>MAE</strong> (Mean Absolute Error): Average dollar difference between predicted and actual values ‚Äî lower is better.</li>
                        <li><strong>RMSE</strong> (Root Mean Square Error): Similar to MAE but penalizes large errors more heavily ‚Äî lower is better.</li>
                        <li><strong>MAPE</strong> (Mean Absolute Percentage Error): Average percentage error relative to actual values ‚Äî lower is better.</li>
                        <li><strong>Direction Acc</strong> (Direction Accuracy): Percentage of times the model correctly predicted if cash flow would go up or down ‚Äî higher is better.</li>
                    </ul>
                </div>
            </div>
        </div>

        <script>
        // Backtest Chart
        Plotly.newPlot('backtest-KR10', [
            {
                x: ["2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-41755.33706999995, 28888.555129999935, -2508577.630210001, 3001118.01671],
                type: 'scatter',
                mode: 'lines+markers',
                name: '‚úì Actual Values',
                line: {color: '#003865', width: 4},
                marker: {size: 14, symbol: 'circle'},
                hovertemplate: '<b>Actual</b><br>Date: %{x}<br>Value: $%{y:,.0f}<extra></extra>'
            },
            {
                x: ["2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-36892.55252140178, 36752.77484784359, -2558586.5800102423, 2543661.0543540684],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üîÆ Model Prediction',
                line: {color: '#F0AB00', width: 4, dash: 'dash'},
                marker: {size: 12, symbol: 'diamond'},
                hovertemplate: '<b>Prediction</b><br>Date: %{x}<br>Predicted: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 350,
            margin: {t: 50, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -30,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Net Cash Flow (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 11}
            },
            hovermode: 'x unified',
            shapes: [{type: 'line', x0: '2025-10-08', x1: '2025-10-29', y0: 0, y1: 0, line: {color: '#888', width: 1, dash: 'dot'}}],
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Inflow/Outflow Chart
        Plotly.newPlot('inflow-outflow-KR10', [
            {
                x: ["2025-01-01", "2025-01-08", "2025-01-15", "2025-01-22", "2025-01-29", "2025-02-05", "2025-02-12", "2025-02-19", "2025-02-26", "2025-03-05", "2025-03-12", "2025-03-19", "2025-03-26", "2025-04-02", "2025-04-09", "2025-04-16", "2025-04-23", "2025-04-30", "2025-05-07", "2025-05-14", "2025-05-21", "2025-05-28", "2025-06-04", "2025-06-11", "2025-06-18", "2025-06-25", "2025-07-02", "2025-07-09", "2025-07-16", "2025-07-23", "2025-07-30", "2025-08-06", "2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [65429.58625000001, 278808.80697000003, 141050.98712, 646089.73887, 2135588.82213, 126717.18723, 92016.9109, 122888.36101, 3388653.3732700003, 38072.328349999996, 175988.00243999998, 92477.43058, 4108956.7974699996, 55473.391220000005, 249530.07501, 125663.94748999999, 3895875.0630200002, 427660.43460000004, 109337.97795, 82763.21512, 293383.39910999994, 3283462.86171, 62362.453460000004, 354251.33278, 1516275.17459, 3305530.4084300003, 194772.25982000004, 270751.9663, 159133.82198000004, 1653129.1419999998, 2126601.31793, 186347.95133, 184593.96000000002, 298024.87452, 3338858.6496300003, 52347.17868999999, 209704.21758, 1994297.6182199998, 3539546.65467, 764731.18758, 319783.2681, 274136.96657000005, 1727077.9233799998, 3241719.95113],
                type: 'bar',
                name: '‚Üë Inflow',
                marker: {color: '#C4D600', line: {color: 'rgba(0,0,0,0.2)', width: 1}},
                hovertemplate: '<b>Inflow</b><br>Date: %{x}<br>Amount: $%{y:,.0f}<extra></extra>'
            },
            {
                x: ["2025-01-01", "2025-01-08", "2025-01-15", "2025-01-22", "2025-01-29", "2025-02-05", "2025-02-12", "2025-02-19", "2025-02-26", "2025-03-05", "2025-03-12", "2025-03-19", "2025-03-26", "2025-04-02", "2025-04-09", "2025-04-16", "2025-04-23", "2025-04-30", "2025-05-07", "2025-05-14", "2025-05-21", "2025-05-28", "2025-06-04", "2025-06-11", "2025-06-18", "2025-06-25", "2025-07-02", "2025-07-09", "2025-07-16", "2025-07-23", "2025-07-30", "2025-08-06", "2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-58251.93081, -353285.16952, -586244.92083, -483062.39776, -591894.4211, -387551.6934600001, -236018.12949999998, -2428276.9736599997, -2019084.0865299995, -170539.35764, -151965.14084, -496580.69933999993, -2404597.44746, -317717.77650000004, -473372.0644, -412664.03778, -4504203.35858, -995179.8158699999, -315469.70249000005, -328600.73991000006, -1909423.61547, -378752.71071, -66033.40948, -179957.81869, -553510.31253, -3336337.60384, -281894.3617700001, -305037.18313, -110373.38909999999, -5199711.1119099995, -1076369.2232100002, -502055.2875, -137365.76223000002, -2734688.8651599996, -1047975.5532099999, -216413.82205999998, -336746.83881000004, -811240.8795500001, -3501236.7301800004, -1770166.7777299997, -361538.60517, -245248.41144, -4235655.55359, -240601.93441999995],
                type: 'bar',
                name: '‚Üì Outflow',
                marker: {color: '#D0006F', line: {color: 'rgba(0,0,0,0.2)', width: 1}},
                hovertemplate: '<b>Outflow</b><br>Date: %{x}<br>Amount: $%{y:,.0f}<extra></extra>'
            },
            {
                x: ["2025-01-01", "2025-01-08", "2025-01-15", "2025-01-22", "2025-01-29", "2025-02-05", "2025-02-12", "2025-02-19", "2025-02-26", "2025-03-05", "2025-03-12", "2025-03-19", "2025-03-26", "2025-04-02", "2025-04-09", "2025-04-16", "2025-04-23", "2025-04-30", "2025-05-07", "2025-05-14", "2025-05-21", "2025-05-28", "2025-06-04", "2025-06-11", "2025-06-18", "2025-06-25", "2025-07-02", "2025-07-09", "2025-07-16", "2025-07-23", "2025-07-30", "2025-08-06", "2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [7177.655440000002, -74476.36254999999, -445193.93370999995, 163027.3411099999, 1543694.40103, -260834.50623, -144001.21859999996, -2305388.61265, 1369569.2867400004, -132467.02929, 24022.86159999999, -404103.26876, 1704359.3500099997, -262244.38528, -223841.98938999997, -287000.09029, -608328.2955599998, -567519.38127, -206131.72453999997, -245837.52478999997, -1616040.21636, 2904710.151, -3670.956019999994, 174293.51409000007, 962764.8620600001, -30807.195410000044, -87122.10195, -34285.216830000034, 48760.432880000066, -3546581.9699100005, 1050232.09472, -315707.3361699999, 47228.19777, -2436663.99064, 2290883.09642, -164066.64337, -127042.62123, 1183056.73867, 38309.92448999913, -1005435.5901500001, -41755.33706999995, 28888.555129999935, -2508577.630210001, 3001118.01671],
                type: 'scatter',
                mode: 'lines+markers',
                name: '‚Äî Net Cash Flow',
                line: {color: '#003865', width: 3},
                marker: {size: 6},
                hovertemplate: '<b>Net</b><br>Date: %{x}<br>Amount: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 400,
            barmode: 'relative',
            margin: {t: 50, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -45,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Amount (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 11}
            },
            hovermode: 'x unified',
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Short-term Forecast Chart
        var lastHistDate = '2025-10-29';
        var lastHistVal = 3001118.01671;
        Plotly.newPlot('short-forecast-KR10', [
            {
                x: ["2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [-127042.62123, 1183056.73867, 38309.92448999913, -1005435.5901500001, -41755.33706999995, 28888.555129999935, -2508577.630210001, 3001118.01671],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üìä Historical (Last 8 Weeks)',
                line: {color: '#003865', width: 3},
                marker: {size: 10},
                hovertemplate: '<b>Historical</b><br>Date: %{x}<br>Net: $%{y:,.0f}<extra></extra>'
            },
            {
                x: [lastHistDate].concat(["2025-11-05", "2025-11-12", "2025-11-19", "2025-11-26"]),
                y: [lastHistVal].concat([36622.455339171414, -39038.08988729105, 155506.08898533985, 1910736.4994430586]),
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üîÆ 1-Month Forecast',
                line: {color: '#68D2DF', width: 4},
                marker: {size: 12, symbol: 'diamond'},
                fill: 'tozeroy',
                fillcolor: 'rgba(104, 210, 223, 0.2)',
                hovertemplate: '<b>Forecast</b><br>Date: %{x}<br>Predicted: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 320,
            margin: {t: 50, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -30,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Net Cash Flow (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 10}
            },
            hovermode: 'x unified',
            shapes: [{type: 'line', x0: lastHistDate, x1: lastHistDate, y0: 0, y1: 0, yref: 'paper', line: {color: '#888', width: 2, dash: 'dash'}}],
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Long-term Forecast Chart (Month-by-Month with different colors)
        var longForecastTraces = [
            {
                x: ["2025-08-13", "2025-08-20", "2025-08-27", "2025-09-03", "2025-09-10", "2025-09-17", "2025-09-24", "2025-10-01", "2025-10-08", "2025-10-15", "2025-10-22", "2025-10-29"],
                y: [47228.19777, -2436663.99064, 2290883.09642, -164066.64337, -127042.62123, 1183056.73867, 38309.92448999913, -1005435.5901500001, -41755.33706999995, 28888.555129999935, -2508577.630210001, 3001118.01671],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'üìä Historical',
                line: {color: '#003865', width: 3},
                marker: {size: 8},
                hovertemplate: '<b>Historical</b><br>Date: %{x}<br>Net: $%{y:,.0f}<extra></extra>'
            }
        ];
        
        // Add each month as a separate trace with different colors
        var monthColors = ['#68D2DF', '#C4D600', '#F0AB00', '#D0006F', '#3C1053', '#830051'];
        var monthNames = ['Nov', 'Dec', 'Jan', 'Feb', 'Mar', 'Apr'];
        var monthlyData = [{"month_num": 1, "dates": ["2025-11-05", "2025-11-12", "2025-11-19", "2025-11-26"], "predictions": [167811.8716013963, -85513.20138057816, 228675.2883808697, 787535.0632231736], "total": 1098509.0218248614, "cumulative": 1098509.0218248614, "color": "#68D2DF"}, {"month_num": 2, "dates": ["2025-12-03", "2025-12-10", "2025-12-17", "2025-12-24"], "predictions": [-118553.44206188485, -108223.64989450356, 595408.4454516489, 483573.10612794966], "total": 852204.4596232101, "cumulative": 1950713.4814480715, "color": "#C4D600"}, {"month_num": 3, "dates": ["2025-12-31", "2026-01-07", "2026-01-14", "2026-01-21"], "predictions": [-204316.1155765784, 113113.56830900477, -107343.30669440722, -347044.3956810869], "total": -545590.2496430678, "cumulative": 1405123.2318050037, "color": "#F0AB00"}, {"month_num": 4, "dates": ["2026-01-28", "2026-02-04", "2026-02-11", "2026-02-18"], "predictions": [172512.93795284803, -495857.7717066844, -398474.2703015314, -1458061.0576246819], "total": -2179880.1616800497, "cumulative": -774756.929875046, "color": "#D0006F"}, {"month_num": 5, "dates": ["2026-02-25", "2026-03-04", "2026-03-11", "2026-03-18"], "predictions": [926781.01623876, -27518.392784723153, -159597.68630168386, -490438.35290408134], "total": 249226.5842482716, "cumulative": -525530.3456267745, "color": "#3C1053"}, {"month_num": 6, "dates": ["2026-03-25", "2026-04-01", "2026-04-08", "2026-04-15"], "predictions": [1330410.3681738235, -197308.28836196856, -125717.377302512, -414172.4211487995], "total": 593212.2813605434, "cumulative": 67681.93573376897, "color": "#830051"}];
        var prevEndDate = lastHistDate;
        var prevEndVal = lastHistVal;
        
        monthlyData.forEach(function(month, idx) {
            var xVals = [prevEndDate].concat(month.dates);
            var yVals = [prevEndVal].concat(month.predictions);
            var monthTotal = month.total;
            var sign = monthTotal >= 0 ? '+' : '';
            longForecastTraces.push({
                x: xVals,
                y: yVals,
                type: 'scatter',
                mode: 'lines+markers',
                name: 'M' + month.month_num + ' (' + sign + (monthTotal/1000).toFixed(0) + 'K)',
                line: {color: monthColors[idx], width: 3},
                marker: {size: 8, symbol: 'circle'},
                fill: 'tozeroy',
                fillcolor: monthColors[idx] + '15',
                hovertemplate: '<b>Month ' + month.month_num + '</b><br>Date: %{x}<br>Net: $%{y:,.0f}<extra></extra>'
            });
            prevEndDate = month.dates[month.dates.length - 1];
            prevEndVal = month.predictions[month.predictions.length - 1];
        });
        
        Plotly.newPlot('long-forecast-KR10', longForecastTraces, {
            height: 380,
            margin: {t: 60, b: 60, l: 80, r: 40},
            xaxis: {
                title: {text: 'Week', font: {size: 12, color: '#666'}},
                tickangle: -30,
                tickfont: {size: 10},
                gridcolor: '#eee'
            },
            yaxis: {
                title: {text: 'Net Cash Flow (USD)', font: {size: 12, color: '#666'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            legend: {
                x: 0.5,
                y: 1.15,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ccc',
                borderwidth: 1,
                font: {size: 10},
                itemwidth: 40
            },
            hovermode: 'x unified',
            shapes: [{
                type: 'line',
                x0: lastHistDate,
                x1: lastHistDate,
                y0: 0,
                y1: 1,
                yref: 'paper',
                line: {color: '#888', width: 2, dash: 'dash'}
            }],
            annotations: [{
                x: lastHistDate,
                y: 1.02,
                yref: 'paper',
                text: 'Forecast ‚Üí',
                showarrow: false,
                font: {size: 10, color: '#666'}
            }],
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});

        // Monthly Summary Bar Chart
        var monthlyTotals = monthlyData.map(m => m.total);
        var monthlyLabels = monthlyData.map(m => 'Month ' + m.month_num);
        var monthlyBarColors = monthlyTotals.map((v, i) => v >= 0 ? monthColors[i] : '#D0006F');
        
        // Calculate y-axis range to accommodate text labels
        var maxVal = Math.max(...monthlyTotals);
        var minVal = Math.min(...monthlyTotals);
        var yPadding = Math.max(Math.abs(maxVal), Math.abs(minVal)) * 0.25;
        var yMin = minVal < 0 ? minVal - yPadding : Math.min(0, minVal);
        var yMax = maxVal > 0 ? maxVal + yPadding : Math.max(0, maxVal);
        
        Plotly.newPlot('monthly-chart-KR10', [
            {
                x: monthlyLabels,
                y: monthlyTotals,
                type: 'bar',
                name: 'Monthly Net',
                marker: {
                    color: monthlyBarColors,
                    line: {color: 'rgba(0,0,0,0.3)', width: 1}
                },
                text: monthlyTotals.map(v => v >= 0 ? '+' + (v/1000).toFixed(0) + 'K' : (v/1000).toFixed(0) + 'K'),
                textposition: 'outside',
                textfont: {size: 11, color: '#333', family: 'Inter, sans-serif', weight: 600},
                cliponaxis: false,
                constraintext: 'none',
                hovertemplate: '<b>%{x}</b><br>Net: $%{y:,.0f}<extra></extra>'
            },
            {
                x: monthlyLabels,
                y: monthlyData.map(m => m.cumulative),
                type: 'scatter',
                mode: 'lines+markers',
                name: 'Cumulative Total',
                yaxis: 'y2',
                line: {color: '#003865', width: 3},
                marker: {size: 10, symbol: 'circle'},
                hovertemplate: '<b>%{x}</b><br>Cumulative: $%{y:,.0f}<extra></extra>'
            }
        ], {
            height: 380,
            margin: {t: 80, b: 60, l: 80, r: 80},
            xaxis: {
                title: {text: 'Forecast Period', font: {size: 12, color: '#666'}},
                tickfont: {size: 11}
            },
            yaxis: {
                title: {text: 'Monthly Net (USD)', font: {size: 12, color: '#830051'}},
                tickformat: ',.0f',
                tickfont: {size: 10},
                gridcolor: '#eee',
                zerolinecolor: '#333',
                zerolinewidth: 2,
                range: [yMin, yMax]
            },
            yaxis2: {
                title: {text: 'Cumulative (USD)', font: {size: 12, color: '#003865'}},
                overlaying: 'y',
                side: 'right',
                tickformat: ',.0f',
                tickfont: {size: 10}
            },
            showlegend: true,
            legend: {
                x: 0.5,
                y: 1.12,
                xanchor: 'center',
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#ddd',
                borderwidth: 1,
                font: {size: 11}
            },
            hovermode: 'x unified',
            plot_bgcolor: 'white',
            paper_bgcolor: 'white'
        }, {responsive: true});
        </script>
        

    </main>

    <footer style="text-align: center; padding: 2rem; color: #6c757d; font-size: 0.9rem;">
        <p>üè¢ Global Finance Services & Group Controllers | Cash Flow Analytics Platform</p>
        <p style="margin-top: 0.5rem;">Dashboard generated using Python ML Pipeline with AstraZeneca Theme</p>
    </footer>
</body>
</html>